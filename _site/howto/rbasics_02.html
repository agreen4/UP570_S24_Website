<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Neighborhood Analysis - Lesson 2: Manipulating Data Frames</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../styles.css">
</head>
<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Neighborhood Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus/index.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule/index.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments/index.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../howto/index.html" rel="" target="" aria-current="page">
 <span class="menu-text">How To</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources/index.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/UP570-S24/discussion" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Discussion</span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../howto/rbasics_01.html">R Basics</a></li><li class="breadcrumb-item"><a href="../howto/rbasics_02.html">Lesson 2: Manipulating Data Frames</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Get Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/setupr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Set Up R and RStudio</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">R Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/rbasics_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lesson 1: Basic Principles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/rbasics_02.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lesson 2: Manipulating Data Frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/rbasics_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lesson 3: Tidy Data</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Communicate Your Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../howto/PWBTN/PWBTN.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Planning and Writing By The Numbers</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Code Base</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Share Your Work</span></span>
  </li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#lesson-overview" id="toc-lesson-overview" class="nav-link active" data-scroll-target="#lesson-overview">Lesson Overview</a></li>
  <li><a href="#lesson-goals" id="toc-lesson-goals" class="nav-link" data-scroll-target="#lesson-goals">Lesson Goals</a></li>
  <li>
<a href="#getting-set-up" id="toc-getting-set-up" class="nav-link" data-scroll-target="#getting-set-up">Getting Set Up</a>
  <ul class="collapse">
<li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The Data</a></li>
  <li><a href="#extending-base-r-with-packages" id="toc-extending-base-r-with-packages" class="nav-link" data-scroll-target="#extending-base-r-with-packages">Extending Base R With Packages</a></li>
  </ul>
</li>
  <li><a href="#read-in-data" id="toc-read-in-data" class="nav-link" data-scroll-target="#read-in-data">Read in Data</a></li>
  <li>
<a href="#describing-the-data" id="toc-describing-the-data" class="nav-link" data-scroll-target="#describing-the-data">Describing the Data</a>
  <ul class="collapse">
<li><a href="#size" id="toc-size" class="nav-link" data-scroll-target="#size">Size</a></li>
  <li><a href="#content" id="toc-content" class="nav-link" data-scroll-target="#content">Content</a></li>
  <li><a href="#names" id="toc-names" class="nav-link" data-scroll-target="#names">Names</a></li>
  <li><a href="#summaries" id="toc-summaries" class="nav-link" data-scroll-target="#summaries">Summaries</a></li>
  <li><a href="#selective-summaries" id="toc-selective-summaries" class="nav-link" data-scroll-target="#selective-summaries">Selective Summaries</a></li>
  <li><a href="#tracts-in-illinois" id="toc-tracts-in-illinois" class="nav-link" data-scroll-target="#tracts-in-illinois">Tracts in Illinois</a></li>
  <li><a href="#grouped-means" id="toc-grouped-means" class="nav-link" data-scroll-target="#grouped-means">Grouped Means</a></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a></li>
  <li><a href="#dealing-with-missing-values" id="toc-dealing-with-missing-values" class="nav-link" data-scroll-target="#dealing-with-missing-values">Dealing with Missing Values</a></li>
  </ul>
</li>
  <li><a href="#independent-exploration" id="toc-independent-exploration" class="nav-link" data-scroll-target="#independent-exploration">Independent Exploration:</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Lesson 2: Manipulating Data Frames</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="lesson-overview" class="level2"><h2 class="anchored" data-anchor-id="lesson-overview">Lesson Overview</h2>
</section><section id="lesson-goals" class="level2"><h2 class="anchored" data-anchor-id="lesson-goals">Lesson Goals</h2>
<p>By the end of this lesson, you should be familiar with:</p>
<ul>
<li>Basic tools for selecting and subsetting data</li>
<li>Strategies for describing data</li>
</ul></section><section id="getting-set-up" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="getting-set-up">Getting Set Up</h2>
<section id="the-data" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="the-data">The Data</h3>
<p>So far, we’ve worked with “tiny” bits of data - mainly things that we input manually. It’s time to start working with some real world data!</p>
<p>We’re going to work with data on those census tracts that were designated as Opportunity Zones as part of the federal <a href="https://www.congress.gov/115/bills/hr1/BILLS-115hr1enr.pdf">Tax Cuts and Jobs Act of 2017</a>. These incentives are designed to spur investment in low-income and undercapitalized cities, by providing investors with tax incentives to invest capital in these locations. Each state had the opportunity to designate specific census tracts as Opportunity Zones. Practitioners and researchers have <a href="https://www.urban.org/policy-centers/metropolitan-housing-and-communities-policy-center/projects/opportunity-zones">many questions</a> about the efficacy of the program and the designations made by governors.</p>
<p>Take a look <a href="https://www.arcgis.com/apps/View/index.html?appid=77f3cad12b6c4bffb816332544f04542">here</a> to see a map of where designated opportunity zones are located. The orange geometries reflected on the map are <a href="https://www.census.gov/programs-surveys/geography/about/glossary.html#par_textimage_13">census tracts</a>, which we often use as a proxy for neighborhoods, especially in urban areas. Find a place you know, and take a look at which areas are designated.</p>
<p>The specific data we’ll work with comes from the Urban Institute - they have joined the IRS’s list of Opportunity Zones designated by the Tax Cuts and Jobs Act to a series of indicators focused on investment potential. A copy of the Urban Institute’s dataset is <a href="https://uofi.box.com/s/oh2455rlshpioodbmqfgpk5nkfep027n">available here for download</a>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>You’ll need to authenticate and log in to UIUC Box to access this file. You can also download the data <a href="https://www.urban.org/sites/default/files/2021-01/urbaninstitute_tractlevelozanalysis_update01142021.xlsx">directly</a> from Urban Institute’s Opportunity Zone <a href="https://www.urban.org/policy-centers/metropolitan-housing-and-communities-policy-center/projects/opportunity-zones">landing page</a>.</p>
</div></div></section><section id="extending-base-r-with-packages" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="extending-base-r-with-packages">Extending Base R With Packages</h3>
<p>We’re been working exclusively in “base” R as we are getting familiar with the R language and RStudio interface. This means we’ve been working with the commands and functions that come with every new installation of R.</p>
<p>There’s a whole world of other functions that we can use to extend R’s functionality - these packages can help us do things like load data with specific formats, make visualizations, and run specific types of statistical models. There’s more than 20,000 packages which users have created to extend R’s functionality - you can find a list <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">here</a>. We’ll introduce common packages which help with neighborhood analysis tasks, but your favorite search engine is probably the easiest way to find packages or functions that may help you read specific data or perform certain types of tasks.</p>
<section id="readxl" class="level4"><h4 class="anchored" data-anchor-id="readxl">Readxl</h4>
<p>Our first exploration with packages will help us read in our Opportunity Zone data. We will use a package called <code>readxl</code> which is designed to, well, <em>read Microsoft Excel files</em> such as the Opportunity Zone data.</p>
</section><section id="installing-readxl" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="installing-readxl">Installing Readxl</h4>
<p>We will use the <a href="https://readxl.tidyverse.org"><code>readxl</code></a> package to help us read our Opportunity Zone data from an Excel workbook into Rstudio so we can view it as a data frame. The first time you want to make use of a package you have not used before, you’ll need to <em>install</em> it, which essentially means R needs to download it from a repository on the internet and prepare it to be accessed on your computer.</p>
<p>We use the <a href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/install.packages"><code>install.packages()</code></a> command to automatically download and prepare the package for use:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note that the name of the package is in quotes here. Any guesses as to why?</p>
</div></div><p>Note that we only need to <em>install</em> the package one time. It will remain available on your machine for use in the future.</p>
</section><section id="loading-readxl" class="level4 page-columns page-full"><h4 class="anchored" data-anchor-id="loading-readxl">Loading Readxl</h4>
<p>In our previous step, we <em>installed</em> the <code>readxl</code> package which involved downloading it form an internet repository and preparing it for use. There’s an additional step - now we need to <em>load</em> the package, which tells R that we want to make the package’s functions available for use in our current R session. The <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> command loads packages for use in our current R session. While we only need to install a package one time, each time you start a new R session, you’ll need to load the packages you want to use for a particular kind of additional functionality.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note that the name of the package is <em>not</em> in quotes here. Any guesses as to why?</p>
</div></div><p>Now that the <code>readxl</code> package is loaded, we can make use of it to read our Opportunity Zone data into our R session.</p>
</section><section id="takeaways" class="level4"><h4 class="anchored" data-anchor-id="takeaways">Takeaways</h4>
<ul>
<li><p>In general, you will only need to use <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> once (once a package is installed, you can use it for all R sessions moving forward).</p></li>
<li><p>To load packages, we use the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> command. This will load an already installed package and make it accessible within our current R session. You will need to load already installed packages at the beginning of each new R session. Typically, it is a good practice to load the packages you’ll use in a script at the beginning of the script.</p></li>
</ul>
<p>Note that to install the package, you need to treat the package name as a character vector <code>"readxl"</code>, but when you load it in your R session, it does not need to be treated as a character vector<code>readxl</code>.</p>
</section></section></section><section id="read-in-data" class="level2"><h2 class="anchored" data-anchor-id="read-in-data">Read in Data</h2>
<p>Now that we’ve loaded the <code>readxl</code> package, we can import the Excel file containing data on tracts designated as opportunity zones in the United States. To learn about the <em>functions</em> in the package, you can either do a Google search for <a href="https://readxl.tidyverse.org">Readxl</a>, or you can use R’s built in documentation by typing <code><a href="https://readxl.tidyverse.org/reference/readxl-package.html">?readxl</a></code></p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">readxl</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that running this command pops open documentation for <code>readxl</code> in the Help tab of the auxiliary pane. As the documentation states, <code>readxl</code> imports excel files. Looking at the documentation, the <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> command will read a single excel sheet, or we can optionally select a sheet by name or number from an excel workbook with multiple sheets. In this case, the Urban Institute data is in a workbook with a single sheet, so we just need to tell R where the file is to load.</p>
<p>The dataset we want to load is called “urbaninstitute_tractlevelozanalysis_update01142021.xlsx” (oof! - that’s a descriptive but way too long file name!). We can point R to the correct location. Since our R project file sets the relative path for all of the work within, the path to the data is:<code>"data/urbaninstitute_tractlevelozanalysis_update1242018.xlsx"</code>. Wrapped into the command to read the excel file, it looks like this:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/urbaninstitute_tractlevelozanalysis_update01142021.xlsx"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>R read the data and is displaying it to us. But one problem - it read the data in and we can look at it, but it’s not really available for our continued use. We typically want to read data and store it as an object so that we can refer back to it and even modify it.</p>
<p>Let’s go ahead and read the Excel data in again, but this time, we’ll assign it to an object called “ozs”:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">&lt;-</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/urbaninstitute_tractlevelozanalysis_update01142021.xlsx"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at your Environment window (top right quadrant of RStudio) - a data frame containing information on opportunity zones should be loaded in an object called “ozs”.</p>
<p>The environment window tells us that the object ozs contains 42,176 observations (rows) and 27 variables (columns).</p>
<p>If we type the name of the object, we can view it’s contents:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42,178 × 27
   geoid       state   DesignatedOZ county    Type  dec_score SE_Flag Population
   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1 01001020200 Alabama           NA Autauga … Low-…         4      NA       2196
 2 01001020300 Alabama           NA Autauga … Non-…         6      NA       3136
 3 01001020700 Alabama            1 Autauga … Low-…         8      NA       3047
 4 01001020802 Alabama           NA Autauga … Non-…        10      NA      10743
 5 01001021000 Alabama           NA Autauga … Non-…         5      NA       2899
 6 01001021100 Alabama           NA Autauga … Low-…         6      NA       3247
 7 01003010100 Alabama           NA Baldwin … Non-…         6      NA       4013
 8 01003010200 Alabama            1 Baldwin … Low-…         9      NA       3067
 9 01003010300 Alabama           NA Baldwin … Non-…        10      NA       8079
10 01003010400 Alabama            1 Baldwin … Non-…         9      NA       4578
# ℹ 42,168 more rows
# ℹ 19 more variables: medhhincome &lt;dbl&gt;, PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;,
#   medvalue &lt;dbl&gt;, medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;,
#   vacancyrate &lt;dbl&gt;, pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
<p>You could also inspect the dataset using the <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> command. This will allow us to look at the data in a tabular format.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, use the str() (structure) command to gain a better understanding of the <em>types</em> of data in each column</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [42,178 × 27] (S3: tbl_df/tbl/data.frame)
 $ geoid           : chr [1:42178] "01001020200" "01001020300" "01001020700" "01001020802" ...
 $ state           : chr [1:42178] "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ DesignatedOZ    : num [1:42178] NA NA 1 NA NA NA NA 1 NA 1 ...
 $ county          : chr [1:42178] "Autauga County" "Autauga County" "Autauga County" "Autauga County" ...
 $ Type            : chr [1:42178] "Low-Income Community" "Non-LIC Contiguous" "Low-Income Community" "Non-LIC Contiguous" ...
 $ dec_score       : num [1:42178] 4 6 8 10 5 6 6 9 10 9 ...
 $ SE_Flag         : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...
 $ Population      : num [1:42178] 2196 3136 3047 10743 2899 ...
 $ medhhincome     : num [1:42178] 41107 51250 45234 61242 49567 ...
 $ PovertyRate     : num [1:42178] 0.24 0.107 0.19 0.153 0.151 ...
 $ unemprate       : num [1:42178] 0.0775 0.051 0.1407 0.0459 0.0289 ...
 $ medvalue        : num [1:42178] 95300 113800 93500 160400 102900 ...
 $ medrent         : num [1:42178] 743 817 695 1018 546 ...
 $ pctown          : num [1:42178] 0.628 0.703 0.711 0.823 0.83 ...
 $ severerentburden: num [1:42178] 0.3269 0.3223 0.3887 0.1994 0.0994 ...
 $ vacancyrate     : num [1:42178] 0.0584 0.1399 0.0619 0.0609 0.2182 ...
 $ pctwhite        : num [1:42178] 0.439 0.671 0.833 0.814 0.726 ...
 $ pctBlack        : num [1:42178] 0.5187 0.205 0.0922 0.1572 0.2456 ...
 $ pctHispanic     : num [1:42178] 0.01275 0.0727 0.0338 0.01368 0.00448 ...
 $ pctAAPIalone    : num [1:42178] 0.01093 0.01052 0 0.00959 0 ...
 $ pctunder18      : num [1:42178] 0.218 0.224 0.249 0.27 0.245 ...
 $ pctover64       : num [1:42178] 0.124 0.175 0.149 0.122 0.156 ...
 $ HSorlower       : num [1:42178] 0.581 0.464 0.544 0.45 0.621 ...
 $ BAorhigher      : num [1:42178] 0.162 0.219 0.113 0.229 0.136 ...
 $ Metro           : num [1:42178] 1 1 1 1 1 1 1 1 1 1 ...
 $ Micro           : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...
 $ NoCBSAType      : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
</div>
<p>We get a list of the columns in the data, along with their types (in this case character or numeric), and then we see the values associated with the first few observations.</p>
<p>A few things to note after your preliminary inspection:</p>
<ul>
<li>These data are at the census tract level and include geographic identifiers including <strong>geoid</strong>, the combined, state-county-tract FIPS code, <strong>state</strong> the state name, and <strong>county</strong> the county name.</li>
<li>These data include a field named <strong>Designated</strong> which is 1 when an eligible tract was designated as an opportunity zone, and <code>NA</code> where the tract was not designated.</li>
<li>The dataset also includes some other tract-level demographic measures, as well as additional geographic flags.</li>
</ul></section><section id="describing-the-data" class="level2 page-columns page-full"><h2 class="anchored" data-anchor-id="describing-the-data">Describing the Data</h2>
<p>When we load a new dataset that we’re not familiar with, it’s a good idea to spend a few minutes <em>describing</em> the data. This allows us to understand a bit more about it’s structure and may also help us ask some basic questions about the validity and reliability of the data (at least compared to what we are expecting to see). R has several functions for determining the structure of data frames and tibbles. See below:</p>
<section id="size" class="level3"><h3 class="anchored" data-anchor-id="size">Size</h3>
<ul>
<li>
<code>dim(ozs)</code>: returns a vector with the number of rows in the first element, and the number of columns as the second element (the dimensions of the object)</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42178    27</code></pre>
</div>
</div>
<ul>
<li>
<code>nrow(ozs)</code>: returns the number of rows</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42178</code></pre>
</div>
</div>
<ul>
<li>
<code>ncol(ozs)</code>: returns the number of columns</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
</div>
</section><section id="content" class="level3"><h3 class="anchored" data-anchor-id="content">Content</h3>
<ul>
<li>
<code>head(ozs)</code>: shows the first 6 rows</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 27
  geoid state DesignatedOZ county Type  dec_score SE_Flag Population medhhincome
  &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
1 0100… Alab…           NA Autau… Low-…         4      NA       2196       41107
2 0100… Alab…           NA Autau… Non-…         6      NA       3136       51250
3 0100… Alab…            1 Autau… Low-…         8      NA       3047       45234
4 0100… Alab…           NA Autau… Non-…        10      NA      10743       61242
5 0100… Alab…           NA Autau… Non-…         5      NA       2899       49567
6 0100… Alab…           NA Autau… Low-…         6      NA       3247       40801
# ℹ 18 more variables: PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;, pctAAPIalone &lt;dbl&gt;,
#   pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;, BAorhigher &lt;dbl&gt;,
#   Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>
<code>tail(ozs)</code>: shows the last 6 rows</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 27
  geoid state DesignatedOZ county Type  dec_score SE_Flag Population medhhincome
  &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
1 7803… &lt;NA&gt;            NA &lt;NA&gt;   Non-…        NA      NA         NA          NA
2 7803… Virg…            1 &lt;NA&gt;   Non-…        NA      NA         NA          NA
3 7803… Virg…            1 &lt;NA&gt;   Low-…        NA      NA         NA          NA
4 7803… Virg…            1 &lt;NA&gt;   Low-…        NA      NA         NA          NA
5 7803… Virg…            1 &lt;NA&gt;   Low-…        NA      NA         NA          NA
6 7803… Virg…            1 &lt;NA&gt;   Low-…        NA      NA         NA          NA
# ℹ 18 more variables: PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;, pctAAPIalone &lt;dbl&gt;,
#   pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;, BAorhigher &lt;dbl&gt;,
#   Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
</section><section id="names" class="level3"><h3 class="anchored" data-anchor-id="names">Names</h3>
<ul>
<li>
<code>names(ozs)</code>: returns the column names as a list</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "geoid"            "state"            "DesignatedOZ"     "county"          
 [5] "Type"             "dec_score"        "SE_Flag"          "Population"      
 [9] "medhhincome"      "PovertyRate"      "unemprate"        "medvalue"        
[13] "medrent"          "pctown"           "severerentburden" "vacancyrate"     
[17] "pctwhite"         "pctBlack"         "pctHispanic"      "pctAAPIalone"    
[21] "pctunder18"       "pctover64"        "HSorlower"        "BAorhigher"      
[25] "Metro"            "Micro"            "NoCBSAType"      </code></pre>
</div>
</div>
</section><section id="summaries" class="level3"><h3 class="anchored" data-anchor-id="summaries">Summaries</h3>
<ul>
<li>
<code>str(ozs)</code>: structure of the object and information about the class, length and content of each column</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [42,178 × 27] (S3: tbl_df/tbl/data.frame)
 $ geoid           : chr [1:42178] "01001020200" "01001020300" "01001020700" "01001020802" ...
 $ state           : chr [1:42178] "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ DesignatedOZ    : num [1:42178] NA NA 1 NA NA NA NA 1 NA 1 ...
 $ county          : chr [1:42178] "Autauga County" "Autauga County" "Autauga County" "Autauga County" ...
 $ Type            : chr [1:42178] "Low-Income Community" "Non-LIC Contiguous" "Low-Income Community" "Non-LIC Contiguous" ...
 $ dec_score       : num [1:42178] 4 6 8 10 5 6 6 9 10 9 ...
 $ SE_Flag         : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...
 $ Population      : num [1:42178] 2196 3136 3047 10743 2899 ...
 $ medhhincome     : num [1:42178] 41107 51250 45234 61242 49567 ...
 $ PovertyRate     : num [1:42178] 0.24 0.107 0.19 0.153 0.151 ...
 $ unemprate       : num [1:42178] 0.0775 0.051 0.1407 0.0459 0.0289 ...
 $ medvalue        : num [1:42178] 95300 113800 93500 160400 102900 ...
 $ medrent         : num [1:42178] 743 817 695 1018 546 ...
 $ pctown          : num [1:42178] 0.628 0.703 0.711 0.823 0.83 ...
 $ severerentburden: num [1:42178] 0.3269 0.3223 0.3887 0.1994 0.0994 ...
 $ vacancyrate     : num [1:42178] 0.0584 0.1399 0.0619 0.0609 0.2182 ...
 $ pctwhite        : num [1:42178] 0.439 0.671 0.833 0.814 0.726 ...
 $ pctBlack        : num [1:42178] 0.5187 0.205 0.0922 0.1572 0.2456 ...
 $ pctHispanic     : num [1:42178] 0.01275 0.0727 0.0338 0.01368 0.00448 ...
 $ pctAAPIalone    : num [1:42178] 0.01093 0.01052 0 0.00959 0 ...
 $ pctunder18      : num [1:42178] 0.218 0.224 0.249 0.27 0.245 ...
 $ pctover64       : num [1:42178] 0.124 0.175 0.149 0.122 0.156 ...
 $ HSorlower       : num [1:42178] 0.581 0.464 0.544 0.45 0.621 ...
 $ BAorhigher      : num [1:42178] 0.162 0.219 0.113 0.229 0.136 ...
 $ Metro           : num [1:42178] 1 1 1 1 1 1 1 1 1 1 ...
 $ Micro           : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...
 $ NoCBSAType      : num [1:42178] NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
</div>
<ul>
<li>
<code>summary(ozs)</code>: summary statistics for each column</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    geoid              state            DesignatedOZ      county         
 Length:42178       Length:42178       Min.   :1       Length:42178      
 Class :character   Class :character   1st Qu.:1       Class :character  
 Mode  :character   Mode  :character   Median :1       Mode  :character  
                                       Mean   :1                         
                                       3rd Qu.:1                         
                                       Max.   :1                         
                                       NA's   :33414                     
     Type             dec_score         SE_Flag        Population   
 Length:42178       Min.   : 1.000   Min.   :1       Min.   :    0  
 Class :character   1st Qu.: 3.000   1st Qu.:1       1st Qu.: 2752  
 Mode  :character   Median : 5.000   Median :1       Median : 3897  
                    Mean   : 5.495   Mean   :1       Mean   : 4147  
                    3rd Qu.: 8.000   3rd Qu.:1       3rd Qu.: 5224  
                    Max.   :10.000   Max.   :1       Max.   :40616  
                    NA's   :1239     NA's   :41113   NA's   :112    
  medhhincome      PovertyRate       unemprate          medvalue      
 Min.   :  2499   Min.   :0.0000   Min.   :0.00000   Min.   :   9999  
 1st Qu.: 32014   1st Qu.:0.1381   1st Qu.:0.05900   1st Qu.:  85700  
 Median : 41094   Median :0.2055   Median :0.08735   Median : 122400  
 Mean   : 42153   Mean   :0.2331   Mean   :0.10063   Mean   : 165663  
 3rd Qu.: 50833   3rd Qu.:0.2996   3rd Qu.:0.12600   3rd Qu.: 191300  
 Max.   :181406   Max.   :1.0000   Max.   :1.00000   Max.   :2000001  
 NA's   :249      NA's   :141      NA's   :141       NA's   :1106     
    medrent           pctown       severerentburden  vacancyrate     
 Min.   :  99.0   Min.   :0.0000   Min.   :0.0000   Min.   :0.00000  
 1st Qu.: 655.0   1st Qu.:0.3833   1st Qu.:0.1662   1st Qu.:0.07116  
 Median : 800.0   Median :0.5728   Median :0.2403   Median :0.11661  
 Mean   : 860.9   Mean   :0.5436   Mean   :0.2476   Mean   :0.14121  
 3rd Qu.:1010.0   3rd Qu.:0.7316   3rd Qu.:0.3206   3rd Qu.:0.18011  
 Max.   :3501.0   Max.   :1.0000   Max.   :1.0000   Max.   :1.00000  
 NA's   :395      NA's   :1035     NA's   :189      NA's   :167      
    pctwhite         pctBlack        pctHispanic       pctAAPIalone    
 Min.   :0.0000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
 1st Qu.:0.2039   1st Qu.:0.01071   1st Qu.:0.02603   1st Qu.:0.00000  
 Median :0.5614   Median :0.06655   Median :0.09304   Median :0.00883  
 Mean   :0.5210   Mean   :0.18651   Mean   :0.22063   Mean   :0.03806  
 3rd Qu.:0.8294   3rd Qu.:0.24998   3rd Qu.:0.32018   3rd Qu.:0.03532  
 Max.   :1.0000   Max.   :1.00000   Max.   :1.00000   Max.   :0.91144  
 NA's   :131      NA's   :131       NA's   :131       NA's   :131      
   pctunder18       pctover64         HSorlower        BAorhigher    
 Min.   :0.0000   Min.   :0.00000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.1908   1st Qu.:0.09436   1st Qu.:0.4150   1st Qu.:0.1120  
 Median :0.2300   Median :0.13604   Median :0.5182   Median :0.1680  
 Mean   :0.2295   Mean   :0.14340   Mean   :0.5067   Mean   :0.2035  
 3rd Qu.:0.2719   3rd Qu.:0.18057   3rd Qu.:0.6113   3rd Qu.:0.2536  
 Max.   :0.6468   Max.   :1.00000   Max.   :1.0000   Max.   :1.0000  
 NA's   :131      NA's   :131       NA's   :132      NA's   :132     
     Metro          Micro         NoCBSAType   
 Min.   :1      Min.   :1       Min.   :1      
 1st Qu.:1      1st Qu.:1       1st Qu.:1      
 Median :1      Median :1       Median :1      
 Mean   :1      Mean   :1       Mean   :1      
 3rd Qu.:1      3rd Qu.:1       3rd Qu.:1      
 Max.   :1      Max.   :1       Max.   :1      
 NA's   :9111   NA's   :37450   NA's   :37795  </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your Turn!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Try your hand at some of these summarization methods to see what they produce.</p>
</div>
</div>
</section><section id="selective-summaries" class="level3"><h3 class="anchored" data-anchor-id="selective-summaries">Selective Summaries</h3>
<p>How would we run summaries just for population, median household income, and poverty rate (think back to how we created subsets using lists)?</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Population"</span>, <span class="st">"medhhincome"</span>, <span class="st">"PovertyRate"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Population     medhhincome      PovertyRate    
 Min.   :    0   Min.   :  2499   Min.   :0.0000  
 1st Qu.: 2752   1st Qu.: 32014   1st Qu.:0.1381  
 Median : 3897   Median : 41094   Median :0.2055  
 Mean   : 4147   Mean   : 42153   Mean   :0.2331  
 3rd Qu.: 5224   3rd Qu.: 50833   3rd Qu.:0.2996  
 Max.   :40616   Max.   :181406   Max.   :1.0000  
 NA's   :112     NA's   :249      NA's   :141     </code></pre>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Your Turn!</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Practice your querying skills - how would we return only those records for census tracts with a median household income above $100,000 per year?</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">medhhincome</span><span class="op">&gt;=</span><span class="fl">100000</span>,<span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 399 × 27
   geoid       state   DesignatedOZ county    Type  dec_score SE_Flag Population
   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 2 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 3 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 4 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 5 04013815600 Arizona           NA Maricopa… Non-…        10      NA       5762
 6 04013816800 Arizona           NA Maricopa… Non-…        10       1       3727
 7 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 8 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
 9 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
10 &lt;NA&gt;        &lt;NA&gt;              NA &lt;NA&gt;      &lt;NA&gt;         NA      NA         NA
# ℹ 389 more rows
# ℹ 19 more variables: medhhincome &lt;dbl&gt;, PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;,
#   medvalue &lt;dbl&gt;, medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;,
#   vacancyrate &lt;dbl&gt;, pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="tracts-in-illinois" class="level3"><h3 class="anchored" data-anchor-id="tracts-in-illinois">Tracts in Illinois</h3>
<p>Oftentimes, we’ll want to <em>query</em> out a subset of observations based upon their geographic location. Let’s try selecting all tracts in Illinois based upon their designation status.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Your Turn!</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>How would we query out tracts in Illinois? Experiment in your own script.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span>,<span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,682 × 27
   geoid       state    DesignatedOZ county   Type  dec_score SE_Flag Population
   &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1 17001000201 Illinois           NA Adams C… Non-…         7      NA       1937
 2 17001000202 Illinois           NA Adams C… Low-…         1      NA       2563
 3 17001000400 Illinois           NA Adams C… Low-…         1      NA       3403
 4 17001000500 Illinois           NA Adams C… Low-…         1      NA       2298
 5 17001000700 Illinois           NA Adams C… Low-…         1      NA       1259
 6 17001000800 Illinois            1 Adams C… Low-…         1      NA       2700
 7 17001000900 Illinois           NA Adams C… Low-…         5      NA       2671
 8 17001010100 Illinois           NA Adams C… Non-…         2      NA       4323
 9 17001010200 Illinois           NA Adams C… Low-…         2      NA       3436
10 17001010300 Illinois           NA Adams C… Non-…         8      NA       6038
# ℹ 1,672 more rows
# ℹ 19 more variables: medhhincome &lt;dbl&gt;, PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;,
#   medvalue &lt;dbl&gt;, medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;,
#   vacancyrate &lt;dbl&gt;, pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We can see in our table output that there are 1,682 eligible or designated tracts in Illinois. We could also use the <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> command to count the number of rows.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Your Turn!</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Try crafting code that would count the number of rows for Illinois</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span>,<span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1682</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="grouped-means" class="level3 page-columns page-full"><h3 class="anchored" data-anchor-id="grouped-means">Grouped Means</h3>
<p>We might also want to calculate statistics like averages for subsets. <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> will calculate the mean of a list or column. What’s the average income for tracts with a vacancy rate above 20 percent?</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>What’s the average income for tracts with a vacancy rate below 20 percent?</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">medhhincome</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">vacancyrate</span> <span class="op">&gt;</span> <span class="fl">.2</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35375.68</code></pre>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">medhhincome</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">vacancyrate</span> <span class="op">&lt;</span> <span class="fl">.2</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 43849.1</code></pre>
</div>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>You might need to check out the documentation for <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> in order to return an answer here. R will not calculate the mean if an <code>NA</code> values are present in the vector for which you’ve requested the mean - a good safety feature if you’re expecting all values to be present.</p>
<p>In imperfect data like what we’re dealing with, you can instruct R to remove those NAs and find the mean for remaining values. You may also want to make sure you’ve counted the number of NA values so you know what proportion of your data the mean is actually representing.</p>
</div></div></section><section id="subsetting" class="level3"><h3 class="anchored" data-anchor-id="subsetting">Subsetting</h3>
<p>We might also be interested in combining query criteria. R can make use of logical statements. <code>&amp;</code> is equivalent to AND and <code>|</code> is equivalent to OR. Now give it a go!</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>What is the average income for tracts in Illinois with a poverty rate of greater than 20 percent.</p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">medhhincome</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">PovertyRate</span> <span class="op">&gt;</span> <span class="fl">.2</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33526</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>To confirm we got the query correct, it may be useful to have a look at the returned data without calculating the mean:</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">$</span><span class="va">medhhincome</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">PovertyRate</span> <span class="op">&gt;</span> <span class="fl">.2</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 28819 32313 17850 26012 40475 35387 40714 22326 21500 49590 40599 37679
 [13] 26676  7004    NA  7273  5736 38056 38083 33873 49597 22813 30994 49303
 [25] 48125 46364  7234 22688 44800 35904 21107 37823 36164 44460 30406 30682
 [37] 22945 15020 38922 39000 29861 38861 29432 26750 29870 17569 36464 51458
 [49] 64073 39349 40913 45349 51840 48450 40272 36848 39096 35463 43681 29091
 [61] 27931 34671 35286 27018 36412 22647 23700 42316 38571 31696 43895    NA
 [73] 42077 36159 42280 45417 51250 52074 47652 31364 42762 42232 36522 44750
 [85] 46905 39926 37284 36607 36644 48316 40662 38693 49236 47000 44393 43912
 [97] 55741 34375 43607 34340 45208 47344 52063 28558 52833 43717 56250 30503
[109] 32317 34933 36338 32232 26773 27788 51542 35698 40515 43650 69348 52096
[121] 28487 37227 31004 33873 31160 35625 34583 23516 43011 28631 28363 22708
[133] 34030 28311 20405 20620 22289 23264 33508 31029 24914 12036 25921 29306
[145] 22097 28867 21607 23214 20912 20563 30817 16989 23929 22150 32717 31181
[157] 17652 21250 20278 20565 58047 45625 71250 61389 23834 21516 25291 27019
[169] 36250 38054 40511 29120 29446 25099 26234 26375 31216 30205 37013 35764
[181] 33088 29914 45096 48083 29980 40719 34922 31875 33173 20990 11964 41645
[193] 11250 42324 11310 10942 23603 24500 19747 18063 21250 26000 34327    NA
[205]    NA 32500 31602 18808 24178 20250 31938 25346 18859 21250 51875 35636
[217] 38260 52817 82667 19034 37610 29960 14500 22353 17731 20573 29688 21658
[229] 33849 20889 23606 15723 18125 19872 28214 19688 42292 32500 21362 22407
[241] 21727 22306 22619 33125 28984 22371 33281 31008 27353 29125 20944 43341
[253] 31518 20118 13536 23684 36938 41917 44514 51723 38750 36631 32430 35469
[265] 43083 26641 39276 26630 26443 39348 33304 37679 32277 34154 33750 35240
[277] 38857 24604 27073 42684 39500 41625 35089 25956 14556 14273 52485 44706
[289] 40199 39722 40743 40254 41081 38452 31688 49358 43698 32682 32377 31982
[301] 33631 21678 20761 22969 26727 26289 32949 27622 31250 26985 27880 25609
[313] 25855 23906 45000 32331 33509 40054 52879 40901 22422 32083 39942 27712
[325] 27156 35338 25846 31329 45313 35647 24408 22381 25786 27589 20119 24911
[337] 22000 34583 27266 19205 33947 26094 25133 24427 36042 42670 22844 27841
[349] 15485 15139 16862 22163 22972 35476 18875 26070 29844 34609 20431 28472
[361] 36818 25461 22250 14622 26180 24806 32961 27864 24045 22250 19561 31330
[373] 39005 32788 35573 35991 31867 51681 47656 50913 40125 43872 57692 61991
[385] 50726 49116 49518 48011 65357 55523 56975 41051 51699 61806 49268 30532
[397] 46988 62132 35500 44678 32027 40268 43021 44778 34835 35810 39139 40308
[409] 40201 38163 36250 47943 46172 39212 40083 39965 28508 22261 45901 44083
[421] 37941 40099 37885 39534 39766 46728 41196 49572 46739 27861 37374 32196
[433] 37334 44048 36693 37500 41449 44653 31683 41405 30769 31474 37281 17425
[445] 22857 23048 22650 41250 20500 17633 23761 30487 36613 37659 43529 39593
[457] 27214 14722 22242 44722 22956 31188 35577 33220 44592 46533 99375 21456
[469] 41902 42786 40286 35179 32500 34231 58500 50521 51442 23750 37179 31238
[481] 30161 38883 32204 20898 26071 21827 19054 26514 37723 19207 23667    NA
[493] 55813 18627 52717 25699 52308 30946 28806 43203 26319 13429 26023 27283
[505] 33250 38750 56908 17377 17370 38382 43516 13281 20294 19228 84780 29831
[517] 22279 42200 33942 45694 37891 31389 30759 50417 27185 32315 43409 25694
[529] 19000 22446 18582 32895 35528 39652  9485 35041 21053 17197 28000 42254
[541] 37353 24886 35875 31788 38060 27012 43780 74038 23302 16844 15242 54444
[553] 52368 38551 39306 34028 34375 41646 37772 39049 43156 36469 24922 28448
[565] 31907 38279 30656 35469 54293 43860 31845 42463 34167 46731 24886 29831
[577] 37917 10127 13101 15671 22108 33514 18411 28791 15000 47733 54483 44872
[589] 35329 40491 47273 36543 47908 49904 44732 49091 47981 38281 46639 49101
[601] 36830 26627 30705 26406 24423 21488 42832 23569 36806 41053 17938 22813
[613] 33579 23011 34970 38380 36824 60630 38188 36127 48339 22500 29408 37883
[625] 51121 22312 30547 34063 32134 52981 37361 45333 46020 32725 26861 45385
[637] 38625 35123 33250 41824 21739    NA 37443 33056 47813 55861 11053 37266
[649] 62966 37356 26224 40188 42537 51354 29479 26250 31250 40556 21613 26103
[661] 26667 14434 17577 28866 32083 48706 35191 39013 41739 23222 26432 25377
[673] 32083 55313 16010 45078 34382 22121 21701 41958 37261 44291 36618 40408
[685] 39514 20000 39792 30735 74554 36917 25781 37875 44094 29304 28125 24932
[697] 35179 32198 33144 31446 38144 30464 34314 46034 12474 29773 22121 21582
[709] 26591 12247 16337 18815 27599 27225 29762 44844 67000 31653 35291 41462
[721] 45929 20942 31635 42583 32396 28884 36902 24671 40298 38750 29677 36979
[733] 41037 32434 42917 42344 20741 36960 21969 25463  9836 17120 15394 28065
[745] 21849 24095 29875 41964 37750 28077 37357 34449 19650 27019 29250 33240
[757] 25134 29779 24486  9967 15036 27005 16353 20439 35398 28750 63750 36333
[769] 32188 38750 41886 30930 25994 38480 28294 20500 16667 31716 16750 16513
[781] 17500 24821 41966 31002 23214 32956 54387 32697 32260 52788 52768 25078
[793] 23371 29978 40506 19145 27165 32034 23514 43007 31639 33981 40532 39006
[805] 34708 37185 31250 37414 51767 31772 34732 31674 37386 27448 19518 22899
[817] 50052 40212 37792 40676 45962 35028 56190 38083 36794 30932 46587 27457
[829] 18983 14731 23594 34420 36053 27566 28004 14853 40737 20000 27397 19167
[841] 25791 26979 12816 21091 21330 27432 31477 34939 44792 35660    NA    NA
[853]    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA    NA
[865]    NA    NA    NA    NA    NA    NA    NA    NA    NA</code></pre>
</div>
</div>
</section><section id="dealing-with-missing-values" class="level3"><h3 class="anchored" data-anchor-id="dealing-with-missing-values">Dealing with Missing Values</h3>
<p>You’ll note that there are several flag variables in the data for which values are either 1 or <code>NA</code>. We have flags for whether a tract was designated as an Opportunity Zone, Whether it is located in a Metropolitan, Micropolitan, or Non-Core-Based Statistical Area.</p>
<p>We can use logical tests in R to identify those values that are <code>NA</code>. We can use <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> to test whether a value is NA (TRUE) or is not NA (FALSE). We could also use the negation sign <code>!</code> to determine whether a value <em>is not</em> <code>NA</code> (<code>!is.na()</code>).</p>
<p>The following code returns a vector of logical values (TRUE / FALSE) regarding whether the value for the Designated column is <code>NA</code> or not.</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>logical(0)</code></pre>
</div>
</div>
<p>For logical values, R codes 1 as TRUE and 0 as false, meaning if we wanted to count the number of undesginated tracts, we could ask for the sum of the values for which the logical test is true (the sum of the values that are <code>NA</code>):</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>33,414 tracts were not designated.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<p>Now count the number of tracts that were designated (where the value is not <code>NA</code>).</p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We might also want to recode those NA values to something else. We can use assignment and subset notation to replace na values with something else. Let’s replace those NAs in the Designated column with 0.</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">$</span><span class="va">DesignatedOZ</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">DesignatedOZ</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="fl">0</span></span>
<span><span class="va">ozs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42,178 × 27
   geoid       state   DesignatedOZ county    Type  dec_score SE_Flag Population
   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1 01001020200 Alabama            0 Autauga … Low-…         4      NA       2196
 2 01001020300 Alabama            0 Autauga … Non-…         6      NA       3136
 3 01001020700 Alabama            1 Autauga … Low-…         8      NA       3047
 4 01001020802 Alabama            0 Autauga … Non-…        10      NA      10743
 5 01001021000 Alabama            0 Autauga … Non-…         5      NA       2899
 6 01001021100 Alabama            0 Autauga … Low-…         6      NA       3247
 7 01003010100 Alabama            0 Baldwin … Non-…         6      NA       4013
 8 01003010200 Alabama            1 Baldwin … Low-…         9      NA       3067
 9 01003010300 Alabama            0 Baldwin … Non-…        10      NA       8079
10 01003010400 Alabama            1 Baldwin … Non-…         9      NA       4578
# ℹ 42,168 more rows
# ℹ 19 more variables: medhhincome &lt;dbl&gt;, PovertyRate &lt;dbl&gt;, unemprate &lt;dbl&gt;,
#   medvalue &lt;dbl&gt;, medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;,
#   vacancyrate &lt;dbl&gt;, pctwhite &lt;dbl&gt;, pctBlack &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Can you inspect the table here to see what happened? In plain language, we told R “for those values of the column named Designated in the ozs data table where the values are <code>NA</code>, assign a new value of 0.”</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<p>Go ahead and do the same thing for the Metro, Micro, and NoCBSAType columns.</p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ozs</span><span class="op">$</span><span class="va">Metro</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">Metro</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="fl">0</span></span>
<span><span class="va">ozs</span><span class="op">$</span><span class="va">Micro</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">Micro</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="fl">0</span></span>
<span><span class="va">ozs</span><span class="op">$</span><span class="va">NoCBSAType</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">NoCBSAType</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="fl">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section></section><section id="independent-exploration" class="level2"><h2 class="anchored" data-anchor-id="independent-exploration">Independent Exploration:</h2>
<p>Now answer the following questions:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<p>Report average poverty rates for <em>designated</em> opportunity zones in metropolitan, micropolitan, and non-CBSA areas</p>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Your Work Here</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">PovertyRate</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span> <span class="op">==</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">Metro</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">PovertyRate</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span> <span class="op">==</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">Micro</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">PovertyRate</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span> <span class="op">==</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">NoCBSAType</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Your Turn</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<p>For Illinois, how different are the average vacancy rates for <em>designated</em> and <em>undesignated</em> census tracts?</p>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">vacancyrate</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ozs</span><span class="op">$</span><span class="va">vacancyrate</span><span class="op">[</span><span class="va">ozs</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"Illinois"</span> <span class="op">&amp;</span> <span class="va">ozs</span><span class="op">$</span><span class="va">Designated</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `Designated`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Think of another question you’d like to ask of these data - write it down and work the problem out.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-regular fa-copyright" aria-label="copyright"></i> Andrew J. Greenlee</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a>  Website Code on <a href="https://github.com/agreen4/UP570_S24_Website">Github <i class="fa-brands fa-github" aria-label="github"></i></a></div>
  </div>
</footer>


</body></html>
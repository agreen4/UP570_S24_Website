<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Neighborhood Analysis - Measuring Residential Segregation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Neighborhood Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../syllabus/index.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../schedule/index.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../assignments/index.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../howto/index.html" rel="" target="">
 <span class="menu-text">How To</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../resources/index.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/UP570-S24/discussion" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Discussion</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#github-lab-repository" id="toc-github-lab-repository" class="nav-link" data-scroll-target="#github-lab-repository">Github Lab Repository</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#two-useful-functions" id="toc-two-useful-functions" class="nav-link" data-scroll-target="#two-useful-functions">Two Useful Functions</a>
  <ul>
  <li><a href="#separate" id="toc-separate" class="nav-link" data-scroll-target="#separate">Separate</a></li>
  <li><a href="#tally" id="toc-tally" class="nav-link" data-scroll-target="#tally">Tally</a></li>
  </ul></li>
  <li><a href="#building-census-geographies" id="toc-building-census-geographies" class="nav-link" data-scroll-target="#building-census-geographies">Building Census Geographies</a>
  <ul>
  <li><a href="#styling-maps" id="toc-styling-maps" class="nav-link" data-scroll-target="#styling-maps">Styling Maps</a></li>
  </ul></li>
  <li><a href="#downloading-census-data" id="toc-downloading-census-data" class="nav-link" data-scroll-target="#downloading-census-data">Downloading Census Data</a>
  <ul>
  <li><a href="#get-tract-boundaries" id="toc-get-tract-boundaries" class="nav-link" data-scroll-target="#get-tract-boundaries">Get Tract Boundaries</a></li>
  <li><a href="#get-acs-data" id="toc-get-acs-data" class="nav-link" data-scroll-target="#get-acs-data">Get ACS Data</a></li>
  <li><a href="#create-county-summaries" id="toc-create-county-summaries" class="nav-link" data-scroll-target="#create-county-summaries">Create County Summaries</a></li>
  <li><a href="#setup-summary" id="toc-setup-summary" class="nav-link" data-scroll-target="#setup-summary">Setup Summary</a></li>
  </ul></li>
  <li><a href="#dissimilarity" id="toc-dissimilarity" class="nav-link" data-scroll-target="#dissimilarity">Dissimilarity</a>
  <ul>
  <li><a href="#black-white-dissimilarity" id="toc-black-white-dissimilarity" class="nav-link" data-scroll-target="#black-white-dissimilarity">Black-White Dissimilarity</a></li>
  </ul></li>
  <li><a href="#nonwhite-white-dissimilarity" id="toc-nonwhite-white-dissimilarity" class="nav-link" data-scroll-target="#nonwhite-white-dissimilarity">Nonwhite-White Dissimilarity</a></li>
  <li><a href="#latino-white-dissimilarity" id="toc-latino-white-dissimilarity" class="nav-link" data-scroll-target="#latino-white-dissimilarity">Latino-White Dissimilarity</a></li>
  <li><a href="#interaction" id="toc-interaction" class="nav-link" data-scroll-target="#interaction">Interaction</a>
  <ul>
  <li><a href="#nonwhite-white-interaction" id="toc-nonwhite-white-interaction" class="nav-link" data-scroll-target="#nonwhite-white-interaction">Nonwhite-White Interaction</a></li>
  <li><a href="#latino-white-interaction" id="toc-latino-white-interaction" class="nav-link" data-scroll-target="#latino-white-interaction">Latino-White Interaction</a></li>
  </ul></li>
  <li><a href="#isolation" id="toc-isolation" class="nav-link" data-scroll-target="#isolation">Isolation</a>
  <ul>
  <li><a href="#black-isolation" id="toc-black-isolation" class="nav-link" data-scroll-target="#black-isolation">Black Isolation</a></li>
  <li><a href="#nonwhite-isolation" id="toc-nonwhite-isolation" class="nav-link" data-scroll-target="#nonwhite-isolation">Nonwhite Isolation</a></li>
  <li><a href="#latino-isolation" id="toc-latino-isolation" class="nav-link" data-scroll-target="#latino-isolation">Latino Isolation</a></li>
  </ul></li>
  <li><a href="#income-inequality" id="toc-income-inequality" class="nav-link" data-scroll-target="#income-inequality">Income Inequality</a></li>
  <li><a href="#extending-this-analysis" id="toc-extending-this-analysis" class="nav-link" data-scroll-target="#extending-this-analysis">Extending this Analysis</a>
  <ul>
  <li><a href="#lab-evaluation" id="toc-lab-evaluation" class="nav-link" data-scroll-target="#lab-evaluation">Lab Evaluation</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Measuring Residential Segregation</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we’ll explore some of the common measures of residential segregation and apply them at the city and regional levels.</p>
<p>In our last lab, we got a basic idea of how to summarize population racial characteristics for census tracts. Now we can start to think about summary measures of the extent to which these groups are segregated within the region. We will use census tracts as a unit of analysis to help us describe county-level racial segregation.</p>
<p>Most measures of residential segregation are set up to summarize the level of heterogeneity (or homogeneity) observed between neighborhoods to a city or regional scale to produce a summary measure that then tells us how even populations are distributed at the neighborhood level.</p>
<p>There are also some measures that focus more on segregation at a neighborhood level or below. In this lab, we’ll focus on those measures that summarize characteristics to more aggregate levels such as cities or regions.</p>
</section>
<section id="goals" class="level2">
<h2 class="anchored" data-anchor-id="goals">Goals</h2>
<ul>
<li>Gain exposure to common measures of residential segregation.</li>
<li>Learn how to apply simple measures within R / RStudio.</li>
</ul>
<p>Let’s get going…</p>
</section>
<section id="github-lab-repository" class="level2">
<h2 class="anchored" data-anchor-id="github-lab-repository">Github Lab Repository</h2>
<p>Follow <a href="https://classroom.github.com/a/KR0xhhSw">this link</a> to accept the lab Github Classroom assignment repository.</p>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>Let’s start as usual by loading the packages that we’ll need for our work.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="two-useful-functions" class="level2">
<h2 class="anchored" data-anchor-id="two-useful-functions">Two Useful Functions</h2>
<section id="separate" class="level3">
<h3 class="anchored" data-anchor-id="separate">Separate</h3>
<p>Sometimes we may have a variable that we need to separate into based upon a known delimiter. <code>separate</code> allows us to do so. Let’s explore an example. Here’s a table containing information on the name and location of <a href="https://btaa.org/about">Big 10</a> schools.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Institution <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Illinois"</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Indiana University"</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Iowa"</span>, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Maryland"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Michigan"</span>, </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Michigan State University"</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Minnesota"</span>, </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Nebraska-Lincoln"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Northwestern University"</span>, </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ohio State University"</span>, </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Pennsylvania State University"</span>, </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Purdue University"</span>, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rutgers University"</span>, </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Wisconsin-Madison"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>Location <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Champaign, Champaign County, Illinois"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Bloomington, Monroe County, Indiana"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Iowa City, Johnson County, Iowa"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"College Park, Baltimore County, Maryland"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ann Arbor, Washtenaw County, Michigan"</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"East Lansing, Ingham County, Michigan"</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Minneapolis, Hennepin County, Minnesota"</span>,</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lincoln, Lancaster County, Nebraska"</span>,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Evanston, Cook County, Illinois"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Columbus, Franklin County, Ohio"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"State College, Centre County, Pennsylvania"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"West Lafayette, Tippecanoe County, Indiana"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Newark, Middlesex County, New Jersey"</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Madison, Dane County, Wisconsin"</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>big_10 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(Institution, Location)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="rtbyupeczn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rtbyupeczn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rtbyupeczn thead, #rtbyupeczn tbody, #rtbyupeczn tfoot, #rtbyupeczn tr, #rtbyupeczn td, #rtbyupeczn th {
  border-style: none;
}

#rtbyupeczn p {
  margin: 0;
  padding: 0;
}

#rtbyupeczn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rtbyupeczn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rtbyupeczn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rtbyupeczn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rtbyupeczn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtbyupeczn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtbyupeczn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtbyupeczn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rtbyupeczn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rtbyupeczn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rtbyupeczn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rtbyupeczn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rtbyupeczn .gt_spanner_row {
  border-bottom-style: hidden;
}

#rtbyupeczn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rtbyupeczn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rtbyupeczn .gt_from_md > :first-child {
  margin-top: 0;
}

#rtbyupeczn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rtbyupeczn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rtbyupeczn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rtbyupeczn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rtbyupeczn .gt_row_group_first td {
  border-top-width: 2px;
}

#rtbyupeczn .gt_row_group_first th {
  border-top-width: 2px;
}

#rtbyupeczn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtbyupeczn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rtbyupeczn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rtbyupeczn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtbyupeczn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtbyupeczn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rtbyupeczn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rtbyupeczn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rtbyupeczn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtbyupeczn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtbyupeczn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtbyupeczn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtbyupeczn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtbyupeczn .gt_left {
  text-align: left;
}

#rtbyupeczn .gt_center {
  text-align: center;
}

#rtbyupeczn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rtbyupeczn .gt_font_normal {
  font-weight: normal;
}

#rtbyupeczn .gt_font_bold {
  font-weight: bold;
}

#rtbyupeczn .gt_font_italic {
  font-style: italic;
}

#rtbyupeczn .gt_super {
  font-size: 65%;
}

#rtbyupeczn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rtbyupeczn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rtbyupeczn .gt_indent_1 {
  text-indent: 5px;
}

#rtbyupeczn .gt_indent_2 {
  text-indent: 10px;
}

#rtbyupeczn .gt_indent_3 {
  text-indent: 15px;
}

#rtbyupeczn .gt_indent_4 {
  text-indent: 20px;
}

#rtbyupeczn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Institution">Institution</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Location">Location</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Institution" class="gt_row gt_left">University of Illinois</td>
<td headers="Location" class="gt_row gt_left">Champaign, Champaign County, Illinois</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Indiana University</td>
<td headers="Location" class="gt_row gt_left">Bloomington, Monroe County, Indiana</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Iowa</td>
<td headers="Location" class="gt_row gt_left">Iowa City, Johnson County, Iowa</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Maryland</td>
<td headers="Location" class="gt_row gt_left">College Park, Baltimore County, Maryland</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Michigan</td>
<td headers="Location" class="gt_row gt_left">Ann Arbor, Washtenaw County, Michigan</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Michigan State University</td>
<td headers="Location" class="gt_row gt_left">East Lansing, Ingham County, Michigan</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Minnesota</td>
<td headers="Location" class="gt_row gt_left">Minneapolis, Hennepin County, Minnesota</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Nebraska-Lincoln</td>
<td headers="Location" class="gt_row gt_left">Lincoln, Lancaster County, Nebraska</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Northwestern University</td>
<td headers="Location" class="gt_row gt_left">Evanston, Cook County, Illinois</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Ohio State University</td>
<td headers="Location" class="gt_row gt_left">Columbus, Franklin County, Ohio</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Pennsylvania State University</td>
<td headers="Location" class="gt_row gt_left">State College, Centre County, Pennsylvania</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Purdue University</td>
<td headers="Location" class="gt_row gt_left">West Lafayette, Tippecanoe County, Indiana</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Rutgers University</td>
<td headers="Location" class="gt_row gt_left">Newark, Middlesex County, New Jersey</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Wisconsin-Madison</td>
<td headers="Location" class="gt_row gt_left">Madison, Dane County, Wisconsin</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The Location field has quite a bit of information present that we might use to learn more about the locations of Big 10 schools. Let’s use <code>separate()</code> to split the city, county, and state into their own fields.</p>
<p>To use <code>separate()</code>, we specify the name of the field we want to separate, we specify the new column names we want to assign to each of the components we’re separating, and we indicate what character is the separator (in this case a comma “,”).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="xtqffbjlvc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xtqffbjlvc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xtqffbjlvc thead, #xtqffbjlvc tbody, #xtqffbjlvc tfoot, #xtqffbjlvc tr, #xtqffbjlvc td, #xtqffbjlvc th {
  border-style: none;
}

#xtqffbjlvc p {
  margin: 0;
  padding: 0;
}

#xtqffbjlvc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xtqffbjlvc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xtqffbjlvc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xtqffbjlvc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xtqffbjlvc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xtqffbjlvc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtqffbjlvc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xtqffbjlvc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xtqffbjlvc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xtqffbjlvc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xtqffbjlvc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xtqffbjlvc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xtqffbjlvc .gt_spanner_row {
  border-bottom-style: hidden;
}

#xtqffbjlvc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xtqffbjlvc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xtqffbjlvc .gt_from_md > :first-child {
  margin-top: 0;
}

#xtqffbjlvc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xtqffbjlvc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xtqffbjlvc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xtqffbjlvc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xtqffbjlvc .gt_row_group_first td {
  border-top-width: 2px;
}

#xtqffbjlvc .gt_row_group_first th {
  border-top-width: 2px;
}

#xtqffbjlvc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtqffbjlvc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xtqffbjlvc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xtqffbjlvc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtqffbjlvc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtqffbjlvc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xtqffbjlvc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xtqffbjlvc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xtqffbjlvc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtqffbjlvc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xtqffbjlvc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtqffbjlvc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xtqffbjlvc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtqffbjlvc .gt_left {
  text-align: left;
}

#xtqffbjlvc .gt_center {
  text-align: center;
}

#xtqffbjlvc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xtqffbjlvc .gt_font_normal {
  font-weight: normal;
}

#xtqffbjlvc .gt_font_bold {
  font-weight: bold;
}

#xtqffbjlvc .gt_font_italic {
  font-style: italic;
}

#xtqffbjlvc .gt_super {
  font-size: 65%;
}

#xtqffbjlvc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xtqffbjlvc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xtqffbjlvc .gt_indent_1 {
  text-indent: 5px;
}

#xtqffbjlvc .gt_indent_2 {
  text-indent: 10px;
}

#xtqffbjlvc .gt_indent_3 {
  text-indent: 15px;
}

#xtqffbjlvc .gt_indent_4 {
  text-indent: 20px;
}

#xtqffbjlvc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Institution">Institution</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="City">City</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="County">County</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="State">State</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Institution" class="gt_row gt_left">University of Illinois</td>
<td headers="City" class="gt_row gt_left">Champaign</td>
<td headers="County" class="gt_row gt_left"> Champaign County</td>
<td headers="State" class="gt_row gt_left"> Illinois</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Indiana University</td>
<td headers="City" class="gt_row gt_left">Bloomington</td>
<td headers="County" class="gt_row gt_left"> Monroe County</td>
<td headers="State" class="gt_row gt_left"> Indiana</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Iowa</td>
<td headers="City" class="gt_row gt_left">Iowa City</td>
<td headers="County" class="gt_row gt_left"> Johnson County</td>
<td headers="State" class="gt_row gt_left"> Iowa</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Maryland</td>
<td headers="City" class="gt_row gt_left">College Park</td>
<td headers="County" class="gt_row gt_left"> Baltimore County</td>
<td headers="State" class="gt_row gt_left"> Maryland</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Michigan</td>
<td headers="City" class="gt_row gt_left">Ann Arbor</td>
<td headers="County" class="gt_row gt_left"> Washtenaw County</td>
<td headers="State" class="gt_row gt_left"> Michigan</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Michigan State University</td>
<td headers="City" class="gt_row gt_left">East Lansing</td>
<td headers="County" class="gt_row gt_left"> Ingham County</td>
<td headers="State" class="gt_row gt_left"> Michigan</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Minnesota</td>
<td headers="City" class="gt_row gt_left">Minneapolis</td>
<td headers="County" class="gt_row gt_left"> Hennepin County</td>
<td headers="State" class="gt_row gt_left"> Minnesota</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Nebraska-Lincoln</td>
<td headers="City" class="gt_row gt_left">Lincoln</td>
<td headers="County" class="gt_row gt_left"> Lancaster County</td>
<td headers="State" class="gt_row gt_left"> Nebraska</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Northwestern University</td>
<td headers="City" class="gt_row gt_left">Evanston</td>
<td headers="County" class="gt_row gt_left"> Cook County</td>
<td headers="State" class="gt_row gt_left"> Illinois</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Ohio State University</td>
<td headers="City" class="gt_row gt_left">Columbus</td>
<td headers="County" class="gt_row gt_left"> Franklin County</td>
<td headers="State" class="gt_row gt_left"> Ohio</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Pennsylvania State University</td>
<td headers="City" class="gt_row gt_left">State College</td>
<td headers="County" class="gt_row gt_left"> Centre County</td>
<td headers="State" class="gt_row gt_left"> Pennsylvania</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Purdue University</td>
<td headers="City" class="gt_row gt_left">West Lafayette</td>
<td headers="County" class="gt_row gt_left"> Tippecanoe County</td>
<td headers="State" class="gt_row gt_left"> Indiana</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">Rutgers University</td>
<td headers="City" class="gt_row gt_left">Newark</td>
<td headers="County" class="gt_row gt_left"> Middlesex County</td>
<td headers="State" class="gt_row gt_left"> New Jersey</td></tr>
    <tr><td headers="Institution" class="gt_row gt_left">University of Wisconsin-Madison</td>
<td headers="City" class="gt_row gt_left">Madison</td>
<td headers="County" class="gt_row gt_left"> Dane County</td>
<td headers="State" class="gt_row gt_left"> Wisconsin</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We get back three new fields that replace the existing location field.</p>
</section>
<section id="tally" class="level3">
<h3 class="anchored" data-anchor-id="tally">Tally</h3>
<p>We have used the combination of <code>group_by()</code> and <code>summarise()</code> on many occasions in order to aggregate characteristics of data by groups. For simple operations, there are some helper functions that we can use to simplify our aggregation of groups. <code>tally()</code> for instance is the equivalent of <code>summarise(n = n())</code> which creates a count of the observations in each group.</p>
<p>Let’s explore an example using our Big 10 data. Let’s say, for instance, that we want to count the number of Big 10 schools in each state. How would we do this using <code>group_by()</code> and <code>summarise()</code>?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Institutions =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="donrelvjdx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#donrelvjdx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#donrelvjdx thead, #donrelvjdx tbody, #donrelvjdx tfoot, #donrelvjdx tr, #donrelvjdx td, #donrelvjdx th {
  border-style: none;
}

#donrelvjdx p {
  margin: 0;
  padding: 0;
}

#donrelvjdx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#donrelvjdx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#donrelvjdx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#donrelvjdx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#donrelvjdx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#donrelvjdx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#donrelvjdx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#donrelvjdx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#donrelvjdx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#donrelvjdx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#donrelvjdx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#donrelvjdx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#donrelvjdx .gt_spanner_row {
  border-bottom-style: hidden;
}

#donrelvjdx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#donrelvjdx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#donrelvjdx .gt_from_md > :first-child {
  margin-top: 0;
}

#donrelvjdx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#donrelvjdx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#donrelvjdx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#donrelvjdx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#donrelvjdx .gt_row_group_first td {
  border-top-width: 2px;
}

#donrelvjdx .gt_row_group_first th {
  border-top-width: 2px;
}

#donrelvjdx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#donrelvjdx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#donrelvjdx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#donrelvjdx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#donrelvjdx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#donrelvjdx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#donrelvjdx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#donrelvjdx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#donrelvjdx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#donrelvjdx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#donrelvjdx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#donrelvjdx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#donrelvjdx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#donrelvjdx .gt_left {
  text-align: left;
}

#donrelvjdx .gt_center {
  text-align: center;
}

#donrelvjdx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#donrelvjdx .gt_font_normal {
  font-weight: normal;
}

#donrelvjdx .gt_font_bold {
  font-weight: bold;
}

#donrelvjdx .gt_font_italic {
  font-style: italic;
}

#donrelvjdx .gt_super {
  font-size: 65%;
}

#donrelvjdx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#donrelvjdx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#donrelvjdx .gt_indent_1 {
  text-indent: 5px;
}

#donrelvjdx .gt_indent_2 {
  text-indent: 10px;
}

#donrelvjdx .gt_indent_3 {
  text-indent: 15px;
}

#donrelvjdx .gt_indent_4 {
  text-indent: 20px;
}

#donrelvjdx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="State">State</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Institutions">Institutions</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="State" class="gt_row gt_left"> Illinois</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Indiana</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Iowa</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Maryland</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Michigan</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Minnesota</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Nebraska</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> New Jersey</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Ohio</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Pennsylvania</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Wisconsin</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>In this case, we’re taking our raw Big 10 data, separating the location into three columns, and then building a summary based upon the state field.</p>
<p>Here’s how we might do the same thing using <code>group_by()</code> and <code>tally()</code>.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="vcdjkljwbk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vcdjkljwbk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vcdjkljwbk thead, #vcdjkljwbk tbody, #vcdjkljwbk tfoot, #vcdjkljwbk tr, #vcdjkljwbk td, #vcdjkljwbk th {
  border-style: none;
}

#vcdjkljwbk p {
  margin: 0;
  padding: 0;
}

#vcdjkljwbk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vcdjkljwbk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vcdjkljwbk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vcdjkljwbk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vcdjkljwbk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vcdjkljwbk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vcdjkljwbk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vcdjkljwbk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vcdjkljwbk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vcdjkljwbk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vcdjkljwbk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vcdjkljwbk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vcdjkljwbk .gt_spanner_row {
  border-bottom-style: hidden;
}

#vcdjkljwbk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vcdjkljwbk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vcdjkljwbk .gt_from_md > :first-child {
  margin-top: 0;
}

#vcdjkljwbk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vcdjkljwbk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vcdjkljwbk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vcdjkljwbk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vcdjkljwbk .gt_row_group_first td {
  border-top-width: 2px;
}

#vcdjkljwbk .gt_row_group_first th {
  border-top-width: 2px;
}

#vcdjkljwbk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcdjkljwbk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vcdjkljwbk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vcdjkljwbk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vcdjkljwbk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcdjkljwbk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vcdjkljwbk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vcdjkljwbk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vcdjkljwbk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vcdjkljwbk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vcdjkljwbk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcdjkljwbk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vcdjkljwbk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vcdjkljwbk .gt_left {
  text-align: left;
}

#vcdjkljwbk .gt_center {
  text-align: center;
}

#vcdjkljwbk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vcdjkljwbk .gt_font_normal {
  font-weight: normal;
}

#vcdjkljwbk .gt_font_bold {
  font-weight: bold;
}

#vcdjkljwbk .gt_font_italic {
  font-style: italic;
}

#vcdjkljwbk .gt_super {
  font-size: 65%;
}

#vcdjkljwbk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vcdjkljwbk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vcdjkljwbk .gt_indent_1 {
  text-indent: 5px;
}

#vcdjkljwbk .gt_indent_2 {
  text-indent: 10px;
}

#vcdjkljwbk .gt_indent_3 {
  text-indent: 15px;
}

#vcdjkljwbk .gt_indent_4 {
  text-indent: 20px;
}

#vcdjkljwbk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="State">State</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="State" class="gt_row gt_left"> Illinois</td>
<td headers="n" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Indiana</td>
<td headers="n" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Iowa</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Maryland</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Michigan</td>
<td headers="n" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Minnesota</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Nebraska</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> New Jersey</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Ohio</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Pennsylvania</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Wisconsin</td>
<td headers="n" class="gt_row gt_right">1</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We get output that is basically the same, just with a count column labelled “n”. We can specify the name of the count column so that we have a label that’s more descriptive:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>(<span class="at">name =</span> <span class="st">"Institutions"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="bojfoboyvn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bojfoboyvn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bojfoboyvn thead, #bojfoboyvn tbody, #bojfoboyvn tfoot, #bojfoboyvn tr, #bojfoboyvn td, #bojfoboyvn th {
  border-style: none;
}

#bojfoboyvn p {
  margin: 0;
  padding: 0;
}

#bojfoboyvn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bojfoboyvn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bojfoboyvn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bojfoboyvn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bojfoboyvn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bojfoboyvn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bojfoboyvn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bojfoboyvn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bojfoboyvn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bojfoboyvn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bojfoboyvn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bojfoboyvn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bojfoboyvn .gt_spanner_row {
  border-bottom-style: hidden;
}

#bojfoboyvn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bojfoboyvn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bojfoboyvn .gt_from_md > :first-child {
  margin-top: 0;
}

#bojfoboyvn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bojfoboyvn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bojfoboyvn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bojfoboyvn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bojfoboyvn .gt_row_group_first td {
  border-top-width: 2px;
}

#bojfoboyvn .gt_row_group_first th {
  border-top-width: 2px;
}

#bojfoboyvn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bojfoboyvn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bojfoboyvn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bojfoboyvn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bojfoboyvn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bojfoboyvn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bojfoboyvn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bojfoboyvn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bojfoboyvn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bojfoboyvn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bojfoboyvn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bojfoboyvn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bojfoboyvn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bojfoboyvn .gt_left {
  text-align: left;
}

#bojfoboyvn .gt_center {
  text-align: center;
}

#bojfoboyvn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bojfoboyvn .gt_font_normal {
  font-weight: normal;
}

#bojfoboyvn .gt_font_bold {
  font-weight: bold;
}

#bojfoboyvn .gt_font_italic {
  font-style: italic;
}

#bojfoboyvn .gt_super {
  font-size: 65%;
}

#bojfoboyvn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bojfoboyvn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bojfoboyvn .gt_indent_1 {
  text-indent: 5px;
}

#bojfoboyvn .gt_indent_2 {
  text-indent: 10px;
}

#bojfoboyvn .gt_indent_3 {
  text-indent: 15px;
}

#bojfoboyvn .gt_indent_4 {
  text-indent: 20px;
}

#bojfoboyvn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="State">State</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Institutions">Institutions</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="State" class="gt_row gt_left"> Illinois</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Indiana</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Iowa</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Maryland</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Michigan</td>
<td headers="Institutions" class="gt_row gt_right">2</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Minnesota</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Nebraska</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> New Jersey</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Ohio</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Pennsylvania</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
    <tr><td headers="State" class="gt_row gt_left"> Wisconsin</td>
<td headers="Institutions" class="gt_row gt_right">1</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>
<section id="building-census-geographies" class="level2">
<h2 class="anchored" data-anchor-id="building-census-geographies">Building Census Geographies</h2>
<p>We are going to focus on analyzing population by race for New York City. We need to start by defining our geography for the city. The <code>Tigris</code> package can help us download census geometries directly from the census servers. We could also as tidycensus to download census geographies when we pull data, but let’s download geographies separately for now so that we can refine them before adding other data.</p>
<p>Let’s start by downloading census tract boundaries for New York City’s Boroughs. We will then map these directly in RStudio. Having a borough map handy provides a good reminder of the city’s geography:</p>
<p><img src="https://www.worldatlas.com/r/w960-q80/upload/c6/23/73/shutterstock-152208935.jpg" class="img-fluid"> The city consists of five boroughs, each of which is its own county (this is atypical, but it’s a New York thing).</p>
<table class="table">
<caption>New York City Boroughs</caption>
<thead>
<tr class="header">
<th>FIPS Code</th>
<th>County Name</th>
<th>Borough Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>36047</td>
<td>Kings County</td>
<td>Brooklyn</td>
</tr>
<tr class="even">
<td>36005</td>
<td>Bronx County</td>
<td>Bronx</td>
</tr>
<tr class="odd">
<td>36081</td>
<td>Queens County</td>
<td>Queens</td>
</tr>
<tr class="even">
<td>36085</td>
<td>Richmond County</td>
<td>Staten Island</td>
</tr>
<tr class="odd">
<td>36061</td>
<td>New York County</td>
<td>Manhattan</td>
</tr>
</tbody>
</table>
<p>In building a <code>tracts</code> call using tigris (to download tract geometries), we’ll need to specify at a minimum the state and the vintage of tract geometry we want to download. Let’s download 2020 tract data:</p>
<p>Let’s use <code>ggplot()</code> to visualize so that we can confirm what we’ve downloaded is indeed all tracts in the state of New York:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>That looks roughly like the state of New York. Congratulations if this is your first map visualization in RStudio!</p>
<p>We have some things to unpack here. Out tigris call downloaded all tracts for the state of New York. We have tract properties, but then a list of lists in a field called “geometry”. What’s going on here?</p>
<p>Our tract geographies were downloaded in what is known as <a href="https://r-spatial.github.io/sf/articles/sf1.html"><em>simple features</em></a> format. If you have dealt with prior formats for spatial data in R, you’ll understand that simple features really are much simpler! The list that you see here is a list of points that define the vertices, in this case, which represent each tract polygon. Embedding the geometry with data that represents the qualities of each tract is very useful.</p>
<p>We could query down to the counties that define New York City with the information we have in hand:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COUNTYFP <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"047"</span>, <span class="st">"005"</span>, <span class="st">"081"</span>, <span class="st">"085"</span>, <span class="st">"061"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And again, let’s visualize to confirm:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, a lot going on here, but we definitely have a subgeography from the New York State data.</p>
<p>While downloading tracts for the whole state and then querying out NYC counties is ok, tigris, can accept counties as inputs to its API call:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> <span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>), <span class="at">year =</span> <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Here we are just specifying counties by name - tigris looks them up and confirms which counties it has downloaded.</p>
<p>Before we get into modifying this geography, let’s transform it to an appropriate projection. The sf (simple features) package can handle this for us with <code>st_transform()</code></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">26918</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The string of numbers here refers to the particular transformation we’re doing - in this case to <a href="https://epsg.io/26918">NAD 1983</a>, a common coordinate reference system for the United States.</p>
<p>Our NYC tracts look a little messy - they don’t really look like the shape of New York City. Let’s think about what role water might be playing here. In the tract data, there are fields called ALAND and AWATER which correspond to the tract area that is land and water (respectively). Let’s take a look to see if there are any tracts that are all water:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">==</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3 features and 12 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 562802.4 ymin: 4480943 xmax: 605316.4 ymax: 4495548
Projected CRS: NAD83 / UTM zone 18N
  STATEFP COUNTYFP TRACTCE       GEOID NAME          NAMELSAD MTFCC FUNCSTAT
1      36      081  990100 36081990100 9901 Census Tract 9901 G5020        S
2      36      047  990100 36047990100 9901 Census Tract 9901 G5020        S
3      36      085  990100 36085990100 9901 Census Tract 9901 G5020        S
  ALAND    AWATER    INTPTLAT     INTPTLON                       geometry
1     0 130800077 +40.5380517 -073.8942020 MULTIPOLYGON (((581457.1 44...
2     0  17793788 +40.5649788 -074.0148235 MULTIPOLYGON (((580899.6 44...
3     0  81772671 +40.5249107 -074.1091816 MULTIPOLYGON (((562808.8 44...</code></pre>
</div>
</div>
<p>It turns out we have three tracts with no land area and that are all water. Let’s remove them and see what our data looks like:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A little better - we dropped a few tracts and can start to see more of the shape of the city. Let’s continue to diagnose what’s going on here by coloring each borough so we can see boundaries:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We add an aesthetic mapping to our <code>ggplot()</code> call that assigns a unique color to each county. Referring back to our borough image of New York City, it looks like tracts are continuous with some portions covering parts of water bodies.</p>
<p>Can we do any better? You know the answer is yes! tigris can use census hydrography to clip the portions of tracts that are water:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">erase_water</span>(<span class="at">area_threshold =</span> .<span class="dv">9</span>, <span class="at">year =</span> <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Fetching area water data for your dataset's location...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Erasing water area...
If this is slow, try a larger area threshold value.</code></pre>
</div>
</div>
<p>You will need to play with the threshold value to get something that looks good. In this case, we’re using a threshold of .9 which means that we are only removing the water areas that represent the largest 10 percent of all water geometries in the map.</p>
<p>Let’s once again visualize to see what we have here:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We have a bit more definition now.</p>
<p>Before we move on to adding census data to these tracts, let’s use them to create a new geometry - county boundaries. Yes, we could download them using tigris, but we actually have all the data we need in our tract files.</p>
<p>One very cool think about the implementation of simple features in R is that tidyverse commands like <code>group_by()</code> and <code>summarise()</code> work on them. What if we group tracts by their county identifier and summarise?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>nyc_co <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(COUNTYFP) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tracts =</span> <span class="fu">n</span>())</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We have now created a custom set of county boundaries for New York City.</p>
<section id="styling-maps" class="level3">
<h3 class="anchored" data-anchor-id="styling-maps">Styling Maps</h3>
<p>I am a big proponent of making many bad maps so that you can progressively refine your visualization to something effective. Let’s think about some key controls for styling our maps.</p>
<p>First, let’s start with our base tract data:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s use a theme to remove some of the shading:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If you don’t want the graticules and latitude / longitude markings, you can either use a theme to remove them:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or you can manually remove them this way:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s add counties as an overlay:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Hmm - where’s our tracts? We can see our counties, but tracts are underneath! Let’s remove the fill from the counties file so we can see the tracts underneath:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we can see the tracts, but what about our counties? Let’s use color to differentiate?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ok - now we can see the counties. Why don’t we try to make the line weight heavier on the county outlines to create more hierarchy here.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A little thicker. Why don’t we also decrease the line weight of the tracts to help differentiate more?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt, <span class="at">cex =</span> .<span class="dv">1</span>) <span class="sc">+</span> <span class="co"># Decrease the line weight to differentiate</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> .<span class="dv">7</span>)<span class="sc">+</span> <span class="co"># Increase the line weight to differentiate</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>That’s starting to look better. Maybe now we can try again but using only gray lines:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt, <span class="at">cex =</span> .<span class="dv">1</span>, <span class="at">color =</span> <span class="st">"gray70"</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span> <span class="co"># Decrease the line weight to differentiate</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">cex =</span> .<span class="dv">6</span>)<span class="sc">+</span> <span class="co"># Increase the line weight to differentiate</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s consider this “styled’ enough for now…</p>
</section>
</section>
<section id="downloading-census-data" class="level2">
<h2 class="anchored" data-anchor-id="downloading-census-data">Downloading Census Data</h2>
<p>For the purposes of our example, we’ll examine racial segregation in New York City. Let’s start by downloading and preparing data on race for New York City.</p>
<section id="get-tract-boundaries" class="level3">
<h3 class="anchored" data-anchor-id="get-tract-boundaries">Get Tract Boundaries</h3>
<p>Let’s download 2020 census tract boundaries for New York City’s five Boroughs. While we’re at it, we’ll clean them up a little bit.</p>
<table class="table">
<caption>New York City Boroughs</caption>
<thead>
<tr class="header">
<th>FIPS Code</th>
<th>County Name</th>
<th>Borough Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>36047</td>
<td>Kings County</td>
<td>Brooklyn</td>
</tr>
<tr class="even">
<td>36005</td>
<td>Bronx County</td>
<td>Bronx</td>
</tr>
<tr class="odd">
<td>36081</td>
<td>Queens County</td>
<td>Queens</td>
</tr>
<tr class="even">
<td>36085</td>
<td>Richmond County</td>
<td>Staten Island</td>
</tr>
<tr class="odd">
<td>36061</td>
<td>New York County</td>
<td>Manhattan</td>
</tr>
</tbody>
</table>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> <span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"005"</span>, <span class="st">"047"</span>, <span class="st">"061"</span>, <span class="st">"081"</span>, <span class="st">"085"</span>), <span class="at">year =</span> <span class="dv">2020</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">26918</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">erase_water</span>(<span class="at">area_threshold =</span> .<span class="dv">9</span>, <span class="at">year =</span> <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The code above is accomplishing the following things:</p>
<ol type="1">
<li>Download tract-level census geometries as a simple features object for Kings, Bronx, Queens, Richmond, and New York Counties for the year 2020.</li>
<li>Transform these geometries to the NAD 1983 coordinate reference system.</li>
<li>Remove those defined tract boundaries with no land area.</li>
<li>Erase the portion of tract boundaries that are water, focusing on the top 10 percent of largest defined water polygons, and using hydrography defined by the census in 2020.</li>
</ol>
<p>Let’s use <code>ggplot()</code> to visualize so that we can confirm what we’ve downloaded is indeed New York City’s boroughs:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="get-acs-data" class="level3">
<h3 class="anchored" data-anchor-id="get-acs-data">Get ACS Data</h3>
<p>Next, we’ll download ACS data on race for New York City. We’ll focus on 2020 data from the 5-year ACS from Table <a href="https://data.census.gov/table?q=B03002">B03002</a>.</p>
<p>To keep things organized, let’s define the variables we want to download. Note that we’re defining variable names as well as values. To facilitate some of our later operations, let’s download these data in <em>wide</em> format rather than <em>tidy</em> format. In wide format, we’ll have one observation (row) for each census tract, with multiple columns containing estimates for each population subgroup and the total population.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">White =</span> <span class="st">"B03002_003"</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Black =</span> <span class="st">"B03002_004"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Native =</span> <span class="st">"B03002_005"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Asian =</span> <span class="st">"B03002_006"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">HIPI =</span> <span class="st">"B03002_007"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Hispanic =</span> <span class="st">"B03002_012"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Poptot =</span> <span class="st">"B03002_001"</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Our tidycensus download call:</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="frwwymhlte" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#frwwymhlte table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#frwwymhlte thead, #frwwymhlte tbody, #frwwymhlte tfoot, #frwwymhlte tr, #frwwymhlte td, #frwwymhlte th {
  border-style: none;
}

#frwwymhlte p {
  margin: 0;
  padding: 0;
}

#frwwymhlte .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#frwwymhlte .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#frwwymhlte .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#frwwymhlte .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#frwwymhlte .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#frwwymhlte .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frwwymhlte .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#frwwymhlte .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#frwwymhlte .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#frwwymhlte .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#frwwymhlte .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#frwwymhlte .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#frwwymhlte .gt_spanner_row {
  border-bottom-style: hidden;
}

#frwwymhlte .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#frwwymhlte .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#frwwymhlte .gt_from_md > :first-child {
  margin-top: 0;
}

#frwwymhlte .gt_from_md > :last-child {
  margin-bottom: 0;
}

#frwwymhlte .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#frwwymhlte .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#frwwymhlte .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#frwwymhlte .gt_row_group_first td {
  border-top-width: 2px;
}

#frwwymhlte .gt_row_group_first th {
  border-top-width: 2px;
}

#frwwymhlte .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#frwwymhlte .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#frwwymhlte .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#frwwymhlte .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frwwymhlte .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#frwwymhlte .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#frwwymhlte .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#frwwymhlte .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#frwwymhlte .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#frwwymhlte .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#frwwymhlte .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#frwwymhlte .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#frwwymhlte .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#frwwymhlte .gt_left {
  text-align: left;
}

#frwwymhlte .gt_center {
  text-align: center;
}

#frwwymhlte .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#frwwymhlte .gt_font_normal {
  font-weight: normal;
}

#frwwymhlte .gt_font_bold {
  font-weight: bold;
}

#frwwymhlte .gt_font_italic {
  font-style: italic;
}

#frwwymhlte .gt_super {
  font-size: 65%;
}

#frwwymhlte .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#frwwymhlte .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#frwwymhlte .gt_indent_1 {
  text-indent: 5px;
}

#frwwymhlte .gt_indent_2 {
  text-indent: 10px;
}

#frwwymhlte .gt_indent_3 {
  text-indent: 15px;
}

#frwwymhlte .gt_indent_4 {
  text-indent: 20px;
}

#frwwymhlte .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="GEOID">GEOID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="NAME">NAME</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="WhiteE">WhiteE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="WhiteM">WhiteM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="BlackE">BlackE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="BlackM">BlackM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="NativeE">NativeE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="NativeM">NativeM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AsianE">AsianE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AsianM">AsianM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="HIPIE">HIPIE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="HIPIM">HIPIM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="HispanicE">HispanicE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="HispanicM">HispanicM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="PoptotE">PoptotE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="PoptotM">PoptotM</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="GEOID" class="gt_row gt_right">36047009202</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 92.02, Kings County, New York</td>
<td headers="WhiteE" class="gt_row gt_right">328</td>
<td headers="WhiteM" class="gt_row gt_right">96</td>
<td headers="BlackE" class="gt_row gt_right">162</td>
<td headers="BlackM" class="gt_row gt_right">129</td>
<td headers="NativeE" class="gt_row gt_right">0</td>
<td headers="NativeM" class="gt_row gt_right">12</td>
<td headers="AsianE" class="gt_row gt_right">1037</td>
<td headers="AsianM" class="gt_row gt_right">293</td>
<td headers="HIPIE" class="gt_row gt_right">0</td>
<td headers="HIPIM" class="gt_row gt_right">12</td>
<td headers="HispanicE" class="gt_row gt_right">1904</td>
<td headers="HispanicM" class="gt_row gt_right">630</td>
<td headers="PoptotE" class="gt_row gt_right">3453</td>
<td headers="PoptotM" class="gt_row gt_right">653</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009401</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 94.01, Kings County, New York</td>
<td headers="WhiteE" class="gt_row gt_right">132</td>
<td headers="WhiteM" class="gt_row gt_right">72</td>
<td headers="BlackE" class="gt_row gt_right">173</td>
<td headers="BlackM" class="gt_row gt_right">245</td>
<td headers="NativeE" class="gt_row gt_right">0</td>
<td headers="NativeM" class="gt_row gt_right">12</td>
<td headers="AsianE" class="gt_row gt_right">1582</td>
<td headers="AsianM" class="gt_row gt_right">389</td>
<td headers="HIPIE" class="gt_row gt_right">0</td>
<td headers="HIPIM" class="gt_row gt_right">12</td>
<td headers="HispanicE" class="gt_row gt_right">406</td>
<td headers="HispanicM" class="gt_row gt_right">283</td>
<td headers="PoptotE" class="gt_row gt_right">2293</td>
<td headers="PoptotM" class="gt_row gt_right">380</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009402</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 94.02, Kings County, New York</td>
<td headers="WhiteE" class="gt_row gt_right">377</td>
<td headers="WhiteM" class="gt_row gt_right">198</td>
<td headers="BlackE" class="gt_row gt_right">38</td>
<td headers="BlackM" class="gt_row gt_right">57</td>
<td headers="NativeE" class="gt_row gt_right">0</td>
<td headers="NativeM" class="gt_row gt_right">12</td>
<td headers="AsianE" class="gt_row gt_right">1903</td>
<td headers="AsianM" class="gt_row gt_right">586</td>
<td headers="HIPIE" class="gt_row gt_right">0</td>
<td headers="HIPIM" class="gt_row gt_right">12</td>
<td headers="HispanicE" class="gt_row gt_right">271</td>
<td headers="HispanicM" class="gt_row gt_right">213</td>
<td headers="PoptotE" class="gt_row gt_right">2746</td>
<td headers="PoptotM" class="gt_row gt_right">553</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009600</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 96, Kings County, New York</td>
<td headers="WhiteE" class="gt_row gt_right">1035</td>
<td headers="WhiteM" class="gt_row gt_right">313</td>
<td headers="BlackE" class="gt_row gt_right">78</td>
<td headers="BlackM" class="gt_row gt_right">60</td>
<td headers="NativeE" class="gt_row gt_right">0</td>
<td headers="NativeM" class="gt_row gt_right">17</td>
<td headers="AsianE" class="gt_row gt_right">1993</td>
<td headers="AsianM" class="gt_row gt_right">519</td>
<td headers="HIPIE" class="gt_row gt_right">0</td>
<td headers="HIPIM" class="gt_row gt_right">17</td>
<td headers="HispanicE" class="gt_row gt_right">2629</td>
<td headers="HispanicM" class="gt_row gt_right">629</td>
<td headers="PoptotE" class="gt_row gt_right">5858</td>
<td headers="PoptotM" class="gt_row gt_right">710</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009800</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 98, Kings County, New York</td>
<td headers="WhiteE" class="gt_row gt_right">218</td>
<td headers="WhiteM" class="gt_row gt_right">83</td>
<td headers="BlackE" class="gt_row gt_right">162</td>
<td headers="BlackM" class="gt_row gt_right">160</td>
<td headers="NativeE" class="gt_row gt_right">0</td>
<td headers="NativeM" class="gt_row gt_right">17</td>
<td headers="AsianE" class="gt_row gt_right">2306</td>
<td headers="AsianM" class="gt_row gt_right">504</td>
<td headers="HIPIE" class="gt_row gt_right">0</td>
<td headers="HIPIM" class="gt_row gt_right">17</td>
<td headers="HispanicE" class="gt_row gt_right">3275</td>
<td headers="HispanicM" class="gt_row gt_right">740</td>
<td headers="PoptotE" class="gt_row gt_right">6021</td>
<td headers="PoptotM" class="gt_row gt_right">798</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Note that this code defines the list of specific variables to download (rather than a whole table), asks tidycensus to download the data, and labels each column with the label we have defined (with E and M denoting estimates and margins of error because this is sample-based data).</p>
<p>While we’re at it, let’s separate our tract name label into separate tract, county, and state values.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="ot">&lt;-</span> nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(NAME, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Tract"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">", "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Note the use of <code>sep = ", "</code> includes the space after the comma so we don’t have an extra space in our resulting county and state variables.</p>
</section>
<section id="create-county-summaries" class="level3">
<h3 class="anchored" data-anchor-id="create-county-summaries">Create County Summaries</h3>
<p>Before we further manipulate our data, let’s aggregate the data we have to form county population summaries. Because our tract data is hierarchical, we can sum up our population estimates from tracts to counties to produce county population totals. While we’re at it, we’ll also use the county FIPS codes to create a Borough identifier (we could also add county labels back as well).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>nyc_race_co <span class="ot">&lt;-</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>, <span class="dv">5</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteE =</span> <span class="fu">sum</span>(WhiteE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteM =</span> <span class="fu">moe_sum</span>(WhiteM, WhiteE),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackE =</span> <span class="fu">sum</span>(BlackE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackM =</span> <span class="fu">moe_sum</span>(BlackM, BlackE),</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_NativeE =</span> <span class="fu">sum</span>(NativeE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_NativeM =</span> <span class="fu">moe_sum</span>(NativeM, NativeE),</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianE =</span> <span class="fu">sum</span>(AsianE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianM =</span> <span class="fu">moe_sum</span>(AsianM, AsianE),</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HIPIE =</span> <span class="fu">sum</span>(HIPIE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HIPIM =</span> <span class="fu">moe_sum</span>(HIPIM, HIPIE),</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicE =</span> <span class="fu">sum</span>(HispanicE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicM =</span> <span class="fu">moe_sum</span>(HispanicM, HispanicE),</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotE =</span> <span class="fu">sum</span>(PoptotE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotM =</span> <span class="fu">moe_sum</span>(PoptotM, PoptotE),</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Borough =</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">case_when</span>(</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36005"</span> <span class="sc">~</span> <span class="st">"Bronx"</span>,</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36047"</span> <span class="sc">~</span> <span class="st">"Brooklyn"</span>,</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36061"</span> <span class="sc">~</span> <span class="st">"Manhattan"</span>,</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36081"</span> <span class="sc">~</span> <span class="st">"Queens"</span>,</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36085"</span> <span class="sc">~</span> <span class="st">"Staten Island"</span>)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s walk through this:</p>
<ol type="1">
<li>We are going to use <code>group_by()</code> to aggregate our tract-level data to counties. In this case, we are pulling out the first five digits from the combined state-county-tract FIPS code (<code>substr(GEOID, 0, 5)</code>) using the <code>substr()</code> command from the stringr package. This allows us to create a combined state and county FIPS code (the state is the first two digits - 36 in the case of New York - and the county is the next three digits).</li>
<li>We use <code>summarise()</code> to create summary values for counties. We use <code>sum()</code> on our population estimates to sum up populations for tracts into county totals. We use <code>moe_sum()</code> from the <code>tidycensus()</code> package to properly aggregate margins of error accounting for the size of the population estimate being aggregated. The census provides <a href="https://www2.census.gov/programs-surveys/acs/tech_docs/accuracy/MultiyearACSAccuracyofData2015.pdf">documentation</a> on what’s implemented in tidycensus. We denote that these are county estimates by including <code>co_</code> as a prefix - you’ll see why later.</li>
<li>We use <code>case_when()</code> construct borough labels from our combined state and county FIPS codes.</li>
</ol>
<p>As a result, we have a table containing county populations and margins of error for the boroughs of New York City:</p>
<div class="cell">
<div class="cell-output-display">

<div id="gobmktjsdv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gobmktjsdv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gobmktjsdv thead, #gobmktjsdv tbody, #gobmktjsdv tfoot, #gobmktjsdv tr, #gobmktjsdv td, #gobmktjsdv th {
  border-style: none;
}

#gobmktjsdv p {
  margin: 0;
  padding: 0;
}

#gobmktjsdv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gobmktjsdv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gobmktjsdv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gobmktjsdv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gobmktjsdv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gobmktjsdv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gobmktjsdv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gobmktjsdv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gobmktjsdv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gobmktjsdv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gobmktjsdv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gobmktjsdv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gobmktjsdv .gt_spanner_row {
  border-bottom-style: hidden;
}

#gobmktjsdv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gobmktjsdv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gobmktjsdv .gt_from_md > :first-child {
  margin-top: 0;
}

#gobmktjsdv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gobmktjsdv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gobmktjsdv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gobmktjsdv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gobmktjsdv .gt_row_group_first td {
  border-top-width: 2px;
}

#gobmktjsdv .gt_row_group_first th {
  border-top-width: 2px;
}

#gobmktjsdv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gobmktjsdv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gobmktjsdv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gobmktjsdv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gobmktjsdv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gobmktjsdv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gobmktjsdv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gobmktjsdv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gobmktjsdv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gobmktjsdv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gobmktjsdv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gobmktjsdv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gobmktjsdv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gobmktjsdv .gt_left {
  text-align: left;
}

#gobmktjsdv .gt_center {
  text-align: center;
}

#gobmktjsdv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gobmktjsdv .gt_font_normal {
  font-weight: normal;
}

#gobmktjsdv .gt_font_bold {
  font-weight: bold;
}

#gobmktjsdv .gt_font_italic {
  font-style: italic;
}

#gobmktjsdv .gt_super {
  font-size: 65%;
}

#gobmktjsdv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gobmktjsdv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gobmktjsdv .gt_indent_1 {
  text-indent: 5px;
}

#gobmktjsdv .gt_indent_2 {
  text-indent: 10px;
}

#gobmktjsdv .gt_indent_3 {
  text-indent: 15px;
}

#gobmktjsdv .gt_indent_4 {
  text-indent: 20px;
}

#gobmktjsdv .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="STCO">STCO</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_WhiteE">co_WhiteE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_WhiteM">co_WhiteM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_BlackE">co_BlackE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_BlackM">co_BlackM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_NativeE">co_NativeE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_NativeM">co_NativeM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_AsianE">co_AsianE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_AsianM">co_AsianM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_HIPIE">co_HIPIE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_HIPIM">co_HIPIM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_HispanicE">co_HispanicE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_HispanicM">co_HispanicM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_PoptotE">co_PoptotE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_PoptotM">co_PoptotM</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="STCO" class="gt_row gt_right">36005</td>
<td headers="co_WhiteE" class="gt_row gt_right">128,717</td>
<td headers="co_WhiteM" class="gt_row gt_right">3,742</td>
<td headers="co_BlackE" class="gt_row gt_right">411,293</td>
<td headers="co_BlackM" class="gt_row gt_right">8,800</td>
<td headers="co_NativeE" class="gt_row gt_right">2,882</td>
<td headers="co_NativeM" class="gt_row gt_right">727</td>
<td headers="co_AsianE" class="gt_row gt_right">53,498</td>
<td headers="co_AsianM" class="gt_row gt_right">3,097</td>
<td headers="co_HIPIE" class="gt_row gt_right">374</td>
<td headers="co_HIPIM" class="gt_row gt_right">198</td>
<td headers="co_HispanicE" class="gt_row gt_right">799,765</td>
<td headers="co_HispanicM" class="gt_row gt_right">12,002</td>
<td headers="co_PoptotE" class="gt_row gt_right">1,427,056</td>
<td headers="co_PoptotM" class="gt_row gt_right">14,216</td>
<td headers="Borough" class="gt_row gt_left">Bronx</td></tr>
    <tr><td headers="STCO" class="gt_row gt_right">36047</td>
<td headers="co_WhiteE" class="gt_row gt_right">938,573</td>
<td headers="co_WhiteM" class="gt_row gt_right">10,493</td>
<td headers="co_BlackE" class="gt_row gt_right">754,576</td>
<td headers="co_BlackM" class="gt_row gt_right">10,307</td>
<td headers="co_NativeE" class="gt_row gt_right">3,053</td>
<td headers="co_NativeM" class="gt_row gt_right">638</td>
<td headers="co_AsianE" class="gt_row gt_right">304,420</td>
<td headers="co_AsianM" class="gt_row gt_right">6,367</td>
<td headers="co_HIPIE" class="gt_row gt_right">1,009</td>
<td headers="co_HIPIM" class="gt_row gt_right">480</td>
<td headers="co_HispanicE" class="gt_row gt_right">486,272</td>
<td headers="co_HispanicM" class="gt_row gt_right">9,181</td>
<td headers="co_PoptotE" class="gt_row gt_right">2,576,771</td>
<td headers="co_PoptotM" class="gt_row gt_right">17,237</td>
<td headers="Borough" class="gt_row gt_left">Brooklyn</td></tr>
    <tr><td headers="STCO" class="gt_row gt_right">36061</td>
<td headers="co_WhiteE" class="gt_row gt_right">763,202</td>
<td headers="co_WhiteM" class="gt_row gt_right">11,503</td>
<td headers="co_BlackE" class="gt_row gt_right">199,377</td>
<td headers="co_BlackM" class="gt_row gt_right">6,238</td>
<td headers="co_NativeE" class="gt_row gt_right">1,960</td>
<td headers="co_NativeM" class="gt_row gt_right">581</td>
<td headers="co_AsianE" class="gt_row gt_right">196,097</td>
<td headers="co_AsianM" class="gt_row gt_right">6,049</td>
<td headers="co_HIPIE" class="gt_row gt_right">430</td>
<td headers="co_HIPIM" class="gt_row gt_right">237</td>
<td headers="co_HispanicE" class="gt_row gt_right">418,442</td>
<td headers="co_HispanicM" class="gt_row gt_right">9,769</td>
<td headers="co_PoptotE" class="gt_row gt_right">1,629,153</td>
<td headers="co_PoptotM" class="gt_row gt_right">16,500</td>
<td headers="Borough" class="gt_row gt_left">Manhattan</td></tr>
    <tr><td headers="STCO" class="gt_row gt_right">36081</td>
<td headers="co_WhiteE" class="gt_row gt_right">559,778</td>
<td headers="co_WhiteM" class="gt_row gt_right">8,090</td>
<td headers="co_BlackE" class="gt_row gt_right">385,868</td>
<td headers="co_BlackM" class="gt_row gt_right">7,374</td>
<td headers="co_NativeE" class="gt_row gt_right">5,561</td>
<td headers="co_NativeM" class="gt_row gt_right">948</td>
<td headers="co_AsianE" class="gt_row gt_right">584,214</td>
<td headers="co_AsianM" class="gt_row gt_right">9,369</td>
<td headers="co_HIPIE" class="gt_row gt_right">832</td>
<td headers="co_HIPIM" class="gt_row gt_right">271</td>
<td headers="co_HispanicE" class="gt_row gt_right">631,657</td>
<td headers="co_HispanicM" class="gt_row gt_right">10,976</td>
<td headers="co_PoptotE" class="gt_row gt_right">2,270,976</td>
<td headers="co_PoptotM" class="gt_row gt_right">16,687</td>
<td headers="Borough" class="gt_row gt_left">Queens</td></tr>
    <tr><td headers="STCO" class="gt_row gt_right">36085</td>
<td headers="co_WhiteE" class="gt_row gt_right">286,462</td>
<td headers="co_WhiteM" class="gt_row gt_right">6,247</td>
<td headers="co_BlackE" class="gt_row gt_right">43,941</td>
<td headers="co_BlackM" class="gt_row gt_right">2,970</td>
<td headers="co_NativeE" class="gt_row gt_right">515</td>
<td headers="co_NativeM" class="gt_row gt_right">243</td>
<td headers="co_AsianE" class="gt_row gt_right">47,194</td>
<td headers="co_AsianM" class="gt_row gt_right">2,905</td>
<td headers="co_HIPIE" class="gt_row gt_right">55</td>
<td headers="co_HIPIM" class="gt_row gt_right">127</td>
<td headers="co_HispanicE" class="gt_row gt_right">87,733</td>
<td headers="co_HispanicM" class="gt_row gt_right">4,193</td>
<td headers="co_PoptotE" class="gt_row gt_right">475,596</td>
<td headers="co_PoptotM" class="gt_row gt_right">7,858</td>
<td headers="Borough" class="gt_row gt_left">Staten Island</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Let’s create a more polished table showing the population by race for each NYC Borough:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>nyc_race_co <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">other =</span> co_NativeE<span class="sc">+</span>co_HIPIE) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Borough, co_WhiteE, co_BlackE, co_AsianE, co_HispanicE, other, co_PoptotE) <span class="sc">|&gt;</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteE =</span> <span class="st">"White"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackE =</span> <span class="st">"Black"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianE =</span> <span class="st">"Asian"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicE =</span> <span class="st">"Hispanic"</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">other =</span> <span class="st">"Other"</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotE =</span> <span class="st">"Total"</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="tjasepavfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tjasepavfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tjasepavfi thead, #tjasepavfi tbody, #tjasepavfi tfoot, #tjasepavfi tr, #tjasepavfi td, #tjasepavfi th {
  border-style: none;
}

#tjasepavfi p {
  margin: 0;
  padding: 0;
}

#tjasepavfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tjasepavfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tjasepavfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tjasepavfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tjasepavfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tjasepavfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tjasepavfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tjasepavfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tjasepavfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tjasepavfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tjasepavfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tjasepavfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tjasepavfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#tjasepavfi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tjasepavfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tjasepavfi .gt_from_md > :first-child {
  margin-top: 0;
}

#tjasepavfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tjasepavfi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tjasepavfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tjasepavfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tjasepavfi .gt_row_group_first td {
  border-top-width: 2px;
}

#tjasepavfi .gt_row_group_first th {
  border-top-width: 2px;
}

#tjasepavfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjasepavfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tjasepavfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tjasepavfi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tjasepavfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjasepavfi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tjasepavfi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tjasepavfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tjasepavfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tjasepavfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tjasepavfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjasepavfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tjasepavfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tjasepavfi .gt_left {
  text-align: left;
}

#tjasepavfi .gt_center {
  text-align: center;
}

#tjasepavfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tjasepavfi .gt_font_normal {
  font-weight: normal;
}

#tjasepavfi .gt_font_bold {
  font-weight: bold;
}

#tjasepavfi .gt_font_italic {
  font-style: italic;
}

#tjasepavfi .gt_super {
  font-size: 65%;
}

#tjasepavfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tjasepavfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tjasepavfi .gt_indent_1 {
  text-indent: 5px;
}

#tjasepavfi .gt_indent_2 {
  text-indent: 10px;
}

#tjasepavfi .gt_indent_3 {
  text-indent: 15px;
}

#tjasepavfi .gt_indent_4 {
  text-indent: 20px;
}

#tjasepavfi .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="White">White</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Black">Black</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Asian">Asian</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Hispanic">Hispanic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Other">Other</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Total">Total</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="co_WhiteE" class="gt_row gt_right">128,717</td>
<td headers="co_BlackE" class="gt_row gt_right">411,293</td>
<td headers="co_AsianE" class="gt_row gt_right">53,498</td>
<td headers="co_HispanicE" class="gt_row gt_right">799,765</td>
<td headers="other" class="gt_row gt_right">3,256</td>
<td headers="co_PoptotE" class="gt_row gt_right">1,427,056</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="co_WhiteE" class="gt_row gt_right">938,573</td>
<td headers="co_BlackE" class="gt_row gt_right">754,576</td>
<td headers="co_AsianE" class="gt_row gt_right">304,420</td>
<td headers="co_HispanicE" class="gt_row gt_right">486,272</td>
<td headers="other" class="gt_row gt_right">4,062</td>
<td headers="co_PoptotE" class="gt_row gt_right">2,576,771</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="co_WhiteE" class="gt_row gt_right">763,202</td>
<td headers="co_BlackE" class="gt_row gt_right">199,377</td>
<td headers="co_AsianE" class="gt_row gt_right">196,097</td>
<td headers="co_HispanicE" class="gt_row gt_right">418,442</td>
<td headers="other" class="gt_row gt_right">2,390</td>
<td headers="co_PoptotE" class="gt_row gt_right">1,629,153</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="co_WhiteE" class="gt_row gt_right">559,778</td>
<td headers="co_BlackE" class="gt_row gt_right">385,868</td>
<td headers="co_AsianE" class="gt_row gt_right">584,214</td>
<td headers="co_HispanicE" class="gt_row gt_right">631,657</td>
<td headers="other" class="gt_row gt_right">6,393</td>
<td headers="co_PoptotE" class="gt_row gt_right">2,270,976</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="co_WhiteE" class="gt_row gt_right">286,462</td>
<td headers="co_BlackE" class="gt_row gt_right">43,941</td>
<td headers="co_AsianE" class="gt_row gt_right">47,194</td>
<td headers="co_HispanicE" class="gt_row gt_right">87,733</td>
<td headers="other" class="gt_row gt_right">570</td>
<td headers="co_PoptotE" class="gt_row gt_right">475,596</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Note the strategic use of an “Other” category which combines the Native American and Hawaiian Island and Pacific Islander categories.</p>
</section>
<section id="setup-summary" class="level3">
<h3 class="anchored" data-anchor-id="setup-summary">Setup Summary</h3>
<p>We now have three resources available to us:</p>
<ol type="1">
<li>nyc_race: ACS data on race for all tracts in New York City.</li>
<li>nyc_race_co: ACS data on race for all counties in New York City.</li>
<li>nyc_trt: Tract geometry data for all tracts in New York City.</li>
</ol>
<p>These three pieces of information can form the basis for manipulation and analysis of dimensions of racial segregation in New York City.</p>
<p>Let’s now turn towards the measures of segregation.</p>
</section>
</section>
<section id="dissimilarity" class="level2">
<h2 class="anchored" data-anchor-id="dissimilarity">Dissimilarity</h2>
<p><em>Dissimilarity</em> is a common measure of <em>evenness</em> between two populations - dissimilarity measures the distribution of a minority population within a majority population. Conceptually, dissimilarity measures the proportion of that minority or subgroup population that would need to move in order to be equally distributed with the majority population. A dissimilarity score of 0 would mean a completely even distribution of a minority population amongst a majority population (no segregation). A dissimilarity score of 100 would mean a completely segregated minority population (100 percent of the minority population would need to move to achieve an even distribution amongst the population. Dissimilarity is calculated as follows:</p>
<p><span class="math inline">\(D = .5*\sum_i |\frac{b_i}{B}-\frac{w_i}{W}|\)</span></p>
<p>where <span class="math inline">\(b_i\)</span> is the number of blacks in tract <em>i</em></p>
<p><span class="math inline">\(B\)</span> is the number of blacks for the county</p>
<p><span class="math inline">\(w_i\)</span> is the number of whites in tract <em>i</em></p>
<p><span class="math inline">\(W\)</span> is the number of whites for the county</p>
<p>Now that we know the formula, we can start thinking about how to implement this in R with dplyr.</p>
<section id="black-white-dissimilarity" class="level3">
<h3 class="anchored" data-anchor-id="black-white-dissimilarity">Black-White Dissimilarity</h3>
<p>This looks complicated, but we can actually do this fairly simply with dplyr notation. Let’s start off by calculating Black-White dissimilarity.</p>
<p>We have our white and black tract population data already in our il_trt data, and we have our county data in a separate object. Let’s go ahead and join that county data to our tract data.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>nyc_race<span class="ot">&lt;-</span><span class="fu">left_join</span>(nyc_race <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>,<span class="dv">5</span>)), nyc_race_co, <span class="at">by=</span> <span class="st">"STCO"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Notice that this join looks pretty standard with the exception of <code>nyc_race |&gt; mutate(STCO = substr(GEOID, 0,5))</code>. When we created our county-level summaries of the tract-level data, we created a new variable called STCO which is the combined city and county FIPS codes. In order to join those data to our tract data, we need to temporarily create the same code from our GEOID field in the tract data. The mutate statement temporarily creates the STCO column in the nyc_race data, and the join can be performed denoting the common column, STCO.</p>
<p>Now that we’ve joined these together, we can start breaking down the dissimilarity formula into code-able pieces. Inside the absolute value we are calculating fractions of tract minority and majority populations compared to their county. We then subtract these from each other and use <code>abs()</code> to find the absolute value. After that, we need to sum these all up and multiply by .5. We are calculating these by county, so we can use group_by() to sum up only the data for each county to produce a series of final dissimilarity statistics for each county in New York City. For other regions, you might end up calculating dissimilarity for multiple counties within a region.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_wb =</span> <span class="fu">abs</span>(BlackE <span class="sc">/</span> co_BlackE <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span>  </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_wb)) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="xremqsstcb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xremqsstcb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xremqsstcb thead, #xremqsstcb tbody, #xremqsstcb tfoot, #xremqsstcb tr, #xremqsstcb td, #xremqsstcb th {
  border-style: none;
}

#xremqsstcb p {
  margin: 0;
  padding: 0;
}

#xremqsstcb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xremqsstcb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xremqsstcb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xremqsstcb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xremqsstcb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xremqsstcb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xremqsstcb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xremqsstcb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xremqsstcb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xremqsstcb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xremqsstcb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xremqsstcb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xremqsstcb .gt_spanner_row {
  border-bottom-style: hidden;
}

#xremqsstcb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xremqsstcb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xremqsstcb .gt_from_md > :first-child {
  margin-top: 0;
}

#xremqsstcb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xremqsstcb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xremqsstcb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xremqsstcb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xremqsstcb .gt_row_group_first td {
  border-top-width: 2px;
}

#xremqsstcb .gt_row_group_first th {
  border-top-width: 2px;
}

#xremqsstcb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xremqsstcb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xremqsstcb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xremqsstcb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xremqsstcb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xremqsstcb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xremqsstcb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xremqsstcb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xremqsstcb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xremqsstcb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xremqsstcb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xremqsstcb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xremqsstcb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xremqsstcb .gt_left {
  text-align: left;
}

#xremqsstcb .gt_center {
  text-align: center;
}

#xremqsstcb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xremqsstcb .gt_font_normal {
  font-weight: normal;
}

#xremqsstcb .gt_font_bold {
  font-weight: bold;
}

#xremqsstcb .gt_font_italic {
  font-style: italic;
}

#xremqsstcb .gt_super {
  font-size: 65%;
}

#xremqsstcb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xremqsstcb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xremqsstcb .gt_indent_1 {
  text-indent: 5px;
}

#xremqsstcb .gt_indent_2 {
  text-indent: 10px;
}

#xremqsstcb .gt_indent_3 {
  text-indent: 15px;
}

#xremqsstcb .gt_indent_4 {
  text-indent: 20px;
}

#xremqsstcb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="dissimilarity">dissimilarity</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="dissimilarity" class="gt_row gt_right">0.7107378</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="dissimilarity" class="gt_row gt_right">0.7731939</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="dissimilarity" class="gt_row gt_right">0.7057447</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="dissimilarity" class="gt_row gt_right">0.8146201</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="dissimilarity" class="gt_row gt_right">0.7226401</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>How would you interpret these black-white dissimilarity values? Where is Black-White dissimilarity the highest within the region? Where is it the lowest?</p>
</section>
</section>
<section id="nonwhite-white-dissimilarity" class="level2">
<h2 class="anchored" data-anchor-id="nonwhite-white-dissimilarity">Nonwhite-White Dissimilarity</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_nww =</span> <span class="fu">abs</span>((PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> (co_PoptotE<span class="sc">-</span>co_WhiteE) <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_nww)) <span class="sc">|&gt;</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="eveyhkscvw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#eveyhkscvw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#eveyhkscvw thead, #eveyhkscvw tbody, #eveyhkscvw tfoot, #eveyhkscvw tr, #eveyhkscvw td, #eveyhkscvw th {
  border-style: none;
}

#eveyhkscvw p {
  margin: 0;
  padding: 0;
}

#eveyhkscvw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#eveyhkscvw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#eveyhkscvw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#eveyhkscvw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#eveyhkscvw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eveyhkscvw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eveyhkscvw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eveyhkscvw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#eveyhkscvw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#eveyhkscvw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#eveyhkscvw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#eveyhkscvw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#eveyhkscvw .gt_spanner_row {
  border-bottom-style: hidden;
}

#eveyhkscvw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#eveyhkscvw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#eveyhkscvw .gt_from_md > :first-child {
  margin-top: 0;
}

#eveyhkscvw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#eveyhkscvw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#eveyhkscvw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#eveyhkscvw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#eveyhkscvw .gt_row_group_first td {
  border-top-width: 2px;
}

#eveyhkscvw .gt_row_group_first th {
  border-top-width: 2px;
}

#eveyhkscvw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eveyhkscvw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#eveyhkscvw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#eveyhkscvw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eveyhkscvw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eveyhkscvw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#eveyhkscvw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#eveyhkscvw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#eveyhkscvw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eveyhkscvw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eveyhkscvw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eveyhkscvw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eveyhkscvw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eveyhkscvw .gt_left {
  text-align: left;
}

#eveyhkscvw .gt_center {
  text-align: center;
}

#eveyhkscvw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#eveyhkscvw .gt_font_normal {
  font-weight: normal;
}

#eveyhkscvw .gt_font_bold {
  font-weight: bold;
}

#eveyhkscvw .gt_font_italic {
  font-style: italic;
}

#eveyhkscvw .gt_super {
  font-size: 65%;
}

#eveyhkscvw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#eveyhkscvw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#eveyhkscvw .gt_indent_1 {
  text-indent: 5px;
}

#eveyhkscvw .gt_indent_2 {
  text-indent: 10px;
}

#eveyhkscvw .gt_indent_3 {
  text-indent: 15px;
}

#eveyhkscvw .gt_indent_4 {
  text-indent: 20px;
}

#eveyhkscvw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="dissimilarity">dissimilarity</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="dissimilarity" class="gt_row gt_right">0.6311840</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="dissimilarity" class="gt_row gt_right">0.5502573</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="dissimilarity" class="gt_row gt_right">0.5144714</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="dissimilarity" class="gt_row gt_right">0.5274621</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="dissimilarity" class="gt_row gt_right">0.4167665</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Compare and contrast this with Black-White dissimilarity - what do you observe?</p>
</section>
<section id="latino-white-dissimilarity" class="level2">
<h2 class="anchored" data-anchor-id="latino-white-dissimilarity">Latino-White Dissimilarity</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_lw =</span> <span class="fu">abs</span>(HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_lw)) <span class="sc">|&gt;</span> </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="hwhrwnyscq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hwhrwnyscq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hwhrwnyscq thead, #hwhrwnyscq tbody, #hwhrwnyscq tfoot, #hwhrwnyscq tr, #hwhrwnyscq td, #hwhrwnyscq th {
  border-style: none;
}

#hwhrwnyscq p {
  margin: 0;
  padding: 0;
}

#hwhrwnyscq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hwhrwnyscq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hwhrwnyscq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hwhrwnyscq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hwhrwnyscq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hwhrwnyscq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hwhrwnyscq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hwhrwnyscq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hwhrwnyscq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hwhrwnyscq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hwhrwnyscq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hwhrwnyscq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hwhrwnyscq .gt_spanner_row {
  border-bottom-style: hidden;
}

#hwhrwnyscq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hwhrwnyscq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hwhrwnyscq .gt_from_md > :first-child {
  margin-top: 0;
}

#hwhrwnyscq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hwhrwnyscq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hwhrwnyscq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hwhrwnyscq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hwhrwnyscq .gt_row_group_first td {
  border-top-width: 2px;
}

#hwhrwnyscq .gt_row_group_first th {
  border-top-width: 2px;
}

#hwhrwnyscq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hwhrwnyscq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hwhrwnyscq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hwhrwnyscq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hwhrwnyscq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hwhrwnyscq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hwhrwnyscq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#hwhrwnyscq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hwhrwnyscq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hwhrwnyscq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hwhrwnyscq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hwhrwnyscq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hwhrwnyscq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hwhrwnyscq .gt_left {
  text-align: left;
}

#hwhrwnyscq .gt_center {
  text-align: center;
}

#hwhrwnyscq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hwhrwnyscq .gt_font_normal {
  font-weight: normal;
}

#hwhrwnyscq .gt_font_bold {
  font-weight: bold;
}

#hwhrwnyscq .gt_font_italic {
  font-style: italic;
}

#hwhrwnyscq .gt_super {
  font-size: 65%;
}

#hwhrwnyscq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hwhrwnyscq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hwhrwnyscq .gt_indent_1 {
  text-indent: 5px;
}

#hwhrwnyscq .gt_indent_2 {
  text-indent: 10px;
}

#hwhrwnyscq .gt_indent_3 {
  text-indent: 15px;
}

#hwhrwnyscq .gt_indent_4 {
  text-indent: 20px;
}

#hwhrwnyscq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="dissimilarity">dissimilarity</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="dissimilarity" class="gt_row gt_right">0.6244812</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="dissimilarity" class="gt_row gt_right">0.5451200</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="dissimilarity" class="gt_row gt_right">0.6129532</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="dissimilarity" class="gt_row gt_right">0.5070836</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="dissimilarity" class="gt_row gt_right">0.4122438</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Compare and contrast this with Black-White dissimilarity - what do you observe?</p>
</section>
<section id="interaction" class="level1">
<h1>Interaction</h1>
<p>A second common measure of segregation is <em>interaction</em> which is a measure of <em>exposure</em>. Interaction measures the likelihood of population subgroups interacting with one another based upon their distribution within areal sub units (tracts). For instance, Black-White interaction is calculated as follows:</p>
<p><span class="math inline">\(Interaction = \sum_i\frac{b_i}{B}*\frac{w_i}{t_i}\)</span></p>
<p>Where</p>
<p><span class="math inline">\(b_i\)</span> is the Black population of tract <em>i</em></p>
<p><span class="math inline">\(B\)</span> is the Black population of the county</p>
<p><span class="math inline">\(w_i\)</span> is the White population of tract <em>i</em></p>
<p><span class="math inline">\(t_i\)</span> is the total population of tract <em>i</em></p>
<p>Given that there are some similarities to the dissimilarity index, modify your existing code to measure Black White interaction for counties in the New York City:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> ((BlackE <span class="sc">/</span> co_BlackE) <span class="sc">*</span> (WhiteE <span class="sc">/</span> PoptotE))) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="zcwfyxouku" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zcwfyxouku table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zcwfyxouku thead, #zcwfyxouku tbody, #zcwfyxouku tfoot, #zcwfyxouku tr, #zcwfyxouku td, #zcwfyxouku th {
  border-style: none;
}

#zcwfyxouku p {
  margin: 0;
  padding: 0;
}

#zcwfyxouku .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zcwfyxouku .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zcwfyxouku .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zcwfyxouku .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zcwfyxouku .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcwfyxouku .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcwfyxouku .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zcwfyxouku .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zcwfyxouku .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zcwfyxouku .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zcwfyxouku .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zcwfyxouku .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zcwfyxouku .gt_spanner_row {
  border-bottom-style: hidden;
}

#zcwfyxouku .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zcwfyxouku .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zcwfyxouku .gt_from_md > :first-child {
  margin-top: 0;
}

#zcwfyxouku .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zcwfyxouku .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zcwfyxouku .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zcwfyxouku .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zcwfyxouku .gt_row_group_first td {
  border-top-width: 2px;
}

#zcwfyxouku .gt_row_group_first th {
  border-top-width: 2px;
}

#zcwfyxouku .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcwfyxouku .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zcwfyxouku .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zcwfyxouku .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcwfyxouku .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcwfyxouku .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zcwfyxouku .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zcwfyxouku .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zcwfyxouku .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zcwfyxouku .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcwfyxouku .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcwfyxouku .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zcwfyxouku .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zcwfyxouku .gt_left {
  text-align: left;
}

#zcwfyxouku .gt_center {
  text-align: center;
}

#zcwfyxouku .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zcwfyxouku .gt_font_normal {
  font-weight: normal;
}

#zcwfyxouku .gt_font_bold {
  font-weight: bold;
}

#zcwfyxouku .gt_font_italic {
  font-style: italic;
}

#zcwfyxouku .gt_super {
  font-size: 65%;
}

#zcwfyxouku .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zcwfyxouku .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zcwfyxouku .gt_indent_1 {
  text-indent: 5px;
}

#zcwfyxouku .gt_indent_2 {
  text-indent: 10px;
}

#zcwfyxouku .gt_indent_3 {
  text-indent: 15px;
}

#zcwfyxouku .gt_indent_4 {
  text-indent: 20px;
}

#zcwfyxouku .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="interaction">interaction</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="interaction" class="gt_row gt_right">0.04468322</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="interaction" class="gt_row gt_right">0.13499725</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="interaction" class="gt_row gt_right">0.22647975</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="interaction" class="gt_row gt_right">0.07750034</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="interaction" class="gt_row gt_right">0.27902540</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The output here is actually a <em>probability</em> that ranges from 0 to 1. A value closer to 1 indicates a higher probability of there being contact between these two population groups. A value closer to 0 indicates lower probabilities of contact.</p>
<p>Provide your interpretation of Black-White Interaction for New York City boroughs.</p>
<section id="nonwhite-white-interaction" class="level3">
<h3 class="anchored" data-anchor-id="nonwhite-white-interaction">Nonwhite-White Interaction</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> ((PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> (co_PoptotE<span class="sc">-</span>co_WhiteE) <span class="sc">*</span> WhiteE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="ebegkijvwu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ebegkijvwu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ebegkijvwu thead, #ebegkijvwu tbody, #ebegkijvwu tfoot, #ebegkijvwu tr, #ebegkijvwu td, #ebegkijvwu th {
  border-style: none;
}

#ebegkijvwu p {
  margin: 0;
  padding: 0;
}

#ebegkijvwu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ebegkijvwu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ebegkijvwu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ebegkijvwu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ebegkijvwu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ebegkijvwu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebegkijvwu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ebegkijvwu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ebegkijvwu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ebegkijvwu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ebegkijvwu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ebegkijvwu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ebegkijvwu .gt_spanner_row {
  border-bottom-style: hidden;
}

#ebegkijvwu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ebegkijvwu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ebegkijvwu .gt_from_md > :first-child {
  margin-top: 0;
}

#ebegkijvwu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ebegkijvwu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ebegkijvwu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ebegkijvwu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ebegkijvwu .gt_row_group_first td {
  border-top-width: 2px;
}

#ebegkijvwu .gt_row_group_first th {
  border-top-width: 2px;
}

#ebegkijvwu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebegkijvwu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ebegkijvwu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ebegkijvwu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebegkijvwu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebegkijvwu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ebegkijvwu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ebegkijvwu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ebegkijvwu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ebegkijvwu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ebegkijvwu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebegkijvwu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ebegkijvwu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ebegkijvwu .gt_left {
  text-align: left;
}

#ebegkijvwu .gt_center {
  text-align: center;
}

#ebegkijvwu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ebegkijvwu .gt_font_normal {
  font-weight: normal;
}

#ebegkijvwu .gt_font_bold {
  font-weight: bold;
}

#ebegkijvwu .gt_font_italic {
  font-style: italic;
}

#ebegkijvwu .gt_super {
  font-size: 65%;
}

#ebegkijvwu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ebegkijvwu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ebegkijvwu .gt_indent_1 {
  text-indent: 5px;
}

#ebegkijvwu .gt_indent_2 {
  text-indent: 10px;
}

#ebegkijvwu .gt_indent_3 {
  text-indent: 15px;
}

#ebegkijvwu .gt_indent_4 {
  text-indent: 20px;
}

#ebegkijvwu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="interaction">interaction</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="interaction" class="gt_row gt_right">0.0630752</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="interaction" class="gt_row gt_right">0.2310775</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="interaction" class="gt_row gt_right">0.3196593</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="interaction" class="gt_row gt_right">0.1771489</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="interaction" class="gt_row gt_right">0.4523662</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="latino-white-interaction" class="level3">
<h3 class="anchored" data-anchor-id="latino-white-interaction">Latino-White Interaction</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> (HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">*</span> WhiteE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="xmkbzyuypp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xmkbzyuypp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xmkbzyuypp thead, #xmkbzyuypp tbody, #xmkbzyuypp tfoot, #xmkbzyuypp tr, #xmkbzyuypp td, #xmkbzyuypp th {
  border-style: none;
}

#xmkbzyuypp p {
  margin: 0;
  padding: 0;
}

#xmkbzyuypp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xmkbzyuypp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xmkbzyuypp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xmkbzyuypp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xmkbzyuypp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xmkbzyuypp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xmkbzyuypp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xmkbzyuypp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xmkbzyuypp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xmkbzyuypp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xmkbzyuypp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xmkbzyuypp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xmkbzyuypp .gt_spanner_row {
  border-bottom-style: hidden;
}

#xmkbzyuypp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xmkbzyuypp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xmkbzyuypp .gt_from_md > :first-child {
  margin-top: 0;
}

#xmkbzyuypp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xmkbzyuypp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xmkbzyuypp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xmkbzyuypp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xmkbzyuypp .gt_row_group_first td {
  border-top-width: 2px;
}

#xmkbzyuypp .gt_row_group_first th {
  border-top-width: 2px;
}

#xmkbzyuypp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xmkbzyuypp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xmkbzyuypp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xmkbzyuypp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xmkbzyuypp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xmkbzyuypp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xmkbzyuypp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xmkbzyuypp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xmkbzyuypp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xmkbzyuypp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xmkbzyuypp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xmkbzyuypp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xmkbzyuypp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xmkbzyuypp .gt_left {
  text-align: left;
}

#xmkbzyuypp .gt_center {
  text-align: center;
}

#xmkbzyuypp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xmkbzyuypp .gt_font_normal {
  font-weight: normal;
}

#xmkbzyuypp .gt_font_bold {
  font-weight: bold;
}

#xmkbzyuypp .gt_font_italic {
  font-style: italic;
}

#xmkbzyuypp .gt_super {
  font-size: 65%;
}

#xmkbzyuypp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xmkbzyuypp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xmkbzyuypp .gt_indent_1 {
  text-indent: 5px;
}

#xmkbzyuypp .gt_indent_2 {
  text-indent: 10px;
}

#xmkbzyuypp .gt_indent_3 {
  text-indent: 15px;
}

#xmkbzyuypp .gt_indent_4 {
  text-indent: 20px;
}

#xmkbzyuypp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="interaction">interaction</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="interaction" class="gt_row gt_right">0.06632347</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="interaction" class="gt_row gt_right">0.26564666</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="interaction" class="gt_row gt_right">0.27182625</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="interaction" class="gt_row gt_right">0.20714070</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="interaction" class="gt_row gt_right">0.46687669</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>How would you interpret Black-White, Non-White White, and Latino-White interaction jointly?</p>
</section>
</section>
<section id="isolation" class="level1">
<h1>Isolation</h1>
<p>The final measure of racial segregation we’ll look at in this lab is <em>isolation</em> which is only measured for one group at a time. Isolation measures the likelihood of contact for a subgroup with other subgroup members. It is interpreted similarly to Interaction (as a probability ranging from 0 to 1):</p>
<p>Isolation for Blacks</p>
<p><span class="math inline">\(Isolation = \sum_i\frac{b_i}{B}*\frac{b_i}{t_i}\)</span></p>
<p>Where</p>
<p><span class="math inline">\(b_i\)</span> is the Black population of tract <em>i</em></p>
<p><span class="math inline">\(B\)</span> is the Black population of the county</p>
<p><span class="math inline">\(t_i\)</span> is the total population of tract <em>i</em></p>
<section id="black-isolation" class="level3">
<h3 class="anchored" data-anchor-id="black-isolation">Black Isolation</h3>
<p>Let’s calculate Black Isolation:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> (BlackE <span class="sc">/</span> co_BlackE <span class="sc">*</span> BlackE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="phsxiknnzp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#phsxiknnzp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#phsxiknnzp thead, #phsxiknnzp tbody, #phsxiknnzp tfoot, #phsxiknnzp tr, #phsxiknnzp td, #phsxiknnzp th {
  border-style: none;
}

#phsxiknnzp p {
  margin: 0;
  padding: 0;
}

#phsxiknnzp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#phsxiknnzp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#phsxiknnzp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#phsxiknnzp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#phsxiknnzp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#phsxiknnzp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#phsxiknnzp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#phsxiknnzp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#phsxiknnzp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#phsxiknnzp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#phsxiknnzp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#phsxiknnzp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#phsxiknnzp .gt_spanner_row {
  border-bottom-style: hidden;
}

#phsxiknnzp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#phsxiknnzp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#phsxiknnzp .gt_from_md > :first-child {
  margin-top: 0;
}

#phsxiknnzp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#phsxiknnzp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#phsxiknnzp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#phsxiknnzp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#phsxiknnzp .gt_row_group_first td {
  border-top-width: 2px;
}

#phsxiknnzp .gt_row_group_first th {
  border-top-width: 2px;
}

#phsxiknnzp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#phsxiknnzp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#phsxiknnzp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#phsxiknnzp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#phsxiknnzp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#phsxiknnzp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#phsxiknnzp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#phsxiknnzp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#phsxiknnzp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#phsxiknnzp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#phsxiknnzp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#phsxiknnzp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#phsxiknnzp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#phsxiknnzp .gt_left {
  text-align: left;
}

#phsxiknnzp .gt_center {
  text-align: center;
}

#phsxiknnzp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#phsxiknnzp .gt_font_normal {
  font-weight: normal;
}

#phsxiknnzp .gt_font_bold {
  font-weight: bold;
}

#phsxiknnzp .gt_font_italic {
  font-style: italic;
}

#phsxiknnzp .gt_super {
  font-size: 65%;
}

#phsxiknnzp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#phsxiknnzp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#phsxiknnzp .gt_indent_1 {
  text-indent: 5px;
}

#phsxiknnzp .gt_indent_2 {
  text-indent: 10px;
}

#phsxiknnzp .gt_indent_3 {
  text-indent: 15px;
}

#phsxiknnzp .gt_indent_4 {
  text-indent: 20px;
}

#phsxiknnzp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="isolation">isolation</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="isolation" class="gt_row gt_right">0.4180943</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="isolation" class="gt_row gt_right">0.6295217</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="isolation" class="gt_row gt_right">0.3457500</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="isolation" class="gt_row gt_right">0.5888139</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="isolation" class="gt_row gt_right">0.3198306</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>You know what comes next. Let’s calculate Nonwhite Isolation and Latino Isolation and interpret what you see.</p>
</section>
<section id="nonwhite-isolation" class="level2">
<h2 class="anchored" data-anchor-id="nonwhite-isolation">Nonwhite Isolation</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> ((PoptotE <span class="sc">-</span> WhiteE) <span class="sc">/</span> (co_PoptotE <span class="sc">-</span> co_WhiteE) <span class="sc">*</span> (PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="adxlnrygaz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#adxlnrygaz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#adxlnrygaz thead, #adxlnrygaz tbody, #adxlnrygaz tfoot, #adxlnrygaz tr, #adxlnrygaz td, #adxlnrygaz th {
  border-style: none;
}

#adxlnrygaz p {
  margin: 0;
  padding: 0;
}

#adxlnrygaz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adxlnrygaz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#adxlnrygaz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#adxlnrygaz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#adxlnrygaz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adxlnrygaz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adxlnrygaz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adxlnrygaz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adxlnrygaz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adxlnrygaz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adxlnrygaz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adxlnrygaz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adxlnrygaz .gt_spanner_row {
  border-bottom-style: hidden;
}

#adxlnrygaz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#adxlnrygaz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adxlnrygaz .gt_from_md > :first-child {
  margin-top: 0;
}

#adxlnrygaz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adxlnrygaz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adxlnrygaz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#adxlnrygaz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#adxlnrygaz .gt_row_group_first td {
  border-top-width: 2px;
}

#adxlnrygaz .gt_row_group_first th {
  border-top-width: 2px;
}

#adxlnrygaz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adxlnrygaz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#adxlnrygaz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#adxlnrygaz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adxlnrygaz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adxlnrygaz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adxlnrygaz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#adxlnrygaz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adxlnrygaz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adxlnrygaz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adxlnrygaz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adxlnrygaz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adxlnrygaz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adxlnrygaz .gt_left {
  text-align: left;
}

#adxlnrygaz .gt_center {
  text-align: center;
}

#adxlnrygaz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adxlnrygaz .gt_font_normal {
  font-weight: normal;
}

#adxlnrygaz .gt_font_bold {
  font-weight: bold;
}

#adxlnrygaz .gt_font_italic {
  font-style: italic;
}

#adxlnrygaz .gt_super {
  font-size: 65%;
}

#adxlnrygaz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#adxlnrygaz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#adxlnrygaz .gt_indent_1 {
  text-indent: 5px;
}

#adxlnrygaz .gt_indent_2 {
  text-indent: 10px;
}

#adxlnrygaz .gt_indent_3 {
  text-indent: 15px;
}

#adxlnrygaz .gt_indent_4 {
  text-indent: 20px;
}

#adxlnrygaz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="isolation">isolation</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="isolation" class="gt_row gt_right">0.9369248</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="isolation" class="gt_row gt_right">0.7689225</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="isolation" class="gt_row gt_right">0.6803407</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="isolation" class="gt_row gt_right">0.8228511</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="isolation" class="gt_row gt_right">0.5476338</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="latino-isolation" class="level2">
<h2 class="anchored" data-anchor-id="latino-isolation">Latino Isolation</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> (HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">*</span> HispanicE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="neptopafxq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#neptopafxq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#neptopafxq thead, #neptopafxq tbody, #neptopafxq tfoot, #neptopafxq tr, #neptopafxq td, #neptopafxq th {
  border-style: none;
}

#neptopafxq p {
  margin: 0;
  padding: 0;
}

#neptopafxq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#neptopafxq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#neptopafxq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#neptopafxq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#neptopafxq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#neptopafxq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neptopafxq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#neptopafxq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#neptopafxq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#neptopafxq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#neptopafxq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#neptopafxq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#neptopafxq .gt_spanner_row {
  border-bottom-style: hidden;
}

#neptopafxq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#neptopafxq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#neptopafxq .gt_from_md > :first-child {
  margin-top: 0;
}

#neptopafxq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#neptopafxq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#neptopafxq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#neptopafxq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#neptopafxq .gt_row_group_first td {
  border-top-width: 2px;
}

#neptopafxq .gt_row_group_first th {
  border-top-width: 2px;
}

#neptopafxq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#neptopafxq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#neptopafxq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#neptopafxq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neptopafxq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#neptopafxq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#neptopafxq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#neptopafxq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#neptopafxq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#neptopafxq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#neptopafxq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#neptopafxq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#neptopafxq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#neptopafxq .gt_left {
  text-align: left;
}

#neptopafxq .gt_center {
  text-align: center;
}

#neptopafxq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#neptopafxq .gt_font_normal {
  font-weight: normal;
}

#neptopafxq .gt_font_bold {
  font-weight: bold;
}

#neptopafxq .gt_font_italic {
  font-style: italic;
}

#neptopafxq .gt_super {
  font-size: 65%;
}

#neptopafxq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#neptopafxq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#neptopafxq .gt_indent_1 {
  text-indent: 5px;
}

#neptopafxq .gt_indent_2 {
  text-indent: 10px;
}

#neptopafxq .gt_indent_3 {
  text-indent: 15px;
}

#neptopafxq .gt_indent_4 {
  text-indent: 20px;
}

#neptopafxq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Borough">Borough</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="isolation">isolation</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Borough" class="gt_row gt_left">Bronx</td>
<td headers="isolation" class="gt_row gt_right">0.6313472</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Brooklyn</td>
<td headers="isolation" class="gt_row gt_right">0.3350622</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Manhattan</td>
<td headers="isolation" class="gt_row gt_right">0.4678842</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Queens</td>
<td headers="isolation" class="gt_row gt_right">0.4283512</td></tr>
    <tr><td headers="Borough" class="gt_row gt_left">Staten Island</td>
<td headers="isolation" class="gt_row gt_right">0.2666154</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Provide your interpretation of how isolation differs for these groups and for each borough.</p>
</section>
</section>
<section id="income-inequality" class="level1">
<h1>Income Inequality</h1>
<p>While we’re at it, let’s also pay attention to segregation on the basis of income. A simple measure of income inequality and distribution is to calculate the difference in median income between the county and the census tracts that make up the county.</p>
<p>We have all of our census tract geographic data, but need to go back to census data to download tract and county median household income data (this is not a place to take the average or weighted average of the tract-level data). Let’s download and prepare these as a new dataset. Median household income is contained in ACS table <a href="https://data.census.gov/cedsci/table?q=B19013&amp;tid=ACSDT1Y2019.B19013">B19013</a>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">MHHI =</span> <span class="st">"B19013_001"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Our tidycensus download call:</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">co_MHHI =</span> <span class="st">"B19013_001"</span>)</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>nyc_income_co <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="pcsnvpokif" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pcsnvpokif table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pcsnvpokif thead, #pcsnvpokif tbody, #pcsnvpokif tfoot, #pcsnvpokif tr, #pcsnvpokif td, #pcsnvpokif th {
  border-style: none;
}

#pcsnvpokif p {
  margin: 0;
  padding: 0;
}

#pcsnvpokif .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pcsnvpokif .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pcsnvpokif .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pcsnvpokif .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pcsnvpokif .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pcsnvpokif .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pcsnvpokif .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pcsnvpokif .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pcsnvpokif .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pcsnvpokif .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pcsnvpokif .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pcsnvpokif .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pcsnvpokif .gt_spanner_row {
  border-bottom-style: hidden;
}

#pcsnvpokif .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pcsnvpokif .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pcsnvpokif .gt_from_md > :first-child {
  margin-top: 0;
}

#pcsnvpokif .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pcsnvpokif .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pcsnvpokif .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pcsnvpokif .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pcsnvpokif .gt_row_group_first td {
  border-top-width: 2px;
}

#pcsnvpokif .gt_row_group_first th {
  border-top-width: 2px;
}

#pcsnvpokif .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pcsnvpokif .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pcsnvpokif .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pcsnvpokif .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pcsnvpokif .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pcsnvpokif .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pcsnvpokif .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pcsnvpokif .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pcsnvpokif .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pcsnvpokif .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pcsnvpokif .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pcsnvpokif .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pcsnvpokif .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pcsnvpokif .gt_left {
  text-align: left;
}

#pcsnvpokif .gt_center {
  text-align: center;
}

#pcsnvpokif .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pcsnvpokif .gt_font_normal {
  font-weight: normal;
}

#pcsnvpokif .gt_font_bold {
  font-weight: bold;
}

#pcsnvpokif .gt_font_italic {
  font-style: italic;
}

#pcsnvpokif .gt_super {
  font-size: 65%;
}

#pcsnvpokif .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pcsnvpokif .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pcsnvpokif .gt_indent_1 {
  text-indent: 5px;
}

#pcsnvpokif .gt_indent_2 {
  text-indent: 10px;
}

#pcsnvpokif .gt_indent_3 {
  text-indent: 15px;
}

#pcsnvpokif .gt_indent_4 {
  text-indent: 20px;
}

#pcsnvpokif .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="GEOID">GEOID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="NAME">NAME</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="MHHIE">MHHIE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="MHHIM">MHHIM</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="GEOID" class="gt_row gt_right">36047009202</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 92.02, Kings County, New York</td>
<td headers="MHHIE" class="gt_row gt_right">41563</td>
<td headers="MHHIM" class="gt_row gt_right">18846</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009401</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 94.01, Kings County, New York</td>
<td headers="MHHIE" class="gt_row gt_right">51346</td>
<td headers="MHHIM" class="gt_row gt_right">13554</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009402</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 94.02, Kings County, New York</td>
<td headers="MHHIE" class="gt_row gt_right">58750</td>
<td headers="MHHIM" class="gt_row gt_right">10259</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009600</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 96, Kings County, New York</td>
<td headers="MHHIE" class="gt_row gt_right">62614</td>
<td headers="MHHIM" class="gt_row gt_right">13004</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047009800</td>
<td headers="NAME" class="gt_row gt_left">Census Tract 98, Kings County, New York</td>
<td headers="MHHIE" class="gt_row gt_right">56229</td>
<td headers="MHHIM" class="gt_row gt_right">7251</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Let’s also take a look at our county income table:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>nyc_income_co <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="ajzrlnyduq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ajzrlnyduq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ajzrlnyduq thead, #ajzrlnyduq tbody, #ajzrlnyduq tfoot, #ajzrlnyduq tr, #ajzrlnyduq td, #ajzrlnyduq th {
  border-style: none;
}

#ajzrlnyduq p {
  margin: 0;
  padding: 0;
}

#ajzrlnyduq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ajzrlnyduq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ajzrlnyduq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ajzrlnyduq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ajzrlnyduq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ajzrlnyduq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ajzrlnyduq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ajzrlnyduq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ajzrlnyduq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ajzrlnyduq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ajzrlnyduq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ajzrlnyduq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ajzrlnyduq .gt_spanner_row {
  border-bottom-style: hidden;
}

#ajzrlnyduq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ajzrlnyduq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ajzrlnyduq .gt_from_md > :first-child {
  margin-top: 0;
}

#ajzrlnyduq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ajzrlnyduq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ajzrlnyduq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ajzrlnyduq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ajzrlnyduq .gt_row_group_first td {
  border-top-width: 2px;
}

#ajzrlnyduq .gt_row_group_first th {
  border-top-width: 2px;
}

#ajzrlnyduq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ajzrlnyduq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ajzrlnyduq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ajzrlnyduq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ajzrlnyduq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ajzrlnyduq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ajzrlnyduq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ajzrlnyduq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ajzrlnyduq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ajzrlnyduq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ajzrlnyduq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ajzrlnyduq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ajzrlnyduq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ajzrlnyduq .gt_left {
  text-align: left;
}

#ajzrlnyduq .gt_center {
  text-align: center;
}

#ajzrlnyduq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ajzrlnyduq .gt_font_normal {
  font-weight: normal;
}

#ajzrlnyduq .gt_font_bold {
  font-weight: bold;
}

#ajzrlnyduq .gt_font_italic {
  font-style: italic;
}

#ajzrlnyduq .gt_super {
  font-size: 65%;
}

#ajzrlnyduq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ajzrlnyduq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ajzrlnyduq .gt_indent_1 {
  text-indent: 5px;
}

#ajzrlnyduq .gt_indent_2 {
  text-indent: 10px;
}

#ajzrlnyduq .gt_indent_3 {
  text-indent: 15px;
}

#ajzrlnyduq .gt_indent_4 {
  text-indent: 20px;
}

#ajzrlnyduq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="GEOID">GEOID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="NAME">NAME</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_MHHIE">co_MHHIE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="co_MHHIM">co_MHHIM</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="GEOID" class="gt_row gt_right">36061</td>
<td headers="NAME" class="gt_row gt_left">New York County, New York</td>
<td headers="co_MHHIE" class="gt_row gt_right">89812</td>
<td headers="co_MHHIM" class="gt_row gt_right">1681</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36085</td>
<td headers="NAME" class="gt_row gt_left">Richmond County, New York</td>
<td headers="co_MHHIE" class="gt_row gt_right">85381</td>
<td headers="co_MHHIM" class="gt_row gt_right">2396</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36005</td>
<td headers="NAME" class="gt_row gt_left">Bronx County, New York</td>
<td headers="co_MHHIE" class="gt_row gt_right">41895</td>
<td headers="co_MHHIM" class="gt_row gt_right">624</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36047</td>
<td headers="NAME" class="gt_row gt_left">Kings County, New York</td>
<td headers="co_MHHIE" class="gt_row gt_right">63973</td>
<td headers="co_MHHIM" class="gt_row gt_right">679</td></tr>
    <tr><td headers="GEOID" class="gt_row gt_right">36081</td>
<td headers="NAME" class="gt_row gt_left">Queens County, New York</td>
<td headers="co_MHHIE" class="gt_row gt_right">72028</td>
<td headers="co_MHHIM" class="gt_row gt_right">691</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>And now let’s join the two together (again creating our state and county FIPS codes from our combined state, county, and tract FIPS codes):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>, <span class="dv">5</span>)), nyc_income_co, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"STCO"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now we can calculate the ratio of income for our census tract to that of the county:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inc_ratio =</span> MHHIE <span class="sc">/</span> co_MHHIE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now let’s map out this income ratio statistic for New York City tracts:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income, nyc_trt, <span class="at">by=</span><span class="st">"GEOID"</span>) <span class="sc">|&gt;</span> <span class="fu">st_as_sf</span>()</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_income, <span class="fu">aes</span>(<span class="at">fill=</span>inc_ratio), <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"New York City Borough Income Ratio"</span>, <span class="at">fill =</span> <span class="st">"Income Ratio"</span>)<span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>What would a ratio of 1 indicate? What would a ratio of 3 indicate? Where do we see big differences?</p>
<p>While we’re at it, it might be interesting to create a scatter plot that illustrates the relationship between racial concentration and income. To do this, we’ll need to join together our two datasets.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>nyc_dataset <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_race, nyc_income <span class="sc">|&gt;</span> <span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>)<span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, MHHIE, MHHIM, co_MHHIE, co_MHHIM, inc_ratio), <span class="at">by=</span><span class="st">"GEOID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s plot the Percent White on the X axis and the income ratio on the y axis using geom_point):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"My Cool Plot"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>How would you describe this relationship?</p>
<p>Now see if you can add a linear line of best fit to these data using geom_smooth (you’ll need to set <code>method = lm</code> to get a fitted linear model):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data=</span>nyc_dataset, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tract Income Ratio by White Population"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>What’s the relationship between the percent white population and the income ratio?</p>
<p>What would it look like to split this out by boroughs using <em>facets</em>?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data=</span>nyc_dataset, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tract Income Ratio by White Population"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Borough)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="06_segregation_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>How would you describe the differences observed by boroughs?</p>
<p>Congratulations, you have learned some ways to calculate common measures of segregation, and have applied these measures as part of a data pipeline.</p>
<p>By changing your download calls at the very beginning of this lab where you download ACS data, you could easily create segregation measures for other places (note that you would have to re-label some elements where we indicate boroughs which are counties within New York City).</p>
</section>
<section id="extending-this-analysis" class="level1">
<h1>Extending this Analysis</h1>
<p>Now that you have some new tools that you are familiar with, start exploring these data more. Make maps for other racial groups. Explore dimensions of segregation for other groups.</p>
<ol type="1">
<li><p>Can you produce the data which would populate a summary table of minority-majority dissimilarity? Which groups face the highest levels of segregation?</p></li>
<li><p>How does income relate to levels of segregation? Think about how you might use the median household income statistic to explore the relationship.</p></li>
<li><p>What are other forms of segregation that might be useful to explore (aside from racial and income segregation)?</p></li>
</ol>
<section id="lab-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="lab-evaluation">Lab Evaluation</h2>
<p>In evaluating your lab submission, we’ll be paying attention to the following:</p>
<ol type="1">
<li>Proper use of tigris tidycensus to download tabular and spatial data from the census bureau.</li>
<li>Production of clearly-labelled and well-formatted tables.</li>
<li>Production of well-formatted maps of income inequality.</li>
<li>Detailed reflection and diagnosis using measure of segregation.</li>
</ol>
<p>As you get into the lab, please feel welcome to ask us questions, and please share where you’re struggling with us and with others in the class.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb56" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Measuring Residential Segregation"</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="an">sidebar:</span><span class="co"> false</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 4</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="an">page-layout:</span><span class="co"> full</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools:</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: false</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">      caption: none</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="an">fig-responsive:</span><span class="co"> true</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>In this lab, we'll explore some of the common measures of residential segregation and apply them at the city and regional levels.</span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>In our last lab, we got a basic idea of how to summarize population racial characteristics for census tracts. Now we can start to think about summary measures of the extent to which these groups are segregated within the region. We will use census tracts as a unit of analysis to help us describe county-level racial segregation.</span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>Most measures of residential segregation are set up to summarize the level of heterogeneity (or homogeneity) observed between neighborhoods to a city or regional scale to produce a summary measure that then tells us how even populations are distributed at the neighborhood level.</span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>There are also some measures that focus more on segregation at a neighborhood level or below. In this lab, we'll focus on those measures that summarize characteristics to more aggregate levels such as cities or regions.</span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a><span class="fu">## Goals</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Gain exposure to common measures of residential segregation.</span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Learn how to apply simple measures within R / RStudio.</span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a>Let's get going...</span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a><span class="fu">## Github Lab Repository</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a>Follow <span class="co">[</span><span class="ot">this link</span><span class="co">](https://classroom.github.com/a/KR0xhhSw)</span> to accept the lab Github Classroom assignment repository.</span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setup</span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a>Let's start as usual by loading the packages that we'll need for our work.</span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## Two Useful Functions</span></span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Separate</span></span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a>Sometimes we may have a variable that we need to separate into based upon a known delimiter. <span class="in">`separate`</span> allows us to do so. Let's explore an example. Here's a table containing information on the name and location of <span class="co">[</span><span class="ot">Big 10</span><span class="co">](https://btaa.org/about)</span> schools.</span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a>Institution <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Illinois"</span>, </span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Indiana University"</span>, </span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Iowa"</span>, </span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Maryland"</span>, </span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Michigan"</span>, </span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Michigan State University"</span>, </span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Minnesota"</span>, </span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Nebraska-Lincoln"</span>, </span>
<span id="cb56-82"><a href="#cb56-82" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Northwestern University"</span>, </span>
<span id="cb56-83"><a href="#cb56-83" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ohio State University"</span>, </span>
<span id="cb56-84"><a href="#cb56-84" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Pennsylvania State University"</span>, </span>
<span id="cb56-85"><a href="#cb56-85" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Purdue University"</span>, </span>
<span id="cb56-86"><a href="#cb56-86" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Rutgers University"</span>, </span>
<span id="cb56-87"><a href="#cb56-87" aria-hidden="true" tabindex="-1"></a>  <span class="st">"University of Wisconsin-Madison"</span>)</span>
<span id="cb56-88"><a href="#cb56-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-89"><a href="#cb56-89" aria-hidden="true" tabindex="-1"></a>Location <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb56-90"><a href="#cb56-90" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Champaign, Champaign County, Illinois"</span>,</span>
<span id="cb56-91"><a href="#cb56-91" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Bloomington, Monroe County, Indiana"</span>,</span>
<span id="cb56-92"><a href="#cb56-92" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Iowa City, Johnson County, Iowa"</span>,</span>
<span id="cb56-93"><a href="#cb56-93" aria-hidden="true" tabindex="-1"></a>  <span class="st">"College Park, Baltimore County, Maryland"</span>,</span>
<span id="cb56-94"><a href="#cb56-94" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Ann Arbor, Washtenaw County, Michigan"</span>,</span>
<span id="cb56-95"><a href="#cb56-95" aria-hidden="true" tabindex="-1"></a>  <span class="st">"East Lansing, Ingham County, Michigan"</span>,</span>
<span id="cb56-96"><a href="#cb56-96" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Minneapolis, Hennepin County, Minnesota"</span>,</span>
<span id="cb56-97"><a href="#cb56-97" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lincoln, Lancaster County, Nebraska"</span>,</span>
<span id="cb56-98"><a href="#cb56-98" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Evanston, Cook County, Illinois"</span>,</span>
<span id="cb56-99"><a href="#cb56-99" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Columbus, Franklin County, Ohio"</span>,</span>
<span id="cb56-100"><a href="#cb56-100" aria-hidden="true" tabindex="-1"></a>  <span class="st">"State College, Centre County, Pennsylvania"</span>,</span>
<span id="cb56-101"><a href="#cb56-101" aria-hidden="true" tabindex="-1"></a>  <span class="st">"West Lafayette, Tippecanoe County, Indiana"</span>,</span>
<span id="cb56-102"><a href="#cb56-102" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Newark, Middlesex County, New Jersey"</span>,</span>
<span id="cb56-103"><a href="#cb56-103" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Madison, Dane County, Wisconsin"</span></span>
<span id="cb56-104"><a href="#cb56-104" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-105"><a href="#cb56-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-106"><a href="#cb56-106" aria-hidden="true" tabindex="-1"></a>big_10 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(Institution, Location)</span>
<span id="cb56-107"><a href="#cb56-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-108"><a href="#cb56-108" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span>
<span id="cb56-109"><a href="#cb56-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-110"><a href="#cb56-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-111"><a href="#cb56-111" aria-hidden="true" tabindex="-1"></a>The Location field has quite a bit of information present that we might use to learn more about the locations of Big 10 schools. Let's use <span class="in">`separate()`</span> to split the city, county, and state into their own fields.</span>
<span id="cb56-112"><a href="#cb56-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-113"><a href="#cb56-113" aria-hidden="true" tabindex="-1"></a>To use <span class="in">`separate()`</span>, we specify the name of the field we want to separate, we specify the new column names we want to assign to each of the components we're separating, and we indicate what character is the separator (in this case a comma ",").</span>
<span id="cb56-114"><a href="#cb56-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-117"><a href="#cb56-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-118"><a href="#cb56-118" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span>
<span id="cb56-119"><a href="#cb56-119" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-120"><a href="#cb56-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-121"><a href="#cb56-121" aria-hidden="true" tabindex="-1"></a>We get back three new fields that replace the existing location field.</span>
<span id="cb56-122"><a href="#cb56-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-123"><a href="#cb56-123" aria-hidden="true" tabindex="-1"></a><span class="fu">### Tally</span></span>
<span id="cb56-124"><a href="#cb56-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-125"><a href="#cb56-125" aria-hidden="true" tabindex="-1"></a>We have used the combination of <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> on many occasions in order to aggregate characteristics of data by groups. For simple operations, there are some helper functions that we can use to simplify our aggregation of groups. <span class="in">`tally()`</span> for instance is the equivalent of <span class="in">`summarise(n = n())`</span> which creates a count of the observations in each group.</span>
<span id="cb56-126"><a href="#cb56-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-127"><a href="#cb56-127" aria-hidden="true" tabindex="-1"></a>Let's explore an example using our Big 10 data. Let's say, for instance, that we want to count the number of Big 10 schools in each state. How would we do this using <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span>?</span>
<span id="cb56-128"><a href="#cb56-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-131"><a href="#cb56-131" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-132"><a href="#cb56-132" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb56-133"><a href="#cb56-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-134"><a href="#cb56-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb56-135"><a href="#cb56-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Institutions =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb56-136"><a href="#cb56-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-137"><a href="#cb56-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-138"><a href="#cb56-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-139"><a href="#cb56-139" aria-hidden="true" tabindex="-1"></a>In this case, we're taking our raw Big 10 data, separating the location into three columns, and then building a summary based upon the state field.</span>
<span id="cb56-140"><a href="#cb56-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-141"><a href="#cb56-141" aria-hidden="true" tabindex="-1"></a>Here's how we might do the same thing using <span class="in">`group_by()`</span> and <span class="in">`tally()`</span>.</span>
<span id="cb56-142"><a href="#cb56-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-145"><a href="#cb56-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-146"><a href="#cb56-146" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb56-147"><a href="#cb56-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-148"><a href="#cb56-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb56-149"><a href="#cb56-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-150"><a href="#cb56-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-151"><a href="#cb56-151" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-152"><a href="#cb56-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-153"><a href="#cb56-153" aria-hidden="true" tabindex="-1"></a>We get output that is basically the same, just with a count column labelled "n". We can specify the name of the count column so that we have a label that's more descriptive:</span>
<span id="cb56-154"><a href="#cb56-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-157"><a href="#cb56-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-158"><a href="#cb56-158" aria-hidden="true" tabindex="-1"></a>big_10 <span class="sc">|&gt;</span> </span>
<span id="cb56-159"><a href="#cb56-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-160"><a href="#cb56-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span> </span>
<span id="cb56-161"><a href="#cb56-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>(<span class="at">name =</span> <span class="st">"Institutions"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-162"><a href="#cb56-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-163"><a href="#cb56-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-164"><a href="#cb56-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-165"><a href="#cb56-165" aria-hidden="true" tabindex="-1"></a><span class="fu">## Building Census Geographies</span></span>
<span id="cb56-166"><a href="#cb56-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-167"><a href="#cb56-167" aria-hidden="true" tabindex="-1"></a>We are going to focus on analyzing population by race for New York City. We need to start by defining our geography for the city. The <span class="in">`Tigris`</span> package can help us download census geometries directly from the census servers. We could also as tidycensus to download census geographies when we pull data, but let's download geographies separately for now so that we can refine them before adding other data.</span>
<span id="cb56-168"><a href="#cb56-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-169"><a href="#cb56-169" aria-hidden="true" tabindex="-1"></a>Let's start by downloading census tract boundaries for New York City's Boroughs. We will then map these directly in RStudio. Having a borough map handy provides a good reminder of the city's geography:</span>
<span id="cb56-170"><a href="#cb56-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-171"><a href="#cb56-171" aria-hidden="true" tabindex="-1"></a><span class="al">![](https://www.worldatlas.com/r/w960-q80/upload/c6/23/73/shutterstock-152208935.jpg)</span> The city consists of five boroughs, each of which is its own county (this is atypical, but it's a New York thing).</span>
<span id="cb56-172"><a href="#cb56-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-173"><a href="#cb56-173" aria-hidden="true" tabindex="-1"></a>| FIPS Code | County Name     | Borough Name  |</span>
<span id="cb56-174"><a href="#cb56-174" aria-hidden="true" tabindex="-1"></a>|-----------|-----------------|---------------|</span>
<span id="cb56-175"><a href="#cb56-175" aria-hidden="true" tabindex="-1"></a>| 36047     | Kings County    | Brooklyn      |</span>
<span id="cb56-176"><a href="#cb56-176" aria-hidden="true" tabindex="-1"></a>| 36005     | Bronx County    | Bronx         |</span>
<span id="cb56-177"><a href="#cb56-177" aria-hidden="true" tabindex="-1"></a>| 36081     | Queens County   | Queens        |</span>
<span id="cb56-178"><a href="#cb56-178" aria-hidden="true" tabindex="-1"></a>| 36085     | Richmond County | Staten Island |</span>
<span id="cb56-179"><a href="#cb56-179" aria-hidden="true" tabindex="-1"></a>| 36061     | New York County | Manhattan     |</span>
<span id="cb56-180"><a href="#cb56-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-181"><a href="#cb56-181" aria-hidden="true" tabindex="-1"></a>: New York City Boroughs</span>
<span id="cb56-182"><a href="#cb56-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-183"><a href="#cb56-183" aria-hidden="true" tabindex="-1"></a>In building a <span class="in">`tracts`</span> call using tigris (to download tract geometries), we'll need to specify at a minimum the state and the vintage of tract geometry we want to download. Let's download 2020 tract data:</span>
<span id="cb56-184"><a href="#cb56-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-187"><a href="#cb56-187" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-188"><a href="#cb56-188" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-189"><a href="#cb56-189" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-190"><a href="#cb56-190" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb56-191"><a href="#cb56-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-192"><a href="#cb56-192" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> <span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">year =</span> <span class="dv">2020</span>)</span>
<span id="cb56-193"><a href="#cb56-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-194"><a href="#cb56-194" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-195"><a href="#cb56-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-196"><a href="#cb56-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-197"><a href="#cb56-197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-198"><a href="#cb56-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-199"><a href="#cb56-199" aria-hidden="true" tabindex="-1"></a>Let's use <span class="in">`ggplot()`</span> to visualize so that we can confirm what we've downloaded is indeed all tracts in the state of New York:</span>
<span id="cb56-200"><a href="#cb56-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-203"><a href="#cb56-203" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-204"><a href="#cb56-204" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb56-205"><a href="#cb56-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span>
<span id="cb56-206"><a href="#cb56-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-207"><a href="#cb56-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-208"><a href="#cb56-208" aria-hidden="true" tabindex="-1"></a>That looks roughly like the state of New York. Congratulations if this is your first map visualization in RStudio!</span>
<span id="cb56-209"><a href="#cb56-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-210"><a href="#cb56-210" aria-hidden="true" tabindex="-1"></a>We have some things to unpack here. Out tigris call downloaded all tracts for the state of New York. We have tract properties, but then a list of lists in a field called "geometry". What's going on here?</span>
<span id="cb56-211"><a href="#cb56-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-212"><a href="#cb56-212" aria-hidden="true" tabindex="-1"></a>Our tract geographies were downloaded in what is known as <span class="co">[</span><span class="ot">*simple features*</span><span class="co">](https://r-spatial.github.io/sf/articles/sf1.html)</span> format. If you have dealt with prior formats for spatial data in R, you'll understand that simple features really are much simpler! The list that you see here is a list of points that define the vertices, in this case, which represent each tract polygon. Embedding the geometry with data that represents the qualities of each tract is very useful.</span>
<span id="cb56-213"><a href="#cb56-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-214"><a href="#cb56-214" aria-hidden="true" tabindex="-1"></a>We could query down to the counties that define New York City with the information we have in hand:</span>
<span id="cb56-215"><a href="#cb56-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-218"><a href="#cb56-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-219"><a href="#cb56-219" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-220"><a href="#cb56-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COUNTYFP <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"047"</span>, <span class="st">"005"</span>, <span class="st">"081"</span>, <span class="st">"085"</span>, <span class="st">"061"</span>))</span>
<span id="cb56-221"><a href="#cb56-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-222"><a href="#cb56-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-223"><a href="#cb56-223" aria-hidden="true" tabindex="-1"></a>And again, let's visualize to confirm:</span>
<span id="cb56-224"><a href="#cb56-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-227"><a href="#cb56-227" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-228"><a href="#cb56-228" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-229"><a href="#cb56-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span>
<span id="cb56-230"><a href="#cb56-230" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-231"><a href="#cb56-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-232"><a href="#cb56-232" aria-hidden="true" tabindex="-1"></a>Again, a lot going on here, but we definitely have a subgeography from the New York State data.</span>
<span id="cb56-233"><a href="#cb56-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-234"><a href="#cb56-234" aria-hidden="true" tabindex="-1"></a>While downloading tracts for the whole state and then querying out NYC counties is ok, tigris, can accept counties as inputs to its API call:</span>
<span id="cb56-235"><a href="#cb56-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-238"><a href="#cb56-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-239"><a href="#cb56-239" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-240"><a href="#cb56-240" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-241"><a href="#cb56-241" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> <span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>), <span class="at">year =</span> <span class="dv">2020</span>)</span>
<span id="cb56-242"><a href="#cb56-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-243"><a href="#cb56-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-244"><a href="#cb56-244" aria-hidden="true" tabindex="-1"></a>Here we are just specifying counties by name - tigris looks them up and confirms which counties it has downloaded.</span>
<span id="cb56-245"><a href="#cb56-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-246"><a href="#cb56-246" aria-hidden="true" tabindex="-1"></a>Before we get into modifying this geography, let's transform it to an appropriate projection. The sf (simple features) package can handle this for us with <span class="in">`st_transform()`</span></span>
<span id="cb56-247"><a href="#cb56-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-250"><a href="#cb56-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-251"><a href="#cb56-251" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-252"><a href="#cb56-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">26918</span>)</span>
<span id="cb56-253"><a href="#cb56-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-254"><a href="#cb56-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-255"><a href="#cb56-255" aria-hidden="true" tabindex="-1"></a>The string of numbers here refers to the particular transformation we're doing - in this case to <span class="co">[</span><span class="ot">NAD 1983</span><span class="co">](https://epsg.io/26918)</span>, a common coordinate reference system for the United States.</span>
<span id="cb56-256"><a href="#cb56-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-257"><a href="#cb56-257" aria-hidden="true" tabindex="-1"></a>Our NYC tracts look a little messy - they don't really look like the shape of New York City. Let's think about what role water might be playing here. In the tract data, there are fields called ALAND and AWATER which correspond to the tract area that is land and water (respectively). Let's take a look to see if there are any tracts that are all water:</span>
<span id="cb56-258"><a href="#cb56-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-261"><a href="#cb56-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-262"><a href="#cb56-262" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-263"><a href="#cb56-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb56-264"><a href="#cb56-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-265"><a href="#cb56-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-266"><a href="#cb56-266" aria-hidden="true" tabindex="-1"></a>It turns out we have three tracts with no land area and that are all water. Let's remove them and see what our data looks like:</span>
<span id="cb56-267"><a href="#cb56-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-270"><a href="#cb56-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-271"><a href="#cb56-271" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-272"><a href="#cb56-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb56-273"><a href="#cb56-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-274"><a href="#cb56-274" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-275"><a href="#cb56-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span>
<span id="cb56-276"><a href="#cb56-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-277"><a href="#cb56-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-278"><a href="#cb56-278" aria-hidden="true" tabindex="-1"></a>A little better - we dropped a few tracts and can start to see more of the shape of the city. Let's continue to diagnose what's going on here by coloring each borough so we can see boundaries:</span>
<span id="cb56-279"><a href="#cb56-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-282"><a href="#cb56-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-283"><a href="#cb56-283" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-284"><a href="#cb56-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span>
<span id="cb56-285"><a href="#cb56-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-286"><a href="#cb56-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-287"><a href="#cb56-287" aria-hidden="true" tabindex="-1"></a>We add an aesthetic mapping to our <span class="in">`ggplot()`</span> call that assigns a unique color to each county. Referring back to our borough image of New York City, it looks like tracts are continuous with some portions covering parts of water bodies.</span>
<span id="cb56-288"><a href="#cb56-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-289"><a href="#cb56-289" aria-hidden="true" tabindex="-1"></a>Can we do any better? You know the answer is yes! tigris can use census hydrography to clip the portions of tracts that are water:</span>
<span id="cb56-290"><a href="#cb56-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-293"><a href="#cb56-293" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-294"><a href="#cb56-294" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-295"><a href="#cb56-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">erase_water</span>(<span class="at">area_threshold =</span> .<span class="dv">9</span>, <span class="at">year =</span> <span class="dv">2020</span>)</span>
<span id="cb56-296"><a href="#cb56-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-297"><a href="#cb56-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-298"><a href="#cb56-298" aria-hidden="true" tabindex="-1"></a>You will need to play with the threshold value to get something that looks good. In this case, we're using a threshold of .9 which means that we are only removing the water areas that represent the largest 10 percent of all water geometries in the map.</span>
<span id="cb56-299"><a href="#cb56-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-300"><a href="#cb56-300" aria-hidden="true" tabindex="-1"></a>Let's once again visualize to see what we have here:</span>
<span id="cb56-301"><a href="#cb56-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-304"><a href="#cb56-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-305"><a href="#cb56-305" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-306"><a href="#cb56-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span>
<span id="cb56-307"><a href="#cb56-307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-308"><a href="#cb56-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-309"><a href="#cb56-309" aria-hidden="true" tabindex="-1"></a>We have a bit more definition now.</span>
<span id="cb56-310"><a href="#cb56-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-311"><a href="#cb56-311" aria-hidden="true" tabindex="-1"></a>Before we move on to adding census data to these tracts, let's use them to create a new geometry - county boundaries. Yes, we could download them using tigris, but we actually have all the data we need in our tract files.</span>
<span id="cb56-312"><a href="#cb56-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-313"><a href="#cb56-313" aria-hidden="true" tabindex="-1"></a>One very cool think about the implementation of simple features in R is that tidyverse commands like <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> work on them. What if we group tracts by their county identifier and summarise?</span>
<span id="cb56-314"><a href="#cb56-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-317"><a href="#cb56-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-318"><a href="#cb56-318" aria-hidden="true" tabindex="-1"></a>nyc_co <span class="ot">&lt;-</span> nyc_trt <span class="sc">|&gt;</span> </span>
<span id="cb56-319"><a href="#cb56-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(COUNTYFP) <span class="sc">|&gt;</span> </span>
<span id="cb56-320"><a href="#cb56-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tracts =</span> <span class="fu">n</span>())</span>
<span id="cb56-321"><a href="#cb56-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-322"><a href="#cb56-322" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-323"><a href="#cb56-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="fu">aes</span>(<span class="at">fill =</span> COUNTYFP))</span>
<span id="cb56-324"><a href="#cb56-324" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-325"><a href="#cb56-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-326"><a href="#cb56-326" aria-hidden="true" tabindex="-1"></a>We have now created a custom set of county boundaries for New York City.</span>
<span id="cb56-327"><a href="#cb56-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-328"><a href="#cb56-328" aria-hidden="true" tabindex="-1"></a><span class="fu">### Styling Maps</span></span>
<span id="cb56-329"><a href="#cb56-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-330"><a href="#cb56-330" aria-hidden="true" tabindex="-1"></a>I am a big proponent of making many bad maps so that you can progressively refine your visualization to something effective. Let's think about some key controls for styling our maps.</span>
<span id="cb56-331"><a href="#cb56-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-332"><a href="#cb56-332" aria-hidden="true" tabindex="-1"></a>First, let's start with our base tract data:</span>
<span id="cb56-333"><a href="#cb56-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-336"><a href="#cb56-336" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-337"><a href="#cb56-337" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-338"><a href="#cb56-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt)</span>
<span id="cb56-339"><a href="#cb56-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-340"><a href="#cb56-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-341"><a href="#cb56-341" aria-hidden="true" tabindex="-1"></a>Let's use a theme to remove some of the shading:</span>
<span id="cb56-342"><a href="#cb56-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-345"><a href="#cb56-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-346"><a href="#cb56-346" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-347"><a href="#cb56-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-348"><a href="#cb56-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb56-349"><a href="#cb56-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-350"><a href="#cb56-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-351"><a href="#cb56-351" aria-hidden="true" tabindex="-1"></a>If you don't want the graticules and latitude / longitude markings, you can either use a theme to remove them:</span>
<span id="cb56-352"><a href="#cb56-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-355"><a href="#cb56-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-356"><a href="#cb56-356" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-357"><a href="#cb56-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-358"><a href="#cb56-358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb56-359"><a href="#cb56-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-360"><a href="#cb56-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-361"><a href="#cb56-361" aria-hidden="true" tabindex="-1"></a>Or you can manually remove them this way:</span>
<span id="cb56-362"><a href="#cb56-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-365"><a href="#cb56-365" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-366"><a href="#cb56-366" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-367"><a href="#cb56-367" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-368"><a href="#cb56-368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-369"><a href="#cb56-369" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-370"><a href="#cb56-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-371"><a href="#cb56-371" aria-hidden="true" tabindex="-1"></a>Let's add counties as an overlay:</span>
<span id="cb56-372"><a href="#cb56-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-375"><a href="#cb56-375" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-376"><a href="#cb56-376" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-377"><a href="#cb56-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-378"><a href="#cb56-378" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co) <span class="sc">+</span></span>
<span id="cb56-379"><a href="#cb56-379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-380"><a href="#cb56-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-381"><a href="#cb56-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-382"><a href="#cb56-382" aria-hidden="true" tabindex="-1"></a>Hmm - where's our tracts? We can see our counties, but tracts are underneath! Let's remove the fill from the counties file so we can see the tracts underneath:</span>
<span id="cb56-383"><a href="#cb56-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-386"><a href="#cb56-386" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-387"><a href="#cb56-387" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-388"><a href="#cb56-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-389"><a href="#cb56-389" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb56-390"><a href="#cb56-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-391"><a href="#cb56-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-392"><a href="#cb56-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-393"><a href="#cb56-393" aria-hidden="true" tabindex="-1"></a>Now we can see the tracts, but what about our counties? Let's use color to differentiate?</span>
<span id="cb56-394"><a href="#cb56-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-397"><a href="#cb56-397" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-398"><a href="#cb56-398" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-399"><a href="#cb56-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-400"><a href="#cb56-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb56-401"><a href="#cb56-401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-402"><a href="#cb56-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-403"><a href="#cb56-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-404"><a href="#cb56-404" aria-hidden="true" tabindex="-1"></a>Ok - now we can see the counties. Why don't we try to make the line weight heavier on the county outlines to create more hierarchy here.</span>
<span id="cb56-405"><a href="#cb56-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-408"><a href="#cb56-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-409"><a href="#cb56-409" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-410"><a href="#cb56-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt) <span class="sc">+</span></span>
<span id="cb56-411"><a href="#cb56-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb56-412"><a href="#cb56-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-413"><a href="#cb56-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-414"><a href="#cb56-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-415"><a href="#cb56-415" aria-hidden="true" tabindex="-1"></a>A little thicker. Why don't we also decrease the line weight of the tracts to help differentiate more?</span>
<span id="cb56-416"><a href="#cb56-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-419"><a href="#cb56-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-420"><a href="#cb56-420" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-421"><a href="#cb56-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt, <span class="at">cex =</span> .<span class="dv">1</span>) <span class="sc">+</span> <span class="co"># Decrease the line weight to differentiate</span></span>
<span id="cb56-422"><a href="#cb56-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> .<span class="dv">7</span>)<span class="sc">+</span> <span class="co"># Increase the line weight to differentiate</span></span>
<span id="cb56-423"><a href="#cb56-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>)</span>
<span id="cb56-424"><a href="#cb56-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-425"><a href="#cb56-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-426"><a href="#cb56-426" aria-hidden="true" tabindex="-1"></a>That's starting to look better. Maybe now we can try again but using only gray lines:</span>
<span id="cb56-427"><a href="#cb56-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-430"><a href="#cb56-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-431"><a href="#cb56-431" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-432"><a href="#cb56-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_trt, <span class="at">cex =</span> .<span class="dv">1</span>, <span class="at">color =</span> <span class="st">"gray70"</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span> <span class="co"># Decrease the line weight to differentiate</span></span>
<span id="cb56-433"><a href="#cb56-433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nyc_co, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">cex =</span> .<span class="dv">6</span>)<span class="sc">+</span> <span class="co"># Increase the line weight to differentiate</span></span>
<span id="cb56-434"><a href="#cb56-434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb56-435"><a href="#cb56-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb56-436"><a href="#cb56-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-437"><a href="#cb56-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-438"><a href="#cb56-438" aria-hidden="true" tabindex="-1"></a>Let's consider this "styled' enough for now...</span>
<span id="cb56-439"><a href="#cb56-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-440"><a href="#cb56-440" aria-hidden="true" tabindex="-1"></a><span class="fu">## Downloading Census Data</span></span>
<span id="cb56-441"><a href="#cb56-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-442"><a href="#cb56-442" aria-hidden="true" tabindex="-1"></a>For the purposes of our example, we'll examine racial segregation in New York City. Let's start by downloading and preparing data on race for New York City.</span>
<span id="cb56-443"><a href="#cb56-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-444"><a href="#cb56-444" aria-hidden="true" tabindex="-1"></a><span class="fu">### Get Tract Boundaries</span></span>
<span id="cb56-445"><a href="#cb56-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-446"><a href="#cb56-446" aria-hidden="true" tabindex="-1"></a>Let's download 2020 census tract boundaries for New York City's five Boroughs. While we're at it, we'll clean them up a little bit.</span>
<span id="cb56-447"><a href="#cb56-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-448"><a href="#cb56-448" aria-hidden="true" tabindex="-1"></a>| FIPS Code | County Name     | Borough Name  |</span>
<span id="cb56-449"><a href="#cb56-449" aria-hidden="true" tabindex="-1"></a>|-----------|-----------------|---------------|</span>
<span id="cb56-450"><a href="#cb56-450" aria-hidden="true" tabindex="-1"></a>| 36047     | Kings County    | Brooklyn      |</span>
<span id="cb56-451"><a href="#cb56-451" aria-hidden="true" tabindex="-1"></a>| 36005     | Bronx County    | Bronx         |</span>
<span id="cb56-452"><a href="#cb56-452" aria-hidden="true" tabindex="-1"></a>| 36081     | Queens County   | Queens        |</span>
<span id="cb56-453"><a href="#cb56-453" aria-hidden="true" tabindex="-1"></a>| 36085     | Richmond County | Staten Island |</span>
<span id="cb56-454"><a href="#cb56-454" aria-hidden="true" tabindex="-1"></a>| 36061     | New York County | Manhattan     |</span>
<span id="cb56-455"><a href="#cb56-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-456"><a href="#cb56-456" aria-hidden="true" tabindex="-1"></a>: New York City Boroughs</span>
<span id="cb56-457"><a href="#cb56-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-460"><a href="#cb56-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-461"><a href="#cb56-461" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-462"><a href="#cb56-462" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-463"><a href="#cb56-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-464"><a href="#cb56-464" aria-hidden="true" tabindex="-1"></a>nyc_trt <span class="ot">&lt;-</span> <span class="fu">tracts</span>(<span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"005"</span>, <span class="st">"047"</span>, <span class="st">"061"</span>, <span class="st">"081"</span>, <span class="st">"085"</span>), <span class="at">year =</span> <span class="dv">2020</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-465"><a href="#cb56-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">26918</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-466"><a href="#cb56-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ALAND <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-467"><a href="#cb56-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">erase_water</span>(<span class="at">area_threshold =</span> .<span class="dv">9</span>, <span class="at">year =</span> <span class="dv">2020</span>)</span>
<span id="cb56-468"><a href="#cb56-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-469"><a href="#cb56-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-470"><a href="#cb56-470" aria-hidden="true" tabindex="-1"></a>The code above is accomplishing the following things:</span>
<span id="cb56-471"><a href="#cb56-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-472"><a href="#cb56-472" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Download tract-level census geometries as a simple features object for Kings, Bronx, Queens, Richmond, and New York Counties for the year 2020.</span>
<span id="cb56-473"><a href="#cb56-473" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Transform these geometries to the NAD 1983 coordinate reference system.</span>
<span id="cb56-474"><a href="#cb56-474" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Remove those defined tract boundaries with no land area.</span>
<span id="cb56-475"><a href="#cb56-475" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Erase the portion of tract boundaries that are water, focusing on the top 10 percent of largest defined water polygons, and using hydrography defined by the census in 2020.</span>
<span id="cb56-476"><a href="#cb56-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-477"><a href="#cb56-477" aria-hidden="true" tabindex="-1"></a>Let's use <span class="in">`ggplot()`</span> to visualize so that we can confirm what we've downloaded is indeed New York City's boroughs:</span>
<span id="cb56-478"><a href="#cb56-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-481"><a href="#cb56-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-482"><a href="#cb56-482" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-483"><a href="#cb56-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_trt)</span>
<span id="cb56-484"><a href="#cb56-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-485"><a href="#cb56-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-486"><a href="#cb56-486" aria-hidden="true" tabindex="-1"></a><span class="fu">### Get ACS Data</span></span>
<span id="cb56-487"><a href="#cb56-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-488"><a href="#cb56-488" aria-hidden="true" tabindex="-1"></a>Next, we'll download ACS data on race for New York City. We'll focus on 2020 data from the 5-year ACS from Table <span class="co">[</span><span class="ot">B03002</span><span class="co">](https://data.census.gov/table?q=B03002)</span>.</span>
<span id="cb56-489"><a href="#cb56-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-490"><a href="#cb56-490" aria-hidden="true" tabindex="-1"></a>To keep things organized, let's define the variables we want to download. Note that we're defining variable names as well as values. To facilitate some of our later operations, let's download these data in *wide* format rather than *tidy* format. In wide format, we'll have one observation (row) for each census tract, with multiple columns containing estimates for each population subgroup and the total population.</span>
<span id="cb56-491"><a href="#cb56-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-494"><a href="#cb56-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-495"><a href="#cb56-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-496"><a href="#cb56-496" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-497"><a href="#cb56-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-498"><a href="#cb56-498" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb56-499"><a href="#cb56-499" aria-hidden="true" tabindex="-1"></a>  <span class="at">White =</span> <span class="st">"B03002_003"</span>,</span>
<span id="cb56-500"><a href="#cb56-500" aria-hidden="true" tabindex="-1"></a>  <span class="at">Black =</span> <span class="st">"B03002_004"</span>,</span>
<span id="cb56-501"><a href="#cb56-501" aria-hidden="true" tabindex="-1"></a>  <span class="at">Native =</span> <span class="st">"B03002_005"</span>,</span>
<span id="cb56-502"><a href="#cb56-502" aria-hidden="true" tabindex="-1"></a>  <span class="at">Asian =</span> <span class="st">"B03002_006"</span>,</span>
<span id="cb56-503"><a href="#cb56-503" aria-hidden="true" tabindex="-1"></a>  <span class="at">HIPI =</span> <span class="st">"B03002_007"</span>,</span>
<span id="cb56-504"><a href="#cb56-504" aria-hidden="true" tabindex="-1"></a>  <span class="at">Hispanic =</span> <span class="st">"B03002_012"</span>,</span>
<span id="cb56-505"><a href="#cb56-505" aria-hidden="true" tabindex="-1"></a>  <span class="at">Poptot =</span> <span class="st">"B03002_001"</span></span>
<span id="cb56-506"><a href="#cb56-506" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-507"><a href="#cb56-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-508"><a href="#cb56-508" aria-hidden="true" tabindex="-1"></a><span class="co"># Our tidycensus download call:</span></span>
<span id="cb56-509"><a href="#cb56-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-510"><a href="#cb56-510" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb56-511"><a href="#cb56-511" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb56-512"><a href="#cb56-512" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb56-513"><a href="#cb56-513" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb56-514"><a href="#cb56-514" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb56-515"><a href="#cb56-515" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb56-516"><a href="#cb56-516" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb56-517"><a href="#cb56-517" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb56-518"><a href="#cb56-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-519"><a href="#cb56-519" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-520"><a href="#cb56-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-521"><a href="#cb56-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-522"><a href="#cb56-522" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-523"><a href="#cb56-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-524"><a href="#cb56-524" aria-hidden="true" tabindex="-1"></a>Note that this code defines the list of specific variables to download (rather than a whole table), asks tidycensus to download the data, and labels each column with the label we have defined (with E and M denoting estimates and margins of error because this is sample-based data).</span>
<span id="cb56-525"><a href="#cb56-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-526"><a href="#cb56-526" aria-hidden="true" tabindex="-1"></a>While we're at it, let's separate our tract name label into separate tract, county, and state values.</span>
<span id="cb56-527"><a href="#cb56-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-530"><a href="#cb56-530" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-531"><a href="#cb56-531" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="ot">&lt;-</span> nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-532"><a href="#cb56-532" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(NAME, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Tract"</span>, <span class="st">"County"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">", "</span>)</span>
<span id="cb56-533"><a href="#cb56-533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-534"><a href="#cb56-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-535"><a href="#cb56-535" aria-hidden="true" tabindex="-1"></a>Note the use of <span class="in">`sep = ", "`</span> includes the space after the comma so we don't have an extra space in our resulting county and state variables.</span>
<span id="cb56-536"><a href="#cb56-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-537"><a href="#cb56-537" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create County Summaries</span></span>
<span id="cb56-538"><a href="#cb56-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-539"><a href="#cb56-539" aria-hidden="true" tabindex="-1"></a>Before we further manipulate our data, let's aggregate the data we have to form county population summaries. Because our tract data is hierarchical, we can sum up our population estimates from tracts to counties to produce county population totals. While we're at it, we'll also use the county FIPS codes to create a Borough identifier (we could also add county labels back as well).</span>
<span id="cb56-540"><a href="#cb56-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-543"><a href="#cb56-543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-544"><a href="#cb56-544" aria-hidden="true" tabindex="-1"></a>nyc_race_co <span class="ot">&lt;-</span></span>
<span id="cb56-545"><a href="#cb56-545" aria-hidden="true" tabindex="-1"></a>  nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-546"><a href="#cb56-546" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>, <span class="dv">5</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-547"><a href="#cb56-547" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-548"><a href="#cb56-548" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteE =</span> <span class="fu">sum</span>(WhiteE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-549"><a href="#cb56-549" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteM =</span> <span class="fu">moe_sum</span>(WhiteM, WhiteE),</span>
<span id="cb56-550"><a href="#cb56-550" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackE =</span> <span class="fu">sum</span>(BlackE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-551"><a href="#cb56-551" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackM =</span> <span class="fu">moe_sum</span>(BlackM, BlackE),</span>
<span id="cb56-552"><a href="#cb56-552" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_NativeE =</span> <span class="fu">sum</span>(NativeE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-553"><a href="#cb56-553" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_NativeM =</span> <span class="fu">moe_sum</span>(NativeM, NativeE),</span>
<span id="cb56-554"><a href="#cb56-554" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianE =</span> <span class="fu">sum</span>(AsianE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-555"><a href="#cb56-555" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianM =</span> <span class="fu">moe_sum</span>(AsianM, AsianE),</span>
<span id="cb56-556"><a href="#cb56-556" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HIPIE =</span> <span class="fu">sum</span>(HIPIE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-557"><a href="#cb56-557" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HIPIM =</span> <span class="fu">moe_sum</span>(HIPIM, HIPIE),</span>
<span id="cb56-558"><a href="#cb56-558" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicE =</span> <span class="fu">sum</span>(HispanicE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-559"><a href="#cb56-559" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicM =</span> <span class="fu">moe_sum</span>(HispanicM, HispanicE),</span>
<span id="cb56-560"><a href="#cb56-560" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotE =</span> <span class="fu">sum</span>(PoptotE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-561"><a href="#cb56-561" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotM =</span> <span class="fu">moe_sum</span>(PoptotM, PoptotE),</span>
<span id="cb56-562"><a href="#cb56-562" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb56-563"><a href="#cb56-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Borough =</span></span>
<span id="cb56-564"><a href="#cb56-564" aria-hidden="true" tabindex="-1"></a>    <span class="fu">case_when</span>(</span>
<span id="cb56-565"><a href="#cb56-565" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36005"</span> <span class="sc">~</span> <span class="st">"Bronx"</span>,</span>
<span id="cb56-566"><a href="#cb56-566" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36047"</span> <span class="sc">~</span> <span class="st">"Brooklyn"</span>,</span>
<span id="cb56-567"><a href="#cb56-567" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36061"</span> <span class="sc">~</span> <span class="st">"Manhattan"</span>,</span>
<span id="cb56-568"><a href="#cb56-568" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36081"</span> <span class="sc">~</span> <span class="st">"Queens"</span>,</span>
<span id="cb56-569"><a href="#cb56-569" aria-hidden="true" tabindex="-1"></a>      STCO <span class="sc">==</span> <span class="st">"36085"</span> <span class="sc">~</span> <span class="st">"Staten Island"</span>)</span>
<span id="cb56-570"><a href="#cb56-570" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-571"><a href="#cb56-571" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-572"><a href="#cb56-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-573"><a href="#cb56-573" aria-hidden="true" tabindex="-1"></a>Let's walk through this:</span>
<span id="cb56-574"><a href="#cb56-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-575"><a href="#cb56-575" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>We are going to use <span class="in">`group_by()`</span> to aggregate our tract-level data to counties. In this case, we are pulling out the first five digits from the combined state-county-tract FIPS code (<span class="in">`substr(GEOID, 0, 5)`</span>) using the <span class="in">`substr()`</span> command from the stringr package. This allows us to create a combined state and county FIPS code (the state is the first two digits - 36 in the case of New York - and the county is the next three digits).</span>
<span id="cb56-576"><a href="#cb56-576" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>We use <span class="in">`summarise()`</span> to create summary values for counties. We use <span class="in">`sum()`</span> on our population estimates to sum up populations for tracts into county totals. We use <span class="in">`moe_sum()`</span> from the <span class="in">`tidycensus()`</span> package to properly aggregate margins of error accounting for the size of the population estimate being aggregated. The census provides <span class="co">[</span><span class="ot">documentation</span><span class="co">](https://www2.census.gov/programs-surveys/acs/tech_docs/accuracy/MultiyearACSAccuracyofData2015.pdf)</span> on what's implemented in tidycensus. We denote that these are county estimates by including <span class="in">`co_`</span> as a prefix - you'll see why later.</span>
<span id="cb56-577"><a href="#cb56-577" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>We use <span class="in">`case_when()`</span> construct borough labels from our combined state and county FIPS codes.</span>
<span id="cb56-578"><a href="#cb56-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-579"><a href="#cb56-579" aria-hidden="true" tabindex="-1"></a>As a result, we have a table containing county populations and margins of error for the boroughs of New York City:</span>
<span id="cb56-580"><a href="#cb56-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-583"><a href="#cb56-583" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-584"><a href="#cb56-584" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb56-585"><a href="#cb56-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-586"><a href="#cb56-586" aria-hidden="true" tabindex="-1"></a>nyc_race_co <span class="sc">|&gt;</span> </span>
<span id="cb56-587"><a href="#cb56-587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-588"><a href="#cb56-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span>
<span id="cb56-589"><a href="#cb56-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-590"><a href="#cb56-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-591"><a href="#cb56-591" aria-hidden="true" tabindex="-1"></a>Let's create a more polished table showing the population by race for each NYC Borough:</span>
<span id="cb56-592"><a href="#cb56-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-595"><a href="#cb56-595" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-596"><a href="#cb56-596" aria-hidden="true" tabindex="-1"></a>nyc_race_co <span class="sc">|&gt;</span> </span>
<span id="cb56-597"><a href="#cb56-597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">other =</span> co_NativeE<span class="sc">+</span>co_HIPIE) <span class="sc">|&gt;</span> </span>
<span id="cb56-598"><a href="#cb56-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Borough, co_WhiteE, co_BlackE, co_AsianE, co_HispanicE, other, co_PoptotE) <span class="sc">|&gt;</span> </span>
<span id="cb56-599"><a href="#cb56-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-600"><a href="#cb56-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-601"><a href="#cb56-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb56-602"><a href="#cb56-602" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_WhiteE =</span> <span class="st">"White"</span>,</span>
<span id="cb56-603"><a href="#cb56-603" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_BlackE =</span> <span class="st">"Black"</span>,</span>
<span id="cb56-604"><a href="#cb56-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_AsianE =</span> <span class="st">"Asian"</span>,</span>
<span id="cb56-605"><a href="#cb56-605" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_HispanicE =</span> <span class="st">"Hispanic"</span>,</span>
<span id="cb56-606"><a href="#cb56-606" aria-hidden="true" tabindex="-1"></a>    <span class="at">other =</span> <span class="st">"Other"</span>,</span>
<span id="cb56-607"><a href="#cb56-607" aria-hidden="true" tabindex="-1"></a>    <span class="at">co_PoptotE =</span> <span class="st">"Total"</span></span>
<span id="cb56-608"><a href="#cb56-608" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-609"><a href="#cb56-609" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-610"><a href="#cb56-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-611"><a href="#cb56-611" aria-hidden="true" tabindex="-1"></a>Note the strategic use of an "Other" category which combines the Native American and Hawaiian Island and Pacific Islander categories.</span>
<span id="cb56-612"><a href="#cb56-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-613"><a href="#cb56-613" aria-hidden="true" tabindex="-1"></a><span class="fu">### Setup Summary</span></span>
<span id="cb56-614"><a href="#cb56-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-615"><a href="#cb56-615" aria-hidden="true" tabindex="-1"></a>We now have three resources available to us:</span>
<span id="cb56-616"><a href="#cb56-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-617"><a href="#cb56-617" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>nyc_race: ACS data on race for all tracts in New York City.</span>
<span id="cb56-618"><a href="#cb56-618" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>nyc_race_co: ACS data on race for all counties in New York City.</span>
<span id="cb56-619"><a href="#cb56-619" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>nyc_trt: Tract geometry data for all tracts in New York City.</span>
<span id="cb56-620"><a href="#cb56-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-621"><a href="#cb56-621" aria-hidden="true" tabindex="-1"></a>These three pieces of information can form the basis for manipulation and analysis of dimensions of racial segregation in New York City.</span>
<span id="cb56-622"><a href="#cb56-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-623"><a href="#cb56-623" aria-hidden="true" tabindex="-1"></a>Let's now turn towards the measures of segregation.</span>
<span id="cb56-624"><a href="#cb56-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-625"><a href="#cb56-625" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dissimilarity</span></span>
<span id="cb56-626"><a href="#cb56-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-627"><a href="#cb56-627" aria-hidden="true" tabindex="-1"></a>*Dissimilarity* is a common measure of *evenness* between two populations - dissimilarity measures the distribution of a minority population within a majority population. Conceptually, dissimilarity measures the proportion of that minority or subgroup population that would need to move in order to be equally distributed with the majority population. A dissimilarity score of 0 would mean a completely even distribution of a minority population amongst a majority population (no segregation). A dissimilarity score of 100 would mean a completely segregated minority population (100 percent of the minority population would need to move to achieve an even distribution amongst the population. Dissimilarity is calculated as follows:</span>
<span id="cb56-628"><a href="#cb56-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-629"><a href="#cb56-629" aria-hidden="true" tabindex="-1"></a>$D = .5*\sum_i |\frac{b_i}{B}-\frac{w_i}{W}|$</span>
<span id="cb56-630"><a href="#cb56-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-631"><a href="#cb56-631" aria-hidden="true" tabindex="-1"></a>where $b_i$ is the number of blacks in tract *i*</span>
<span id="cb56-632"><a href="#cb56-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-633"><a href="#cb56-633" aria-hidden="true" tabindex="-1"></a>$B$ is the number of blacks for the county</span>
<span id="cb56-634"><a href="#cb56-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-635"><a href="#cb56-635" aria-hidden="true" tabindex="-1"></a>$w_i$ is the number of whites in tract *i*</span>
<span id="cb56-636"><a href="#cb56-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-637"><a href="#cb56-637" aria-hidden="true" tabindex="-1"></a>$W$ is the number of whites for the county</span>
<span id="cb56-638"><a href="#cb56-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-639"><a href="#cb56-639" aria-hidden="true" tabindex="-1"></a>Now that we know the formula, we can start thinking about how to implement this in R with dplyr.</span>
<span id="cb56-640"><a href="#cb56-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-641"><a href="#cb56-641" aria-hidden="true" tabindex="-1"></a><span class="fu">### Black-White Dissimilarity</span></span>
<span id="cb56-642"><a href="#cb56-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-643"><a href="#cb56-643" aria-hidden="true" tabindex="-1"></a>This looks complicated, but we can actually do this fairly simply with dplyr notation. Let's start off by calculating Black-White dissimilarity.</span>
<span id="cb56-644"><a href="#cb56-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-645"><a href="#cb56-645" aria-hidden="true" tabindex="-1"></a>We have our white and black tract population data already in our il_trt data, and we have our county data in a separate object. Let's go ahead and join that county data to our tract data.</span>
<span id="cb56-646"><a href="#cb56-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-649"><a href="#cb56-649" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-650"><a href="#cb56-650" aria-hidden="true" tabindex="-1"></a>nyc_race<span class="ot">&lt;-</span><span class="fu">left_join</span>(nyc_race <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>,<span class="dv">5</span>)), nyc_race_co, <span class="at">by=</span> <span class="st">"STCO"</span>)</span>
<span id="cb56-651"><a href="#cb56-651" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-652"><a href="#cb56-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-653"><a href="#cb56-653" aria-hidden="true" tabindex="-1"></a>Notice that this join looks pretty standard with the exception of <span class="in">`nyc_race |&gt; mutate(STCO = substr(GEOID, 0,5))`</span>. When we created our county-level summaries of the tract-level data, we created a new variable called STCO which is the combined city and county FIPS codes. In order to join those data to our tract data, we need to temporarily create the same code from our GEOID field in the tract data. The mutate statement temporarily creates the STCO column in the nyc_race data, and the join can be performed denoting the common column, STCO.</span>
<span id="cb56-654"><a href="#cb56-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-655"><a href="#cb56-655" aria-hidden="true" tabindex="-1"></a>Now that we've joined these together, we can start breaking down the dissimilarity formula into code-able pieces. Inside the absolute value we are calculating fractions of tract minority and majority populations compared to their county. We then subtract these from each other and use <span class="in">`abs()`</span> to find the absolute value. After that, we need to sum these all up and multiply by .5. We are calculating these by county, so we can use group_by() to sum up only the data for each county to produce a series of final dissimilarity statistics for each county in New York City. For other regions, you might end up calculating dissimilarity for multiple counties within a region.</span>
<span id="cb56-656"><a href="#cb56-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-659"><a href="#cb56-659" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-660"><a href="#cb56-660" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span></span>
<span id="cb56-661"><a href="#cb56-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_wb =</span> <span class="fu">abs</span>(BlackE <span class="sc">/</span> co_BlackE <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span>  </span>
<span id="cb56-662"><a href="#cb56-662" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb56-663"><a href="#cb56-663" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_wb)) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span>
<span id="cb56-664"><a href="#cb56-664" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-665"><a href="#cb56-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-666"><a href="#cb56-666" aria-hidden="true" tabindex="-1"></a>How would you interpret these black-white dissimilarity values? Where is Black-White dissimilarity the highest within the region? Where is it the lowest?</span>
<span id="cb56-667"><a href="#cb56-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-668"><a href="#cb56-668" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nonwhite-White Dissimilarity</span></span>
<span id="cb56-669"><a href="#cb56-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-672"><a href="#cb56-672" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-673"><a href="#cb56-673" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span></span>
<span id="cb56-674"><a href="#cb56-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_nww =</span> <span class="fu">abs</span>((PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> (co_PoptotE<span class="sc">-</span>co_WhiteE) <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span> </span>
<span id="cb56-675"><a href="#cb56-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span> </span>
<span id="cb56-676"><a href="#cb56-676" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_nww)) <span class="sc">|&gt;</span> </span>
<span id="cb56-677"><a href="#cb56-677" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-678"><a href="#cb56-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-679"><a href="#cb56-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-680"><a href="#cb56-680" aria-hidden="true" tabindex="-1"></a>Compare and contrast this with Black-White dissimilarity - what do you observe?</span>
<span id="cb56-681"><a href="#cb56-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-682"><a href="#cb56-682" aria-hidden="true" tabindex="-1"></a><span class="fu">## Latino-White Dissimilarity</span></span>
<span id="cb56-683"><a href="#cb56-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-686"><a href="#cb56-686" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-687"><a href="#cb56-687" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span> </span>
<span id="cb56-688"><a href="#cb56-688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dissim_lw =</span> <span class="fu">abs</span>(HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">-</span> WhiteE <span class="sc">/</span> co_WhiteE)) <span class="sc">|&gt;</span> </span>
<span id="cb56-689"><a href="#cb56-689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb56-690"><a href="#cb56-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dissimilarity =</span> .<span class="dv">5</span><span class="sc">*</span><span class="fu">sum</span>(dissim_lw)) <span class="sc">|&gt;</span> </span>
<span id="cb56-691"><a href="#cb56-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-692"><a href="#cb56-692" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-693"><a href="#cb56-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-694"><a href="#cb56-694" aria-hidden="true" tabindex="-1"></a>Compare and contrast this with Black-White dissimilarity - what do you observe?</span>
<span id="cb56-695"><a href="#cb56-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-696"><a href="#cb56-696" aria-hidden="true" tabindex="-1"></a><span class="fu"># Interaction</span></span>
<span id="cb56-697"><a href="#cb56-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-698"><a href="#cb56-698" aria-hidden="true" tabindex="-1"></a>A second common measure of segregation is *interaction* which is a measure of *exposure*. Interaction measures the likelihood of population subgroups interacting with one another based upon their distribution within areal sub units (tracts). For instance, Black-White interaction is calculated as follows:</span>
<span id="cb56-699"><a href="#cb56-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-700"><a href="#cb56-700" aria-hidden="true" tabindex="-1"></a>$Interaction = \sum_i\frac{b_i}{B}*\frac{w_i}{t_i}$</span>
<span id="cb56-701"><a href="#cb56-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-702"><a href="#cb56-702" aria-hidden="true" tabindex="-1"></a>Where</span>
<span id="cb56-703"><a href="#cb56-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-704"><a href="#cb56-704" aria-hidden="true" tabindex="-1"></a>$b_i$ is the Black population of tract *i*</span>
<span id="cb56-705"><a href="#cb56-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-706"><a href="#cb56-706" aria-hidden="true" tabindex="-1"></a>$B$ is the Black population of the county</span>
<span id="cb56-707"><a href="#cb56-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-708"><a href="#cb56-708" aria-hidden="true" tabindex="-1"></a>$w_i$ is the White population of tract *i*</span>
<span id="cb56-709"><a href="#cb56-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-710"><a href="#cb56-710" aria-hidden="true" tabindex="-1"></a>$t_i$ is the total population of tract *i*</span>
<span id="cb56-711"><a href="#cb56-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-712"><a href="#cb56-712" aria-hidden="true" tabindex="-1"></a>Given that there are some similarities to the dissimilarity index, modify your existing code to measure Black White interaction for counties in the New York City:</span>
<span id="cb56-713"><a href="#cb56-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-716"><a href="#cb56-716" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-717"><a href="#cb56-717" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-718"><a href="#cb56-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> ((BlackE <span class="sc">/</span> co_BlackE) <span class="sc">*</span> (WhiteE <span class="sc">/</span> PoptotE))) <span class="sc">|&gt;</span> </span>
<span id="cb56-719"><a href="#cb56-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb56-720"><a href="#cb56-720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-721"><a href="#cb56-721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-722"><a href="#cb56-722" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-723"><a href="#cb56-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-724"><a href="#cb56-724" aria-hidden="true" tabindex="-1"></a>The output here is actually a *probability* that ranges from 0 to 1. A value closer to 1 indicates a higher probability of there being contact between these two population groups. A value closer to 0 indicates lower probabilities of contact.</span>
<span id="cb56-725"><a href="#cb56-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-726"><a href="#cb56-726" aria-hidden="true" tabindex="-1"></a>Provide your interpretation of Black-White Interaction for New York City boroughs.</span>
<span id="cb56-727"><a href="#cb56-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-728"><a href="#cb56-728" aria-hidden="true" tabindex="-1"></a><span class="fu">### Nonwhite-White Interaction</span></span>
<span id="cb56-729"><a href="#cb56-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-732"><a href="#cb56-732" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-733"><a href="#cb56-733" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-734"><a href="#cb56-734" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> ((PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> (co_PoptotE<span class="sc">-</span>co_WhiteE) <span class="sc">*</span> WhiteE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb56-735"><a href="#cb56-735" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb56-736"><a href="#cb56-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-737"><a href="#cb56-737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-738"><a href="#cb56-738" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-739"><a href="#cb56-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-740"><a href="#cb56-740" aria-hidden="true" tabindex="-1"></a><span class="fu">### Latino-White Interaction</span></span>
<span id="cb56-741"><a href="#cb56-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-744"><a href="#cb56-744" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-745"><a href="#cb56-745" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-746"><a href="#cb56-746" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interaction_bw =</span> (HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">*</span> WhiteE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb56-747"><a href="#cb56-747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb56-748"><a href="#cb56-748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">interaction =</span> <span class="fu">sum</span>(interaction_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-749"><a href="#cb56-749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-750"><a href="#cb56-750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-751"><a href="#cb56-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-752"><a href="#cb56-752" aria-hidden="true" tabindex="-1"></a>How would you interpret Black-White, Non-White White, and Latino-White interaction jointly?</span>
<span id="cb56-753"><a href="#cb56-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-754"><a href="#cb56-754" aria-hidden="true" tabindex="-1"></a><span class="fu"># Isolation</span></span>
<span id="cb56-755"><a href="#cb56-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-756"><a href="#cb56-756" aria-hidden="true" tabindex="-1"></a>The final measure of racial segregation we'll look at in this lab is *isolation* which is only measured for one group at a time. Isolation measures the likelihood of contact for a subgroup with other subgroup members. It is interpreted similarly to Interaction (as a probability ranging from 0 to 1):</span>
<span id="cb56-757"><a href="#cb56-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-758"><a href="#cb56-758" aria-hidden="true" tabindex="-1"></a>Isolation for Blacks</span>
<span id="cb56-759"><a href="#cb56-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-760"><a href="#cb56-760" aria-hidden="true" tabindex="-1"></a>$Isolation = \sum_i\frac{b_i}{B}*\frac{b_i}{t_i}$</span>
<span id="cb56-761"><a href="#cb56-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-762"><a href="#cb56-762" aria-hidden="true" tabindex="-1"></a>Where</span>
<span id="cb56-763"><a href="#cb56-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-764"><a href="#cb56-764" aria-hidden="true" tabindex="-1"></a>$b_i$ is the Black population of tract *i*</span>
<span id="cb56-765"><a href="#cb56-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-766"><a href="#cb56-766" aria-hidden="true" tabindex="-1"></a>$B$ is the Black population of the county</span>
<span id="cb56-767"><a href="#cb56-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-768"><a href="#cb56-768" aria-hidden="true" tabindex="-1"></a>$t_i$ is the total population of tract *i*</span>
<span id="cb56-769"><a href="#cb56-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-770"><a href="#cb56-770" aria-hidden="true" tabindex="-1"></a><span class="fu">### Black Isolation</span></span>
<span id="cb56-771"><a href="#cb56-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-772"><a href="#cb56-772" aria-hidden="true" tabindex="-1"></a>Let's calculate Black Isolation:</span>
<span id="cb56-773"><a href="#cb56-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-776"><a href="#cb56-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-777"><a href="#cb56-777" aria-hidden="true" tabindex="-1"></a>nyc_race  <span class="sc">|&gt;</span></span>
<span id="cb56-778"><a href="#cb56-778" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> (BlackE <span class="sc">/</span> co_BlackE <span class="sc">*</span> BlackE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb56-779"><a href="#cb56-779" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span>  </span>
<span id="cb56-780"><a href="#cb56-780" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-781"><a href="#cb56-781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-782"><a href="#cb56-782" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-783"><a href="#cb56-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-784"><a href="#cb56-784" aria-hidden="true" tabindex="-1"></a>You know what comes next. Let's calculate Nonwhite Isolation and Latino Isolation and interpret what you see.</span>
<span id="cb56-785"><a href="#cb56-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-786"><a href="#cb56-786" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nonwhite Isolation</span></span>
<span id="cb56-787"><a href="#cb56-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-790"><a href="#cb56-790" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-791"><a href="#cb56-791" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-792"><a href="#cb56-792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> ((PoptotE <span class="sc">-</span> WhiteE) <span class="sc">/</span> (co_PoptotE <span class="sc">-</span> co_WhiteE) <span class="sc">*</span> (PoptotE<span class="sc">-</span>WhiteE) <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span> </span>
<span id="cb56-793"><a href="#cb56-793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span> </span>
<span id="cb56-794"><a href="#cb56-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-795"><a href="#cb56-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-796"><a href="#cb56-796" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-797"><a href="#cb56-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-798"><a href="#cb56-798" aria-hidden="true" tabindex="-1"></a><span class="fu">## Latino Isolation</span></span>
<span id="cb56-799"><a href="#cb56-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-802"><a href="#cb56-802" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-803"><a href="#cb56-803" aria-hidden="true" tabindex="-1"></a>nyc_race <span class="sc">|&gt;</span> </span>
<span id="cb56-804"><a href="#cb56-804" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">isolation_bw =</span> (HispanicE <span class="sc">/</span> co_HispanicE <span class="sc">*</span> HispanicE <span class="sc">/</span> PoptotE)) <span class="sc">|&gt;</span>  </span>
<span id="cb56-805"><a href="#cb56-805" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">|&gt;</span></span>
<span id="cb56-806"><a href="#cb56-806" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">isolation =</span> <span class="fu">sum</span>(isolation_bw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-807"><a href="#cb56-807" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-808"><a href="#cb56-808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-809"><a href="#cb56-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-810"><a href="#cb56-810" aria-hidden="true" tabindex="-1"></a>Provide your interpretation of how isolation differs for these groups and for each borough.</span>
<span id="cb56-811"><a href="#cb56-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-812"><a href="#cb56-812" aria-hidden="true" tabindex="-1"></a><span class="fu"># Income Inequality</span></span>
<span id="cb56-813"><a href="#cb56-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-814"><a href="#cb56-814" aria-hidden="true" tabindex="-1"></a>While we're at it, let's also pay attention to segregation on the basis of income. A simple measure of income inequality and distribution is to calculate the difference in median income between the county and the census tracts that make up the county.</span>
<span id="cb56-815"><a href="#cb56-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-816"><a href="#cb56-816" aria-hidden="true" tabindex="-1"></a>We have all of our census tract geographic data, but need to go back to census data to download tract and county median household income data (this is not a place to take the average or weighted average of the tract-level data). Let's download and prepare these as a new dataset. Median household income is contained in ACS table <span class="co">[</span><span class="ot">B19013</span><span class="co">](https://data.census.gov/cedsci/table?q=B19013&amp;tid=ACSDT1Y2019.B19013)</span>:</span>
<span id="cb56-817"><a href="#cb56-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-820"><a href="#cb56-820" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-821"><a href="#cb56-821" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-822"><a href="#cb56-822" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-823"><a href="#cb56-823" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-824"><a href="#cb56-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-825"><a href="#cb56-825" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb56-826"><a href="#cb56-826" aria-hidden="true" tabindex="-1"></a>  <span class="at">MHHI =</span> <span class="st">"B19013_001"</span>)</span>
<span id="cb56-827"><a href="#cb56-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-828"><a href="#cb56-828" aria-hidden="true" tabindex="-1"></a><span class="co"># Our tidycensus download call:</span></span>
<span id="cb56-829"><a href="#cb56-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-830"><a href="#cb56-830" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb56-831"><a href="#cb56-831" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"tract"</span>,</span>
<span id="cb56-832"><a href="#cb56-832" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb56-833"><a href="#cb56-833" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb56-834"><a href="#cb56-834" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb56-835"><a href="#cb56-835" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb56-836"><a href="#cb56-836" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb56-837"><a href="#cb56-837" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb56-838"><a href="#cb56-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-839"><a href="#cb56-839" aria-hidden="true" tabindex="-1"></a>dl_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb56-840"><a href="#cb56-840" aria-hidden="true" tabindex="-1"></a>  <span class="at">co_MHHI =</span> <span class="st">"B19013_001"</span>)</span>
<span id="cb56-841"><a href="#cb56-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-842"><a href="#cb56-842" aria-hidden="true" tabindex="-1"></a>nyc_income_co <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(</span>
<span id="cb56-843"><a href="#cb56-843" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb56-844"><a href="#cb56-844" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"NY"</span>,</span>
<span id="cb56-845"><a href="#cb56-845" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="fu">c</span>(<span class="st">"Bronx"</span>, <span class="st">"Kings"</span>, <span class="st">"New York"</span>, <span class="st">"Queens"</span>, <span class="st">"Richmond"</span>),</span>
<span id="cb56-846"><a href="#cb56-846" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> dl_vars,</span>
<span id="cb56-847"><a href="#cb56-847" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb56-848"><a href="#cb56-848" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"wide"</span></span>
<span id="cb56-849"><a href="#cb56-849" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb56-850"><a href="#cb56-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-851"><a href="#cb56-851" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb56-852"><a href="#cb56-852" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-853"><a href="#cb56-853" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-854"><a href="#cb56-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-855"><a href="#cb56-855" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-856"><a href="#cb56-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-857"><a href="#cb56-857" aria-hidden="true" tabindex="-1"></a>Let's also take a look at our county income table:</span>
<span id="cb56-858"><a href="#cb56-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-861"><a href="#cb56-861" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-862"><a href="#cb56-862" aria-hidden="true" tabindex="-1"></a>nyc_income_co <span class="sc">|&gt;</span> </span>
<span id="cb56-863"><a href="#cb56-863" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-864"><a href="#cb56-864" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb56-865"><a href="#cb56-865" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-866"><a href="#cb56-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-867"><a href="#cb56-867" aria-hidden="true" tabindex="-1"></a>And now let's join the two together (again creating our state and county FIPS codes from our combined state, county, and tract FIPS codes):</span>
<span id="cb56-868"><a href="#cb56-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-871"><a href="#cb56-871" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-872"><a href="#cb56-872" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">STCO =</span> <span class="fu">substr</span>(GEOID, <span class="dv">0</span>, <span class="dv">5</span>)), nyc_income_co, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"STCO"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>))</span>
<span id="cb56-873"><a href="#cb56-873" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-874"><a href="#cb56-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-875"><a href="#cb56-875" aria-hidden="true" tabindex="-1"></a>Now we can calculate the ratio of income for our census tract to that of the county:</span>
<span id="cb56-876"><a href="#cb56-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-879"><a href="#cb56-879" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-880"><a href="#cb56-880" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb56-881"><a href="#cb56-881" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inc_ratio =</span> MHHIE <span class="sc">/</span> co_MHHIE)</span>
<span id="cb56-882"><a href="#cb56-882" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-883"><a href="#cb56-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-884"><a href="#cb56-884" aria-hidden="true" tabindex="-1"></a>Now let's map out this income ratio statistic for New York City tracts:</span>
<span id="cb56-885"><a href="#cb56-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-888"><a href="#cb56-888" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-889"><a href="#cb56-889" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income, nyc_trt, <span class="at">by=</span><span class="st">"GEOID"</span>) <span class="sc">|&gt;</span> <span class="fu">st_as_sf</span>()</span>
<span id="cb56-890"><a href="#cb56-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-891"><a href="#cb56-891" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-892"><a href="#cb56-892" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nyc_income, <span class="fu">aes</span>(<span class="at">fill=</span>inc_ratio), <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb56-893"><a href="#cb56-893" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"New York City Borough Income Ratio"</span>, <span class="at">fill =</span> <span class="st">"Income Ratio"</span>)<span class="sc">+</span></span>
<span id="cb56-894"><a href="#cb56-894" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb56-895"><a href="#cb56-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-896"><a href="#cb56-896" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-897"><a href="#cb56-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-898"><a href="#cb56-898" aria-hidden="true" tabindex="-1"></a>What would a ratio of 1 indicate? What would a ratio of 3 indicate? Where do we see big differences?</span>
<span id="cb56-899"><a href="#cb56-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-900"><a href="#cb56-900" aria-hidden="true" tabindex="-1"></a>While we're at it, it might be interesting to create a scatter plot that illustrates the relationship between racial concentration and income. To do this, we'll need to join together our two datasets.</span>
<span id="cb56-901"><a href="#cb56-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-904"><a href="#cb56-904" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-905"><a href="#cb56-905" aria-hidden="true" tabindex="-1"></a>nyc_dataset <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_race, nyc_income <span class="sc">|&gt;</span> <span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>)<span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, MHHIE, MHHIM, co_MHHIE, co_MHHIM, inc_ratio), <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb56-906"><a href="#cb56-906" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-907"><a href="#cb56-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-908"><a href="#cb56-908" aria-hidden="true" tabindex="-1"></a>Let's plot the Percent White on the X axis and the income ratio on the y axis using geom_point):</span>
<span id="cb56-909"><a href="#cb56-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-912"><a href="#cb56-912" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-913"><a href="#cb56-913" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-914"><a href="#cb56-914" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-915"><a href="#cb56-915" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-916"><a href="#cb56-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-917"><a href="#cb56-917" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-918"><a href="#cb56-918" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb56-919"><a href="#cb56-919" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"My Cool Plot"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb56-920"><a href="#cb56-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb56-921"><a href="#cb56-921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb56-922"><a href="#cb56-922" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-923"><a href="#cb56-923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-924"><a href="#cb56-924" aria-hidden="true" tabindex="-1"></a>How would you describe this relationship?</span>
<span id="cb56-925"><a href="#cb56-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-926"><a href="#cb56-926" aria-hidden="true" tabindex="-1"></a>Now see if you can add a linear line of best fit to these data using geom_smooth (you'll need to set <span class="in">`method = lm`</span> to get a fitted linear model):</span>
<span id="cb56-927"><a href="#cb56-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-930"><a href="#cb56-930" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-931"><a href="#cb56-931" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-932"><a href="#cb56-932" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-933"><a href="#cb56-933" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-934"><a href="#cb56-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-935"><a href="#cb56-935" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-936"><a href="#cb56-936" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb56-937"><a href="#cb56-937" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data=</span>nyc_dataset, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb56-938"><a href="#cb56-938" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tract Income Ratio by White Population"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb56-939"><a href="#cb56-939" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb56-940"><a href="#cb56-940" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb56-941"><a href="#cb56-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-942"><a href="#cb56-942" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-943"><a href="#cb56-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-944"><a href="#cb56-944" aria-hidden="true" tabindex="-1"></a>What's the relationship between the percent white population and the income ratio?</span>
<span id="cb56-945"><a href="#cb56-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-946"><a href="#cb56-946" aria-hidden="true" tabindex="-1"></a>What would it look like to split this out by boroughs using *facets*?</span>
<span id="cb56-947"><a href="#cb56-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-950"><a href="#cb56-950" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-951"><a href="#cb56-951" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb56-952"><a href="#cb56-952" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb56-953"><a href="#cb56-953" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb56-954"><a href="#cb56-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-955"><a href="#cb56-955" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb56-956"><a href="#cb56-956" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>nyc_dataset, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb56-957"><a href="#cb56-957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data=</span>nyc_dataset, <span class="at">method =</span> <span class="st">"lm"</span>, <span class="fu">aes</span>(<span class="at">x=</span>(WhiteE<span class="sc">/</span>PoptotE), <span class="at">y=</span>inc_ratio), <span class="at">alpha =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb56-958"><a href="#cb56-958" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tract Income Ratio by White Population"</span>, <span class="at">x =</span> <span class="st">"Percent White"</span>, <span class="at">y =</span> <span class="st">"Income Ratio"</span>) <span class="sc">+</span></span>
<span id="cb56-959"><a href="#cb56-959" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb56-960"><a href="#cb56-960" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb56-961"><a href="#cb56-961" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Borough)</span>
<span id="cb56-962"><a href="#cb56-962" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb56-963"><a href="#cb56-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-964"><a href="#cb56-964" aria-hidden="true" tabindex="-1"></a>How would you describe the differences observed by boroughs?</span>
<span id="cb56-965"><a href="#cb56-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-966"><a href="#cb56-966" aria-hidden="true" tabindex="-1"></a>Congratulations, you have learned some ways to calculate common measures of segregation, and have applied these measures as part of a data pipeline.</span>
<span id="cb56-967"><a href="#cb56-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-968"><a href="#cb56-968" aria-hidden="true" tabindex="-1"></a>By changing your download calls at the very beginning of this lab where you download ACS data, you could easily create segregation measures for other places (note that you would have to re-label some elements where we indicate boroughs which are counties within New York City).</span>
<span id="cb56-969"><a href="#cb56-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-970"><a href="#cb56-970" aria-hidden="true" tabindex="-1"></a><span class="fu"># Extending this Analysis</span></span>
<span id="cb56-971"><a href="#cb56-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-972"><a href="#cb56-972" aria-hidden="true" tabindex="-1"></a>Now that you have some new tools that you are familiar with, start exploring these data more. Make maps for other racial groups. Explore dimensions of segregation for other groups.</span>
<span id="cb56-973"><a href="#cb56-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-974"><a href="#cb56-974" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Can you produce the data which would populate a summary table of minority-majority dissimilarity? Which groups face the highest levels of segregation?</span>
<span id="cb56-975"><a href="#cb56-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-976"><a href="#cb56-976" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>How does income relate to levels of segregation? Think about how you might use the median household income statistic to explore the relationship.</span>
<span id="cb56-977"><a href="#cb56-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-978"><a href="#cb56-978" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>What are other forms of segregation that might be useful to explore (aside from racial and income segregation)?</span>
<span id="cb56-979"><a href="#cb56-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-980"><a href="#cb56-980" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lab Evaluation</span></span>
<span id="cb56-981"><a href="#cb56-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-982"><a href="#cb56-982" aria-hidden="true" tabindex="-1"></a>In evaluating your lab submission, we'll be paying attention to the following:</span>
<span id="cb56-983"><a href="#cb56-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-984"><a href="#cb56-984" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Proper use of tigris tidycensus to download tabular and spatial data from the census bureau.</span>
<span id="cb56-985"><a href="#cb56-985" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Production of clearly-labelled and well-formatted tables.</span>
<span id="cb56-986"><a href="#cb56-986" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Production of well-formatted maps of income inequality.</span>
<span id="cb56-987"><a href="#cb56-987" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Detailed reflection and diagnosis using measure of segregation.</span>
<span id="cb56-988"><a href="#cb56-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-989"><a href="#cb56-989" aria-hidden="true" tabindex="-1"></a>As you get into the lab, please feel welcome to ask us questions, and please share where you're struggling with us and with others in the class.</span>
<span id="cb56-990"><a href="#cb56-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-991"><a href="#cb56-991" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-regular fa-copyright" aria-label="copyright"></i> Andrew J. Greenlee</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a> <br> Website Code on <a href="https://github.com/agreen4/UP570_S24_Website">Github <i class="fa-brands fa-github" aria-label="github"></i></a></div>
  </div>
</footer>



</body></html>
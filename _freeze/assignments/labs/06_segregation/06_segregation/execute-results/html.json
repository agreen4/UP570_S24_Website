{
  "hash": "ce787d507d07c0d2c2c84b8d118609cd",
  "result": {
    "markdown": "---\ntitle: \"Measuring Residential Segregation\"\nsidebar: false\ntoc: true\ntoc-depth: 4\npage-layout: full\nformat: \n  html:\n    code-fold: show\n    code-overflow: wrap\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\nfig-responsive: true\neditor: visual\n---\n\n\n## Introduction\n\nIn this lab, we'll explore some of the common measures of residential segregation and apply them at the city and regional levels.\n\nIn our last lab, we got a basic idea of how to summarize population racial characteristics for census tracts. Now we can start to think about summary measures of the extent to which these groups are segregated within the region. We will use census tracts as a unit of analysis to help us describe county-level racial segregation.\n\nMost measures of residential segregation are set up to summarize the level of heterogeneity (or homogeneity) observed between neighborhoods to a city or regional scale to produce a summary measure that then tells us how even populations are distributed at the neighborhood level.\n\nThere are also some measures that focus more on segregation at a neighborhood level or below. In this lab, we'll focus on those measures that summarize characteristics to more aggregate levels such as cities or regions.\n\n## Goals\n\n-   Gain exposure to common measures of residential segregation.\n-   Learn how to apply simple measures within R / RStudio.\n\n\n\nLet's get going...\n\n## Github Lab Repository\n\nFollow [this link](https://classroom.github.com/a/KR0xhhSw) to accept the lab Github Classroom assignment repository.\n\n## Setup\n\nLet's start as usual by loading the packages that we'll need for our work.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gt)\nlibrary(tigris)\nlibrary(tidycensus)\nlibrary(tidyverse)\nlibrary(sf)\n```\n:::\n\n\n## Two Useful Functions\n\n### Separate\n\nSometimes we may have a variable that we need to separate into based upon a known delimiter. `separate` allows us to do so. Let's explore an example. Here's a table containing information on the name and location of [Big 10](https://btaa.org/about) schools.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInstitution <- c(\n  \"University of Illinois\", \n  \"Indiana University\", \n  \"University of Iowa\", \n  \"University of Maryland\", \n  \"University of Michigan\", \n  \"Michigan State University\", \n  \"University of Minnesota\", \n  \"University of Nebraska-Lincoln\", \n  \"Northwestern University\", \n  \"Ohio State University\", \n  \"Pennsylvania State University\", \n  \"Purdue University\", \n  \"Rutgers University\", \n  \"University of Wisconsin-Madison\")\n\nLocation <- c(\n  \"Champaign, Champaign County, Illinois\",\n  \"Bloomington, Monroe County, Indiana\",\n  \"Iowa City, Johnson County, Iowa\",\n  \"College Park, Baltimore County, Maryland\",\n  \"Ann Arbor, Washtenaw County, Michigan\",\n  \"East Lansing, Ingham County, Michigan\",\n  \"Minneapolis, Hennepin County, Minnesota\",\n  \"Lincoln, Lancaster County, Nebraska\",\n  \"Evanston, Cook County, Illinois\",\n  \"Columbus, Franklin County, Ohio\",\n  \"State College, Centre County, Pennsylvania\",\n  \"West Lafayette, Tippecanoe County, Indiana\",\n  \"Newark, Middlesex County, New Jersey\",\n  \"Madison, Dane County, Wisconsin\"\n  )\n\nbig_10 <- tibble(Institution, Location)\n\nbig_10 |> gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"rtbyupeczn\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rtbyupeczn table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rtbyupeczn thead, #rtbyupeczn tbody, #rtbyupeczn tfoot, #rtbyupeczn tr, #rtbyupeczn td, #rtbyupeczn th {\n  border-style: none;\n}\n\n#rtbyupeczn p {\n  margin: 0;\n  padding: 0;\n}\n\n#rtbyupeczn .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rtbyupeczn .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rtbyupeczn .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rtbyupeczn .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rtbyupeczn .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rtbyupeczn .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rtbyupeczn .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rtbyupeczn .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rtbyupeczn .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rtbyupeczn .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rtbyupeczn .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rtbyupeczn .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rtbyupeczn .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rtbyupeczn .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rtbyupeczn .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtbyupeczn .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rtbyupeczn .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rtbyupeczn .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rtbyupeczn .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtbyupeczn .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rtbyupeczn .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtbyupeczn .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rtbyupeczn .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtbyupeczn .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rtbyupeczn .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rtbyupeczn .gt_left {\n  text-align: left;\n}\n\n#rtbyupeczn .gt_center {\n  text-align: center;\n}\n\n#rtbyupeczn .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rtbyupeczn .gt_font_normal {\n  font-weight: normal;\n}\n\n#rtbyupeczn .gt_font_bold {\n  font-weight: bold;\n}\n\n#rtbyupeczn .gt_font_italic {\n  font-style: italic;\n}\n\n#rtbyupeczn .gt_super {\n  font-size: 65%;\n}\n\n#rtbyupeczn .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rtbyupeczn .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rtbyupeczn .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rtbyupeczn .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rtbyupeczn .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rtbyupeczn .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rtbyupeczn .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Institution\">Institution</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Location\">Location</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Illinois</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Champaign, Champaign County, Illinois</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Indiana University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Bloomington, Monroe County, Indiana</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Iowa</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Iowa City, Johnson County, Iowa</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Maryland</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">College Park, Baltimore County, Maryland</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Michigan</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Ann Arbor, Washtenaw County, Michigan</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Michigan State University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">East Lansing, Ingham County, Michigan</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Minnesota</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Minneapolis, Hennepin County, Minnesota</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Nebraska-Lincoln</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Lincoln, Lancaster County, Nebraska</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Northwestern University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Evanston, Cook County, Illinois</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Ohio State University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Columbus, Franklin County, Ohio</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Pennsylvania State University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">State College, Centre County, Pennsylvania</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Purdue University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">West Lafayette, Tippecanoe County, Indiana</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Rutgers University</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Newark, Middlesex County, New Jersey</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Wisconsin-Madison</td>\n<td headers=\"Location\" class=\"gt_row gt_left\">Madison, Dane County, Wisconsin</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nThe Location field has quite a bit of information present that we might use to learn more about the locations of Big 10 schools. Let's use `separate()` to split the city, county, and state into their own fields.\n\nTo use `separate()`, we specify the name of the field we want to separate, we specify the new column names we want to assign to each of the components we're separating, and we indicate what character is the separator (in this case a comma \",\").\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_10 |> separate(Location, into = c(\"City\", \"County\", \"State\"), sep = \",\") |> gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xtqffbjlvc\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#xtqffbjlvc table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#xtqffbjlvc thead, #xtqffbjlvc tbody, #xtqffbjlvc tfoot, #xtqffbjlvc tr, #xtqffbjlvc td, #xtqffbjlvc th {\n  border-style: none;\n}\n\n#xtqffbjlvc p {\n  margin: 0;\n  padding: 0;\n}\n\n#xtqffbjlvc .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xtqffbjlvc .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xtqffbjlvc .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xtqffbjlvc .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xtqffbjlvc .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xtqffbjlvc .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xtqffbjlvc .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xtqffbjlvc .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xtqffbjlvc .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#xtqffbjlvc .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xtqffbjlvc .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xtqffbjlvc .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xtqffbjlvc .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xtqffbjlvc .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xtqffbjlvc .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtqffbjlvc .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xtqffbjlvc .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xtqffbjlvc .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#xtqffbjlvc .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtqffbjlvc .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xtqffbjlvc .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtqffbjlvc .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xtqffbjlvc .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtqffbjlvc .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xtqffbjlvc .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtqffbjlvc .gt_left {\n  text-align: left;\n}\n\n#xtqffbjlvc .gt_center {\n  text-align: center;\n}\n\n#xtqffbjlvc .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xtqffbjlvc .gt_font_normal {\n  font-weight: normal;\n}\n\n#xtqffbjlvc .gt_font_bold {\n  font-weight: bold;\n}\n\n#xtqffbjlvc .gt_font_italic {\n  font-style: italic;\n}\n\n#xtqffbjlvc .gt_super {\n  font-size: 65%;\n}\n\n#xtqffbjlvc .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#xtqffbjlvc .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xtqffbjlvc .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xtqffbjlvc .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xtqffbjlvc .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xtqffbjlvc .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xtqffbjlvc .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Institution\">Institution</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"City\">City</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"County\">County</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"State\">State</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Illinois</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Champaign</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Champaign County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Illinois</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Indiana University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Bloomington</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Monroe County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Indiana</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Iowa</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Iowa City</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Johnson County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Iowa</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Maryland</td>\n<td headers=\"City\" class=\"gt_row gt_left\">College Park</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Baltimore County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Maryland</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Michigan</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Ann Arbor</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Washtenaw County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Michigan</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Michigan State University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">East Lansing</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Ingham County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Michigan</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Minnesota</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Minneapolis</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Hennepin County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Minnesota</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Nebraska-Lincoln</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Lincoln</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Lancaster County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Nebraska</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Northwestern University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Evanston</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Cook County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Illinois</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Ohio State University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Columbus</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Franklin County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Ohio</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Pennsylvania State University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">State College</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Centre County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Pennsylvania</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Purdue University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">West Lafayette</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Tippecanoe County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Indiana</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">Rutgers University</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Newark</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Middlesex County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> New Jersey</td></tr>\n    <tr><td headers=\"Institution\" class=\"gt_row gt_left\">University of Wisconsin-Madison</td>\n<td headers=\"City\" class=\"gt_row gt_left\">Madison</td>\n<td headers=\"County\" class=\"gt_row gt_left\"> Dane County</td>\n<td headers=\"State\" class=\"gt_row gt_left\"> Wisconsin</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nWe get back three new fields that replace the existing location field.\n\n### Tally\n\nWe have used the combination of `group_by()` and `summarise()` on many occasions in order to aggregate characteristics of data by groups. For simple operations, there are some helper functions that we can use to simplify our aggregation of groups. `tally()` for instance is the equivalent of `summarise(n = n())` which creates a count of the observations in each group.\n\nLet's explore an example using our Big 10 data. Let's say, for instance, that we want to count the number of Big 10 schools in each state. How would we do this using `group_by()` and `summarise()`?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_10 |> \n  separate(Location, into = c(\"City\", \"County\", \"State\"), sep = \",\") |> \n  group_by(State) |> \n  summarise(Institutions = n()) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"donrelvjdx\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#donrelvjdx table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#donrelvjdx thead, #donrelvjdx tbody, #donrelvjdx tfoot, #donrelvjdx tr, #donrelvjdx td, #donrelvjdx th {\n  border-style: none;\n}\n\n#donrelvjdx p {\n  margin: 0;\n  padding: 0;\n}\n\n#donrelvjdx .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#donrelvjdx .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#donrelvjdx .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#donrelvjdx .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#donrelvjdx .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#donrelvjdx .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#donrelvjdx .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#donrelvjdx .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#donrelvjdx .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#donrelvjdx .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#donrelvjdx .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#donrelvjdx .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#donrelvjdx .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#donrelvjdx .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#donrelvjdx .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#donrelvjdx .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#donrelvjdx .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#donrelvjdx .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#donrelvjdx .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#donrelvjdx .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#donrelvjdx .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#donrelvjdx .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#donrelvjdx .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#donrelvjdx .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#donrelvjdx .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#donrelvjdx .gt_left {\n  text-align: left;\n}\n\n#donrelvjdx .gt_center {\n  text-align: center;\n}\n\n#donrelvjdx .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#donrelvjdx .gt_font_normal {\n  font-weight: normal;\n}\n\n#donrelvjdx .gt_font_bold {\n  font-weight: bold;\n}\n\n#donrelvjdx .gt_font_italic {\n  font-style: italic;\n}\n\n#donrelvjdx .gt_super {\n  font-size: 65%;\n}\n\n#donrelvjdx .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#donrelvjdx .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#donrelvjdx .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#donrelvjdx .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#donrelvjdx .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#donrelvjdx .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#donrelvjdx .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"State\">State</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Institutions\">Institutions</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Illinois</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Indiana</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Iowa</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Maryland</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Michigan</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Minnesota</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Nebraska</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> New Jersey</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Ohio</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Pennsylvania</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Wisconsin</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nIn this case, we're taking our raw Big 10 data, separating the location into three columns, and then building a summary based upon the state field.\n\nHere's how we might do the same thing using `group_by()` and `tally()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_10 |> \n  separate(Location, into = c(\"City\", \"County\", \"State\"), sep = \",\") |> \n  group_by(State) |> \n  tally() |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"vcdjkljwbk\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#vcdjkljwbk table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#vcdjkljwbk thead, #vcdjkljwbk tbody, #vcdjkljwbk tfoot, #vcdjkljwbk tr, #vcdjkljwbk td, #vcdjkljwbk th {\n  border-style: none;\n}\n\n#vcdjkljwbk p {\n  margin: 0;\n  padding: 0;\n}\n\n#vcdjkljwbk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#vcdjkljwbk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#vcdjkljwbk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#vcdjkljwbk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#vcdjkljwbk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#vcdjkljwbk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#vcdjkljwbk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#vcdjkljwbk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#vcdjkljwbk .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#vcdjkljwbk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#vcdjkljwbk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vcdjkljwbk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#vcdjkljwbk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#vcdjkljwbk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#vcdjkljwbk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vcdjkljwbk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#vcdjkljwbk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#vcdjkljwbk .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#vcdjkljwbk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vcdjkljwbk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#vcdjkljwbk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vcdjkljwbk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#vcdjkljwbk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vcdjkljwbk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vcdjkljwbk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vcdjkljwbk .gt_left {\n  text-align: left;\n}\n\n#vcdjkljwbk .gt_center {\n  text-align: center;\n}\n\n#vcdjkljwbk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#vcdjkljwbk .gt_font_normal {\n  font-weight: normal;\n}\n\n#vcdjkljwbk .gt_font_bold {\n  font-weight: bold;\n}\n\n#vcdjkljwbk .gt_font_italic {\n  font-style: italic;\n}\n\n#vcdjkljwbk .gt_super {\n  font-size: 65%;\n}\n\n#vcdjkljwbk .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#vcdjkljwbk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#vcdjkljwbk .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#vcdjkljwbk .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#vcdjkljwbk .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#vcdjkljwbk .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#vcdjkljwbk .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"State\">State</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Illinois</td>\n<td headers=\"n\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Indiana</td>\n<td headers=\"n\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Iowa</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Maryland</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Michigan</td>\n<td headers=\"n\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Minnesota</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Nebraska</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> New Jersey</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Ohio</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Pennsylvania</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Wisconsin</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nWe get output that is basically the same, just with a count column labelled \"n\". We can specify the name of the count column so that we have a label that's more descriptive:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig_10 |> \n  separate(Location, into = c(\"City\", \"County\", \"State\"), sep = \",\") |> \n  group_by(State) |> \n  tally(name = \"Institutions\") |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"bojfoboyvn\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#bojfoboyvn table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bojfoboyvn thead, #bojfoboyvn tbody, #bojfoboyvn tfoot, #bojfoboyvn tr, #bojfoboyvn td, #bojfoboyvn th {\n  border-style: none;\n}\n\n#bojfoboyvn p {\n  margin: 0;\n  padding: 0;\n}\n\n#bojfoboyvn .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bojfoboyvn .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bojfoboyvn .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bojfoboyvn .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bojfoboyvn .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bojfoboyvn .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bojfoboyvn .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bojfoboyvn .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bojfoboyvn .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bojfoboyvn .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bojfoboyvn .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#bojfoboyvn .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bojfoboyvn .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bojfoboyvn .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bojfoboyvn .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bojfoboyvn .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bojfoboyvn .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bojfoboyvn .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bojfoboyvn .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bojfoboyvn .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bojfoboyvn .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bojfoboyvn .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bojfoboyvn .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bojfoboyvn .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bojfoboyvn .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bojfoboyvn .gt_left {\n  text-align: left;\n}\n\n#bojfoboyvn .gt_center {\n  text-align: center;\n}\n\n#bojfoboyvn .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bojfoboyvn .gt_font_normal {\n  font-weight: normal;\n}\n\n#bojfoboyvn .gt_font_bold {\n  font-weight: bold;\n}\n\n#bojfoboyvn .gt_font_italic {\n  font-style: italic;\n}\n\n#bojfoboyvn .gt_super {\n  font-size: 65%;\n}\n\n#bojfoboyvn .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bojfoboyvn .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bojfoboyvn .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bojfoboyvn .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bojfoboyvn .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bojfoboyvn .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bojfoboyvn .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"State\">State</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Institutions\">Institutions</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Illinois</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Indiana</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Iowa</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Maryland</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Michigan</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Minnesota</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Nebraska</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> New Jersey</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Ohio</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Pennsylvania</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"State\" class=\"gt_row gt_left\"> Wisconsin</td>\n<td headers=\"Institutions\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n## Building Census Geographies\n\nWe are going to focus on analyzing population by race for New York City. We need to start by defining our geography for the city. The `Tigris` package can help us download census geometries directly from the census servers. We could also as tidycensus to download census geographies when we pull data, but let's download geographies separately for now so that we can refine them before adding other data.\n\nLet's start by downloading census tract boundaries for New York City's Boroughs. We will then map these directly in RStudio. Having a borough map handy provides a good reminder of the city's geography:\n\n![](https://www.worldatlas.com/r/w960-q80/upload/c6/23/73/shutterstock-152208935.jpg) The city consists of five boroughs, each of which is its own county (this is atypical, but it's a New York thing).\n\n| FIPS Code | County Name     | Borough Name  |\n|-----------|-----------------|---------------|\n| 36047     | Kings County    | Brooklyn      |\n| 36005     | Bronx County    | Bronx         |\n| 36081     | Queens County   | Queens        |\n| 36085     | Richmond County | Staten Island |\n| 36061     | New York County | Manhattan     |\n\n: New York City Boroughs\n\nIn building a `tracts` call using tigris (to download tract geometries), we'll need to specify at a minimum the state and the vintage of tract geometry we want to download. Let's download 2020 tract data:\n\n\n\n\n\nLet's use `ggplot()` to visualize so that we can confirm what we've downloaded is indeed all tracts in the state of New York:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_sf(data=nyc_trt)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThat looks roughly like the state of New York. Congratulations if this is your first map visualization in RStudio!\n\nWe have some things to unpack here. Out tigris call downloaded all tracts for the state of New York. We have tract properties, but then a list of lists in a field called \"geometry\". What's going on here?\n\nOur tract geographies were downloaded in what is known as [*simple features*](https://r-spatial.github.io/sf/articles/sf1.html) format. If you have dealt with prior formats for spatial data in R, you'll understand that simple features really are much simpler! The list that you see here is a list of points that define the vertices, in this case, which represent each tract polygon. Embedding the geometry with data that represents the qualities of each tract is very useful.\n\nWe could query down to the counties that define New York City with the information we have in hand:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- nyc_trt |> \n  filter(COUNTYFP %in% c(\"047\", \"005\", \"081\", \"085\", \"061\"))\n```\n:::\n\n\nAnd again, let's visualize to confirm:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data=nyc_trt)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nAgain, a lot going on here, but we definitely have a subgeography from the New York State data.\n\nWhile downloading tracts for the whole state and then querying out NYC counties is ok, tigris, can accept counties as inputs to its API call:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- tracts(state = \"NY\", county = c(\"Bronx\", \"Kings\", \"New York\", \"Queens\", \"Richmond\"), year = 2020)\n```\n:::\n\n\nHere we are just specifying counties by name - tigris looks them up and confirms which counties it has downloaded.\n\nBefore we get into modifying this geography, let's transform it to an appropriate projection. The sf (simple features) package can handle this for us with `st_transform()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- nyc_trt |> \n  st_transform(26918)\n```\n:::\n\n\nThe string of numbers here refers to the particular transformation we're doing - in this case to [NAD 1983](https://epsg.io/26918), a common coordinate reference system for the United States.\n\nOur NYC tracts look a little messy - they don't really look like the shape of New York City. Let's think about what role water might be playing here. In the tract data, there are fields called ALAND and AWATER which correspond to the tract area that is land and water (respectively). Let's take a look to see if there are any tracts that are all water:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt |> \n  filter(ALAND == 0)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 3 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 562802.4 ymin: 4480943 xmax: 605316.4 ymax: 4495548\nProjected CRS: NAD83 / UTM zone 18N\n  STATEFP COUNTYFP TRACTCE       GEOID NAME          NAMELSAD MTFCC FUNCSTAT\n1      36      081  990100 36081990100 9901 Census Tract 9901 G5020        S\n2      36      047  990100 36047990100 9901 Census Tract 9901 G5020        S\n3      36      085  990100 36085990100 9901 Census Tract 9901 G5020        S\n  ALAND    AWATER    INTPTLAT     INTPTLON                       geometry\n1     0 130800077 +40.5380517 -073.8942020 MULTIPOLYGON (((581457.1 44...\n2     0  17793788 +40.5649788 -074.0148235 MULTIPOLYGON (((580899.6 44...\n3     0  81772671 +40.5249107 -074.1091816 MULTIPOLYGON (((562808.8 44...\n```\n:::\n:::\n\n\nIt turns out we have three tracts with no land area and that are all water. Let's remove them and see what our data looks like:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- nyc_trt |> \n  filter(ALAND > 0)\n\nggplot() +\n  geom_sf(data=nyc_trt)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nA little better - we dropped a few tracts and can start to see more of the shape of the city. Let's continue to diagnose what's going on here by coloring each borough so we can see boundaries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data=nyc_trt, aes(fill = COUNTYFP))\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nWe add an aesthetic mapping to our `ggplot()` call that assigns a unique color to each county. Referring back to our borough image of New York City, it looks like tracts are continuous with some portions covering parts of water bodies.\n\nCan we do any better? You know the answer is yes! tigris can use census hydrography to clip the portions of tracts that are water:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- nyc_trt |> \n  erase_water(area_threshold = .9, year = 2020)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nFetching area water data for your dataset's location...\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nErasing water area...\nIf this is slow, try a larger area threshold value.\n```\n:::\n:::\n\n\nYou will need to play with the threshold value to get something that looks good. In this case, we're using a threshold of .9 which means that we are only removing the water areas that represent the largest 10 percent of all water geometries in the map.\n\nLet's once again visualize to see what we have here:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data=nyc_trt, aes(fill = COUNTYFP))\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nWe have a bit more definition now.\n\nBefore we move on to adding census data to these tracts, let's use them to create a new geometry - county boundaries. Yes, we could download them using tigris, but we actually have all the data we need in our tract files.\n\nOne very cool think about the implementation of simple features in R is that tidyverse commands like `group_by()` and `summarise()` work on them. What if we group tracts by their county identifier and summarise?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_co <- nyc_trt |> \n  group_by(COUNTYFP) |> \n  summarise(tracts = n())\n\nggplot() +\n  geom_sf(data = nyc_co, aes(fill = COUNTYFP))\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nWe have now created a custom set of county boundaries for New York City.\n\n### Styling Maps\n\nI am a big proponent of making many bad maps so that you can progressively refine your visualization to something effective. Let's think about some key controls for styling our maps.\n\nFirst, let's start with our base tract data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\nLet's use a theme to remove some of the shading:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nIf you don't want the graticules and latitude / longitude markings, you can either use a theme to remove them:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\nOr you can manually remove them this way:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\nLet's add counties as an overlay:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  geom_sf(data = nyc_co) +\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\nHmm - where's our tracts? We can see our counties, but tracts are underneath! Let's remove the fill from the counties file so we can see the tracts underneath:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  geom_sf(data = nyc_co, fill=NA) +\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\nNow we can see the tracts, but what about our counties? Let's use color to differentiate?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  geom_sf(data = nyc_co, fill = NA, color = \"blue\") +\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\nOk - now we can see the counties. Why don't we try to make the line weight heavier on the county outlines to create more hierarchy here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt) +\n  geom_sf(data = nyc_co, fill = NA, color = \"blue\", cex = .7) +\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\nA little thicker. Why don't we also decrease the line weight of the tracts to help differentiate more?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt, cex = .1) + # Decrease the line weight to differentiate\n  geom_sf(data = nyc_co, fill = NA, color = \"blue\", cex = .7)+ # Increase the line weight to differentiate\n  coord_sf(datum = NA)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\nThat's starting to look better. Maybe now we can try again but using only gray lines:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = nyc_trt, cex = .1, color = \"gray70\", fill = NA) + # Decrease the line weight to differentiate\n  geom_sf(data = nyc_co, fill = NA, color = \"gray30\", cex = .6)+ # Increase the line weight to differentiate\n  coord_sf(datum = NA) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\nLet's consider this \"styled' enough for now...\n\n## Downloading Census Data\n\nFor the purposes of our example, we'll examine racial segregation in New York City. Let's start by downloading and preparing data on race for New York City.\n\n### Get Tract Boundaries\n\nLet's download 2020 census tract boundaries for New York City's five Boroughs. While we're at it, we'll clean them up a little bit.\n\n| FIPS Code | County Name     | Borough Name  |\n|-----------|-----------------|---------------|\n| 36047     | Kings County    | Brooklyn      |\n| 36005     | Bronx County    | Bronx         |\n| 36081     | Queens County   | Queens        |\n| 36085     | Richmond County | Staten Island |\n| 36061     | New York County | Manhattan     |\n\n: New York City Boroughs\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_trt <- tracts(state = \"NY\", county = c(\"005\", \"047\", \"061\", \"081\", \"085\"), year = 2020) |> \n  st_transform(26918) |> \n  filter(ALAND != 0) |> \n  erase_water(area_threshold = .9, year = 2020)\n```\n:::\n\n\nThe code above is accomplishing the following things:\n\n1.  Download tract-level census geometries as a simple features object for Kings, Bronx, Queens, Richmond, and New York Counties for the year 2020.\n2.  Transform these geometries to the NAD 1983 coordinate reference system.\n3.  Remove those defined tract boundaries with no land area.\n4.  Erase the portion of tract boundaries that are water, focusing on the top 10 percent of largest defined water polygons, and using hydrography defined by the census in 2020.\n\nLet's use `ggplot()` to visualize so that we can confirm what we've downloaded is indeed New York City's boroughs:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data=nyc_trt)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n### Get ACS Data\n\nNext, we'll download ACS data on race for New York City. We'll focus on 2020 data from the 5-year ACS from Table [B03002](https://data.census.gov/table?q=B03002).\n\nTo keep things organized, let's define the variables we want to download. Note that we're defining variable names as well as values. To facilitate some of our later operations, let's download these data in *wide* format rather than *tidy* format. In wide format, we'll have one observation (row) for each census tract, with multiple columns containing estimates for each population subgroup and the total population.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndl_vars <- c(\n  White = \"B03002_003\",\n  Black = \"B03002_004\",\n  Native = \"B03002_005\",\n  Asian = \"B03002_006\",\n  HIPI = \"B03002_007\",\n  Hispanic = \"B03002_012\",\n  Poptot = \"B03002_001\"\n)\n\n# Our tidycensus download call:\n\nnyc_race <- get_acs(\n  geography = \"tract\",\n  state = \"NY\",\n  county = c(\"Bronx\", \"Kings\", \"New York\", \"Queens\", \"Richmond\"),\n  variables = dl_vars,\n  year = 2020,\n  output = \"wide\"\n) \n\nnyc_race |> \n  slice_head(n = 5) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"frwwymhlte\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#frwwymhlte table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#frwwymhlte thead, #frwwymhlte tbody, #frwwymhlte tfoot, #frwwymhlte tr, #frwwymhlte td, #frwwymhlte th {\n  border-style: none;\n}\n\n#frwwymhlte p {\n  margin: 0;\n  padding: 0;\n}\n\n#frwwymhlte .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#frwwymhlte .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#frwwymhlte .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#frwwymhlte .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#frwwymhlte .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#frwwymhlte .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#frwwymhlte .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#frwwymhlte .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#frwwymhlte .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#frwwymhlte .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#frwwymhlte .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#frwwymhlte .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#frwwymhlte .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#frwwymhlte .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#frwwymhlte .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#frwwymhlte .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#frwwymhlte .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#frwwymhlte .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#frwwymhlte .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#frwwymhlte .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#frwwymhlte .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#frwwymhlte .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#frwwymhlte .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#frwwymhlte .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#frwwymhlte .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#frwwymhlte .gt_left {\n  text-align: left;\n}\n\n#frwwymhlte .gt_center {\n  text-align: center;\n}\n\n#frwwymhlte .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#frwwymhlte .gt_font_normal {\n  font-weight: normal;\n}\n\n#frwwymhlte .gt_font_bold {\n  font-weight: bold;\n}\n\n#frwwymhlte .gt_font_italic {\n  font-style: italic;\n}\n\n#frwwymhlte .gt_super {\n  font-size: 65%;\n}\n\n#frwwymhlte .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#frwwymhlte .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#frwwymhlte .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#frwwymhlte .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#frwwymhlte .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#frwwymhlte .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#frwwymhlte .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GEOID\">GEOID</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"NAME\">NAME</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"WhiteE\">WhiteE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"WhiteM\">WhiteM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BlackE\">BlackE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BlackM\">BlackM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"NativeE\">NativeE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"NativeM\">NativeM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AsianE\">AsianE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AsianM\">AsianM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"HIPIE\">HIPIE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"HIPIM\">HIPIM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"HispanicE\">HispanicE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"HispanicM\">HispanicM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"PoptotE\">PoptotE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"PoptotM\">PoptotM</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009202</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 92.02, Kings County, New York</td>\n<td headers=\"WhiteE\" class=\"gt_row gt_right\">328</td>\n<td headers=\"WhiteM\" class=\"gt_row gt_right\">96</td>\n<td headers=\"BlackE\" class=\"gt_row gt_right\">162</td>\n<td headers=\"BlackM\" class=\"gt_row gt_right\">129</td>\n<td headers=\"NativeE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"NativeM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"AsianE\" class=\"gt_row gt_right\">1037</td>\n<td headers=\"AsianM\" class=\"gt_row gt_right\">293</td>\n<td headers=\"HIPIE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"HIPIM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"HispanicE\" class=\"gt_row gt_right\">1904</td>\n<td headers=\"HispanicM\" class=\"gt_row gt_right\">630</td>\n<td headers=\"PoptotE\" class=\"gt_row gt_right\">3453</td>\n<td headers=\"PoptotM\" class=\"gt_row gt_right\">653</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009401</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 94.01, Kings County, New York</td>\n<td headers=\"WhiteE\" class=\"gt_row gt_right\">132</td>\n<td headers=\"WhiteM\" class=\"gt_row gt_right\">72</td>\n<td headers=\"BlackE\" class=\"gt_row gt_right\">173</td>\n<td headers=\"BlackM\" class=\"gt_row gt_right\">245</td>\n<td headers=\"NativeE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"NativeM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"AsianE\" class=\"gt_row gt_right\">1582</td>\n<td headers=\"AsianM\" class=\"gt_row gt_right\">389</td>\n<td headers=\"HIPIE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"HIPIM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"HispanicE\" class=\"gt_row gt_right\">406</td>\n<td headers=\"HispanicM\" class=\"gt_row gt_right\">283</td>\n<td headers=\"PoptotE\" class=\"gt_row gt_right\">2293</td>\n<td headers=\"PoptotM\" class=\"gt_row gt_right\">380</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009402</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 94.02, Kings County, New York</td>\n<td headers=\"WhiteE\" class=\"gt_row gt_right\">377</td>\n<td headers=\"WhiteM\" class=\"gt_row gt_right\">198</td>\n<td headers=\"BlackE\" class=\"gt_row gt_right\">38</td>\n<td headers=\"BlackM\" class=\"gt_row gt_right\">57</td>\n<td headers=\"NativeE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"NativeM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"AsianE\" class=\"gt_row gt_right\">1903</td>\n<td headers=\"AsianM\" class=\"gt_row gt_right\">586</td>\n<td headers=\"HIPIE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"HIPIM\" class=\"gt_row gt_right\">12</td>\n<td headers=\"HispanicE\" class=\"gt_row gt_right\">271</td>\n<td headers=\"HispanicM\" class=\"gt_row gt_right\">213</td>\n<td headers=\"PoptotE\" class=\"gt_row gt_right\">2746</td>\n<td headers=\"PoptotM\" class=\"gt_row gt_right\">553</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009600</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 96, Kings County, New York</td>\n<td headers=\"WhiteE\" class=\"gt_row gt_right\">1035</td>\n<td headers=\"WhiteM\" class=\"gt_row gt_right\">313</td>\n<td headers=\"BlackE\" class=\"gt_row gt_right\">78</td>\n<td headers=\"BlackM\" class=\"gt_row gt_right\">60</td>\n<td headers=\"NativeE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"NativeM\" class=\"gt_row gt_right\">17</td>\n<td headers=\"AsianE\" class=\"gt_row gt_right\">1993</td>\n<td headers=\"AsianM\" class=\"gt_row gt_right\">519</td>\n<td headers=\"HIPIE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"HIPIM\" class=\"gt_row gt_right\">17</td>\n<td headers=\"HispanicE\" class=\"gt_row gt_right\">2629</td>\n<td headers=\"HispanicM\" class=\"gt_row gt_right\">629</td>\n<td headers=\"PoptotE\" class=\"gt_row gt_right\">5858</td>\n<td headers=\"PoptotM\" class=\"gt_row gt_right\">710</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009800</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 98, Kings County, New York</td>\n<td headers=\"WhiteE\" class=\"gt_row gt_right\">218</td>\n<td headers=\"WhiteM\" class=\"gt_row gt_right\">83</td>\n<td headers=\"BlackE\" class=\"gt_row gt_right\">162</td>\n<td headers=\"BlackM\" class=\"gt_row gt_right\">160</td>\n<td headers=\"NativeE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"NativeM\" class=\"gt_row gt_right\">17</td>\n<td headers=\"AsianE\" class=\"gt_row gt_right\">2306</td>\n<td headers=\"AsianM\" class=\"gt_row gt_right\">504</td>\n<td headers=\"HIPIE\" class=\"gt_row gt_right\">0</td>\n<td headers=\"HIPIM\" class=\"gt_row gt_right\">17</td>\n<td headers=\"HispanicE\" class=\"gt_row gt_right\">3275</td>\n<td headers=\"HispanicM\" class=\"gt_row gt_right\">740</td>\n<td headers=\"PoptotE\" class=\"gt_row gt_right\">6021</td>\n<td headers=\"PoptotM\" class=\"gt_row gt_right\">798</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNote that this code defines the list of specific variables to download (rather than a whole table), asks tidycensus to download the data, and labels each column with the label we have defined (with E and M denoting estimates and margins of error because this is sample-based data).\n\nWhile we're at it, let's separate our tract name label into separate tract, county, and state values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race <- nyc_race |> \n  separate(NAME, into = c(\"Tract\", \"County\", \"State\"), sep = \", \")\n```\n:::\n\n\nNote the use of `sep = \", \"` includes the space after the comma so we don't have an extra space in our resulting county and state variables.\n\n### Create County Summaries\n\nBefore we further manipulate our data, let's aggregate the data we have to form county population summaries. Because our tract data is hierarchical, we can sum up our population estimates from tracts to counties to produce county population totals. While we're at it, we'll also use the county FIPS codes to create a Borough identifier (we could also add county labels back as well).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race_co <-\n  nyc_race |> \n  group_by(STCO = substr(GEOID, 0, 5)) |> \n  summarise(\n    co_WhiteE = sum(WhiteE, na.rm = TRUE),\n    co_WhiteM = moe_sum(WhiteM, WhiteE),\n    co_BlackE = sum(BlackE, na.rm = TRUE),\n    co_BlackM = moe_sum(BlackM, BlackE),\n    co_NativeE = sum(NativeE, na.rm = TRUE),\n    co_NativeM = moe_sum(NativeM, NativeE),\n    co_AsianE = sum(AsianE, na.rm = TRUE),\n    co_AsianM = moe_sum(AsianM, AsianE),\n    co_HIPIE = sum(HIPIE, na.rm = TRUE),\n    co_HIPIM = moe_sum(HIPIM, HIPIE),\n    co_HispanicE = sum(HispanicE, na.rm = TRUE),\n    co_HispanicM = moe_sum(HispanicM, HispanicE),\n    co_PoptotE = sum(PoptotE, na.rm = TRUE),\n    co_PoptotM = moe_sum(PoptotM, PoptotE),\n  ) |> \n  mutate(Borough =\n    case_when(\n      STCO == \"36005\" ~ \"Bronx\",\n      STCO == \"36047\" ~ \"Brooklyn\",\n      STCO == \"36061\" ~ \"Manhattan\",\n      STCO == \"36081\" ~ \"Queens\",\n      STCO == \"36085\" ~ \"Staten Island\")\n  )\n```\n:::\n\n\nLet's walk through this:\n\n1.  We are going to use `group_by()` to aggregate our tract-level data to counties. In this case, we are pulling out the first five digits from the combined state-county-tract FIPS code (`substr(GEOID, 0, 5)`) using the `substr()` command from the stringr package. This allows us to create a combined state and county FIPS code (the state is the first two digits - 36 in the case of New York - and the county is the next three digits).\n2.  We use `summarise()` to create summary values for counties. We use `sum()` on our population estimates to sum up populations for tracts into county totals. We use `moe_sum()` from the `tidycensus()` package to properly aggregate margins of error accounting for the size of the population estimate being aggregated. The census provides [documentation](https://www2.census.gov/programs-surveys/acs/tech_docs/accuracy/MultiyearACSAccuracyofData2015.pdf) on what's implemented in tidycensus. We denote that these are county estimates by including `co_` as a prefix - you'll see why later.\n3.  We use `case_when()` construct borough labels from our combined state and county FIPS codes.\n\nAs a result, we have a table containing county populations and margins of error for the boroughs of New York City:\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"gobmktjsdv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gobmktjsdv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gobmktjsdv thead, #gobmktjsdv tbody, #gobmktjsdv tfoot, #gobmktjsdv tr, #gobmktjsdv td, #gobmktjsdv th {\n  border-style: none;\n}\n\n#gobmktjsdv p {\n  margin: 0;\n  padding: 0;\n}\n\n#gobmktjsdv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gobmktjsdv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gobmktjsdv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gobmktjsdv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gobmktjsdv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gobmktjsdv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gobmktjsdv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gobmktjsdv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gobmktjsdv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gobmktjsdv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gobmktjsdv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gobmktjsdv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gobmktjsdv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gobmktjsdv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gobmktjsdv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gobmktjsdv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gobmktjsdv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gobmktjsdv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gobmktjsdv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gobmktjsdv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gobmktjsdv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gobmktjsdv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gobmktjsdv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gobmktjsdv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gobmktjsdv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gobmktjsdv .gt_left {\n  text-align: left;\n}\n\n#gobmktjsdv .gt_center {\n  text-align: center;\n}\n\n#gobmktjsdv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gobmktjsdv .gt_font_normal {\n  font-weight: normal;\n}\n\n#gobmktjsdv .gt_font_bold {\n  font-weight: bold;\n}\n\n#gobmktjsdv .gt_font_italic {\n  font-style: italic;\n}\n\n#gobmktjsdv .gt_super {\n  font-size: 65%;\n}\n\n#gobmktjsdv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gobmktjsdv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gobmktjsdv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gobmktjsdv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gobmktjsdv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gobmktjsdv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gobmktjsdv .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"STCO\">STCO</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_WhiteE\">co_WhiteE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_WhiteM\">co_WhiteM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_BlackE\">co_BlackE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_BlackM\">co_BlackM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_NativeE\">co_NativeE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_NativeM\">co_NativeM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_AsianE\">co_AsianE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_AsianM\">co_AsianM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_HIPIE\">co_HIPIE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_HIPIM\">co_HIPIM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_HispanicE\">co_HispanicE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_HispanicM\">co_HispanicM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_PoptotE\">co_PoptotE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_PoptotM\">co_PoptotM</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"STCO\" class=\"gt_row gt_right\">36005</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">128,717</td>\n<td headers=\"co_WhiteM\" class=\"gt_row gt_right\">3,742</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">411,293</td>\n<td headers=\"co_BlackM\" class=\"gt_row gt_right\">8,800</td>\n<td headers=\"co_NativeE\" class=\"gt_row gt_right\">2,882</td>\n<td headers=\"co_NativeM\" class=\"gt_row gt_right\">727</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">53,498</td>\n<td headers=\"co_AsianM\" class=\"gt_row gt_right\">3,097</td>\n<td headers=\"co_HIPIE\" class=\"gt_row gt_right\">374</td>\n<td headers=\"co_HIPIM\" class=\"gt_row gt_right\">198</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">799,765</td>\n<td headers=\"co_HispanicM\" class=\"gt_row gt_right\">12,002</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">1,427,056</td>\n<td headers=\"co_PoptotM\" class=\"gt_row gt_right\">14,216</td>\n<td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td></tr>\n    <tr><td headers=\"STCO\" class=\"gt_row gt_right\">36047</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">938,573</td>\n<td headers=\"co_WhiteM\" class=\"gt_row gt_right\">10,493</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">754,576</td>\n<td headers=\"co_BlackM\" class=\"gt_row gt_right\">10,307</td>\n<td headers=\"co_NativeE\" class=\"gt_row gt_right\">3,053</td>\n<td headers=\"co_NativeM\" class=\"gt_row gt_right\">638</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">304,420</td>\n<td headers=\"co_AsianM\" class=\"gt_row gt_right\">6,367</td>\n<td headers=\"co_HIPIE\" class=\"gt_row gt_right\">1,009</td>\n<td headers=\"co_HIPIM\" class=\"gt_row gt_right\">480</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">486,272</td>\n<td headers=\"co_HispanicM\" class=\"gt_row gt_right\">9,181</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">2,576,771</td>\n<td headers=\"co_PoptotM\" class=\"gt_row gt_right\">17,237</td>\n<td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td></tr>\n    <tr><td headers=\"STCO\" class=\"gt_row gt_right\">36061</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">763,202</td>\n<td headers=\"co_WhiteM\" class=\"gt_row gt_right\">11,503</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">199,377</td>\n<td headers=\"co_BlackM\" class=\"gt_row gt_right\">6,238</td>\n<td headers=\"co_NativeE\" class=\"gt_row gt_right\">1,960</td>\n<td headers=\"co_NativeM\" class=\"gt_row gt_right\">581</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">196,097</td>\n<td headers=\"co_AsianM\" class=\"gt_row gt_right\">6,049</td>\n<td headers=\"co_HIPIE\" class=\"gt_row gt_right\">430</td>\n<td headers=\"co_HIPIM\" class=\"gt_row gt_right\">237</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">418,442</td>\n<td headers=\"co_HispanicM\" class=\"gt_row gt_right\">9,769</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">1,629,153</td>\n<td headers=\"co_PoptotM\" class=\"gt_row gt_right\">16,500</td>\n<td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td></tr>\n    <tr><td headers=\"STCO\" class=\"gt_row gt_right\">36081</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">559,778</td>\n<td headers=\"co_WhiteM\" class=\"gt_row gt_right\">8,090</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">385,868</td>\n<td headers=\"co_BlackM\" class=\"gt_row gt_right\">7,374</td>\n<td headers=\"co_NativeE\" class=\"gt_row gt_right\">5,561</td>\n<td headers=\"co_NativeM\" class=\"gt_row gt_right\">948</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">584,214</td>\n<td headers=\"co_AsianM\" class=\"gt_row gt_right\">9,369</td>\n<td headers=\"co_HIPIE\" class=\"gt_row gt_right\">832</td>\n<td headers=\"co_HIPIM\" class=\"gt_row gt_right\">271</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">631,657</td>\n<td headers=\"co_HispanicM\" class=\"gt_row gt_right\">10,976</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">2,270,976</td>\n<td headers=\"co_PoptotM\" class=\"gt_row gt_right\">16,687</td>\n<td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td></tr>\n    <tr><td headers=\"STCO\" class=\"gt_row gt_right\">36085</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">286,462</td>\n<td headers=\"co_WhiteM\" class=\"gt_row gt_right\">6,247</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">43,941</td>\n<td headers=\"co_BlackM\" class=\"gt_row gt_right\">2,970</td>\n<td headers=\"co_NativeE\" class=\"gt_row gt_right\">515</td>\n<td headers=\"co_NativeM\" class=\"gt_row gt_right\">243</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">47,194</td>\n<td headers=\"co_AsianM\" class=\"gt_row gt_right\">2,905</td>\n<td headers=\"co_HIPIE\" class=\"gt_row gt_right\">55</td>\n<td headers=\"co_HIPIM\" class=\"gt_row gt_right\">127</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">87,733</td>\n<td headers=\"co_HispanicM\" class=\"gt_row gt_right\">4,193</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">475,596</td>\n<td headers=\"co_PoptotM\" class=\"gt_row gt_right\">7,858</td>\n<td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nLet's create a more polished table showing the population by race for each NYC Borough:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race_co |> \n  mutate(other = co_NativeE+co_HIPIE) |> \n  select(Borough, co_WhiteE, co_BlackE, co_AsianE, co_HispanicE, other, co_PoptotE) |> \n  gt() |> \n  fmt_number(2:7, decimals = 0) |> \n  cols_label(\n    co_WhiteE = \"White\",\n    co_BlackE = \"Black\",\n    co_AsianE = \"Asian\",\n    co_HispanicE = \"Hispanic\",\n    other = \"Other\",\n    co_PoptotE = \"Total\"\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"tjasepavfi\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#tjasepavfi table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#tjasepavfi thead, #tjasepavfi tbody, #tjasepavfi tfoot, #tjasepavfi tr, #tjasepavfi td, #tjasepavfi th {\n  border-style: none;\n}\n\n#tjasepavfi p {\n  margin: 0;\n  padding: 0;\n}\n\n#tjasepavfi .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#tjasepavfi .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#tjasepavfi .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#tjasepavfi .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#tjasepavfi .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#tjasepavfi .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#tjasepavfi .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#tjasepavfi .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#tjasepavfi .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#tjasepavfi .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#tjasepavfi .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#tjasepavfi .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#tjasepavfi .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#tjasepavfi .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#tjasepavfi .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tjasepavfi .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#tjasepavfi .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#tjasepavfi .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#tjasepavfi .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tjasepavfi .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#tjasepavfi .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tjasepavfi .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#tjasepavfi .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tjasepavfi .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tjasepavfi .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tjasepavfi .gt_left {\n  text-align: left;\n}\n\n#tjasepavfi .gt_center {\n  text-align: center;\n}\n\n#tjasepavfi .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#tjasepavfi .gt_font_normal {\n  font-weight: normal;\n}\n\n#tjasepavfi .gt_font_bold {\n  font-weight: bold;\n}\n\n#tjasepavfi .gt_font_italic {\n  font-style: italic;\n}\n\n#tjasepavfi .gt_super {\n  font-size: 65%;\n}\n\n#tjasepavfi .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#tjasepavfi .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#tjasepavfi .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#tjasepavfi .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#tjasepavfi .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#tjasepavfi .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#tjasepavfi .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"White\">White</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Black\">Black</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Asian\">Asian</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Hispanic\">Hispanic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Other\">Other</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Total\">Total</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">128,717</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">411,293</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">53,498</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">799,765</td>\n<td headers=\"other\" class=\"gt_row gt_right\">3,256</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">1,427,056</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">938,573</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">754,576</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">304,420</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">486,272</td>\n<td headers=\"other\" class=\"gt_row gt_right\">4,062</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">2,576,771</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">763,202</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">199,377</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">196,097</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">418,442</td>\n<td headers=\"other\" class=\"gt_row gt_right\">2,390</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">1,629,153</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">559,778</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">385,868</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">584,214</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">631,657</td>\n<td headers=\"other\" class=\"gt_row gt_right\">6,393</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">2,270,976</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"co_WhiteE\" class=\"gt_row gt_right\">286,462</td>\n<td headers=\"co_BlackE\" class=\"gt_row gt_right\">43,941</td>\n<td headers=\"co_AsianE\" class=\"gt_row gt_right\">47,194</td>\n<td headers=\"co_HispanicE\" class=\"gt_row gt_right\">87,733</td>\n<td headers=\"other\" class=\"gt_row gt_right\">570</td>\n<td headers=\"co_PoptotE\" class=\"gt_row gt_right\">475,596</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNote the strategic use of an \"Other\" category which combines the Native American and Hawaiian Island and Pacific Islander categories.\n\n### Setup Summary\n\nWe now have three resources available to us:\n\n1.  nyc_race: ACS data on race for all tracts in New York City.\n2.  nyc_race_co: ACS data on race for all counties in New York City.\n3.  nyc_trt: Tract geometry data for all tracts in New York City.\n\nThese three pieces of information can form the basis for manipulation and analysis of dimensions of racial segregation in New York City.\n\nLet's now turn towards the measures of segregation.\n\n## Dissimilarity\n\n*Dissimilarity* is a common measure of *evenness* between two populations - dissimilarity measures the distribution of a minority population within a majority population. Conceptually, dissimilarity measures the proportion of that minority or subgroup population that would need to move in order to be equally distributed with the majority population. A dissimilarity score of 0 would mean a completely even distribution of a minority population amongst a majority population (no segregation). A dissimilarity score of 100 would mean a completely segregated minority population (100 percent of the minority population would need to move to achieve an even distribution amongst the population. Dissimilarity is calculated as follows:\n\n$D = .5*\\sum_i |\\frac{b_i}{B}-\\frac{w_i}{W}|$\n\nwhere $b_i$ is the number of blacks in tract *i*\n\n$B$ is the number of blacks for the county\n\n$w_i$ is the number of whites in tract *i*\n\n$W$ is the number of whites for the county\n\nNow that we know the formula, we can start thinking about how to implement this in R with dplyr.\n\n### Black-White Dissimilarity\n\nThis looks complicated, but we can actually do this fairly simply with dplyr notation. Let's start off by calculating Black-White dissimilarity.\n\nWe have our white and black tract population data already in our il_trt data, and we have our county data in a separate object. Let's go ahead and join that county data to our tract data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race<-left_join(nyc_race |> mutate(STCO = substr(GEOID, 0,5)), nyc_race_co, by= \"STCO\")\n```\n:::\n\n\nNotice that this join looks pretty standard with the exception of `nyc_race |> mutate(STCO = substr(GEOID, 0,5))`. When we created our county-level summaries of the tract-level data, we created a new variable called STCO which is the combined city and county FIPS codes. In order to join those data to our tract data, we need to temporarily create the same code from our GEOID field in the tract data. The mutate statement temporarily creates the STCO column in the nyc_race data, and the join can be performed denoting the common column, STCO.\n\nNow that we've joined these together, we can start breaking down the dissimilarity formula into code-able pieces. Inside the absolute value we are calculating fractions of tract minority and majority populations compared to their county. We then subtract these from each other and use `abs()` to find the absolute value. After that, we need to sum these all up and multiply by .5. We are calculating these by county, so we can use group_by() to sum up only the data for each county to produce a series of final dissimilarity statistics for each county in New York City. For other regions, you might end up calculating dissimilarity for multiple counties within a region.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race  |>\n  mutate(dissim_wb = abs(BlackE / co_BlackE - WhiteE / co_WhiteE)) |>  \n  group_by(Borough) |>  \n  summarise(dissimilarity = .5*sum(dissim_wb)) |> gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xremqsstcb\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#xremqsstcb table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#xremqsstcb thead, #xremqsstcb tbody, #xremqsstcb tfoot, #xremqsstcb tr, #xremqsstcb td, #xremqsstcb th {\n  border-style: none;\n}\n\n#xremqsstcb p {\n  margin: 0;\n  padding: 0;\n}\n\n#xremqsstcb .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xremqsstcb .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xremqsstcb .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xremqsstcb .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xremqsstcb .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xremqsstcb .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xremqsstcb .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xremqsstcb .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xremqsstcb .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#xremqsstcb .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xremqsstcb .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xremqsstcb .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xremqsstcb .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xremqsstcb .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xremqsstcb .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xremqsstcb .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xremqsstcb .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xremqsstcb .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#xremqsstcb .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xremqsstcb .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xremqsstcb .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xremqsstcb .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xremqsstcb .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xremqsstcb .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xremqsstcb .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xremqsstcb .gt_left {\n  text-align: left;\n}\n\n#xremqsstcb .gt_center {\n  text-align: center;\n}\n\n#xremqsstcb .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xremqsstcb .gt_font_normal {\n  font-weight: normal;\n}\n\n#xremqsstcb .gt_font_bold {\n  font-weight: bold;\n}\n\n#xremqsstcb .gt_font_italic {\n  font-style: italic;\n}\n\n#xremqsstcb .gt_super {\n  font-size: 65%;\n}\n\n#xremqsstcb .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#xremqsstcb .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xremqsstcb .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xremqsstcb .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xremqsstcb .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xremqsstcb .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xremqsstcb .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dissimilarity\">dissimilarity</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.7107378</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.7731939</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.7057447</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.8146201</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.7226401</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nHow would you interpret these black-white dissimilarity values? Where is Black-White dissimilarity the highest within the region? Where is it the lowest?\n\n## Nonwhite-White Dissimilarity\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |>\n  mutate(dissim_nww = abs((PoptotE-WhiteE) / (co_PoptotE-co_WhiteE) - WhiteE / co_WhiteE)) |> \n  group_by(Borough) |> \n  summarise(dissimilarity = .5*sum(dissim_nww)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"eveyhkscvw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#eveyhkscvw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#eveyhkscvw thead, #eveyhkscvw tbody, #eveyhkscvw tfoot, #eveyhkscvw tr, #eveyhkscvw td, #eveyhkscvw th {\n  border-style: none;\n}\n\n#eveyhkscvw p {\n  margin: 0;\n  padding: 0;\n}\n\n#eveyhkscvw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#eveyhkscvw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#eveyhkscvw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#eveyhkscvw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#eveyhkscvw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#eveyhkscvw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#eveyhkscvw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#eveyhkscvw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#eveyhkscvw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#eveyhkscvw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#eveyhkscvw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#eveyhkscvw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#eveyhkscvw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#eveyhkscvw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#eveyhkscvw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eveyhkscvw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#eveyhkscvw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#eveyhkscvw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#eveyhkscvw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eveyhkscvw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#eveyhkscvw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eveyhkscvw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#eveyhkscvw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eveyhkscvw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#eveyhkscvw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eveyhkscvw .gt_left {\n  text-align: left;\n}\n\n#eveyhkscvw .gt_center {\n  text-align: center;\n}\n\n#eveyhkscvw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#eveyhkscvw .gt_font_normal {\n  font-weight: normal;\n}\n\n#eveyhkscvw .gt_font_bold {\n  font-weight: bold;\n}\n\n#eveyhkscvw .gt_font_italic {\n  font-style: italic;\n}\n\n#eveyhkscvw .gt_super {\n  font-size: 65%;\n}\n\n#eveyhkscvw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#eveyhkscvw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#eveyhkscvw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#eveyhkscvw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#eveyhkscvw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#eveyhkscvw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#eveyhkscvw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dissimilarity\">dissimilarity</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.6311840</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.5502573</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.5144714</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.5274621</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.4167665</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nCompare and contrast this with Black-White dissimilarity - what do you observe?\n\n## Latino-White Dissimilarity\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race  |> \n  mutate(dissim_lw = abs(HispanicE / co_HispanicE - WhiteE / co_WhiteE)) |> \n  group_by(Borough) |>  \n  summarise(dissimilarity = .5*sum(dissim_lw)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"hwhrwnyscq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hwhrwnyscq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hwhrwnyscq thead, #hwhrwnyscq tbody, #hwhrwnyscq tfoot, #hwhrwnyscq tr, #hwhrwnyscq td, #hwhrwnyscq th {\n  border-style: none;\n}\n\n#hwhrwnyscq p {\n  margin: 0;\n  padding: 0;\n}\n\n#hwhrwnyscq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hwhrwnyscq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hwhrwnyscq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hwhrwnyscq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hwhrwnyscq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hwhrwnyscq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hwhrwnyscq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hwhrwnyscq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hwhrwnyscq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hwhrwnyscq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hwhrwnyscq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hwhrwnyscq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hwhrwnyscq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hwhrwnyscq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hwhrwnyscq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwhrwnyscq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hwhrwnyscq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hwhrwnyscq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hwhrwnyscq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwhrwnyscq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hwhrwnyscq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwhrwnyscq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hwhrwnyscq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwhrwnyscq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hwhrwnyscq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwhrwnyscq .gt_left {\n  text-align: left;\n}\n\n#hwhrwnyscq .gt_center {\n  text-align: center;\n}\n\n#hwhrwnyscq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hwhrwnyscq .gt_font_normal {\n  font-weight: normal;\n}\n\n#hwhrwnyscq .gt_font_bold {\n  font-weight: bold;\n}\n\n#hwhrwnyscq .gt_font_italic {\n  font-style: italic;\n}\n\n#hwhrwnyscq .gt_super {\n  font-size: 65%;\n}\n\n#hwhrwnyscq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hwhrwnyscq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hwhrwnyscq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hwhrwnyscq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hwhrwnyscq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hwhrwnyscq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hwhrwnyscq .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dissimilarity\">dissimilarity</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.6244812</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.5451200</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.6129532</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.5070836</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"dissimilarity\" class=\"gt_row gt_right\">0.4122438</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nCompare and contrast this with Black-White dissimilarity - what do you observe?\n\n# Interaction\n\nA second common measure of segregation is *interaction* which is a measure of *exposure*. Interaction measures the likelihood of population subgroups interacting with one another based upon their distribution within areal sub units (tracts). For instance, Black-White interaction is calculated as follows:\n\n$Interaction = \\sum_i\\frac{b_i}{B}*\\frac{w_i}{t_i}$\n\nWhere\n\n$b_i$ is the Black population of tract *i*\n\n$B$ is the Black population of the county\n\n$w_i$ is the White population of tract *i*\n\n$t_i$ is the total population of tract *i*\n\nGiven that there are some similarities to the dissimilarity index, modify your existing code to measure Black White interaction for counties in the New York City:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |> \n  mutate(interaction_bw = ((BlackE / co_BlackE) * (WhiteE / PoptotE))) |> \n  group_by(Borough) |>  \n  summarise(interaction = sum(interaction_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"zcwfyxouku\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zcwfyxouku table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zcwfyxouku thead, #zcwfyxouku tbody, #zcwfyxouku tfoot, #zcwfyxouku tr, #zcwfyxouku td, #zcwfyxouku th {\n  border-style: none;\n}\n\n#zcwfyxouku p {\n  margin: 0;\n  padding: 0;\n}\n\n#zcwfyxouku .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zcwfyxouku .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zcwfyxouku .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zcwfyxouku .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zcwfyxouku .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zcwfyxouku .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zcwfyxouku .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zcwfyxouku .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zcwfyxouku .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zcwfyxouku .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zcwfyxouku .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zcwfyxouku .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zcwfyxouku .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zcwfyxouku .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zcwfyxouku .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zcwfyxouku .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zcwfyxouku .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zcwfyxouku .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zcwfyxouku .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zcwfyxouku .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zcwfyxouku .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zcwfyxouku .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zcwfyxouku .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zcwfyxouku .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zcwfyxouku .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zcwfyxouku .gt_left {\n  text-align: left;\n}\n\n#zcwfyxouku .gt_center {\n  text-align: center;\n}\n\n#zcwfyxouku .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zcwfyxouku .gt_font_normal {\n  font-weight: normal;\n}\n\n#zcwfyxouku .gt_font_bold {\n  font-weight: bold;\n}\n\n#zcwfyxouku .gt_font_italic {\n  font-style: italic;\n}\n\n#zcwfyxouku .gt_super {\n  font-size: 65%;\n}\n\n#zcwfyxouku .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zcwfyxouku .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zcwfyxouku .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zcwfyxouku .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zcwfyxouku .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zcwfyxouku .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zcwfyxouku .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"interaction\">interaction</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.04468322</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.13499725</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.22647975</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.07750034</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.27902540</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nThe output here is actually a *probability* that ranges from 0 to 1. A value closer to 1 indicates a higher probability of there being contact between these two population groups. A value closer to 0 indicates lower probabilities of contact.\n\nProvide your interpretation of Black-White Interaction for New York City boroughs.\n\n### Nonwhite-White Interaction\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |> \n  mutate(interaction_bw = ((PoptotE-WhiteE) / (co_PoptotE-co_WhiteE) * WhiteE / PoptotE)) |>  \n  group_by(Borough) |>\n  summarise(interaction = sum(interaction_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ebegkijvwu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ebegkijvwu table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ebegkijvwu thead, #ebegkijvwu tbody, #ebegkijvwu tfoot, #ebegkijvwu tr, #ebegkijvwu td, #ebegkijvwu th {\n  border-style: none;\n}\n\n#ebegkijvwu p {\n  margin: 0;\n  padding: 0;\n}\n\n#ebegkijvwu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ebegkijvwu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ebegkijvwu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ebegkijvwu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ebegkijvwu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ebegkijvwu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ebegkijvwu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ebegkijvwu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ebegkijvwu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ebegkijvwu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ebegkijvwu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ebegkijvwu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ebegkijvwu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ebegkijvwu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ebegkijvwu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebegkijvwu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ebegkijvwu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ebegkijvwu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ebegkijvwu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebegkijvwu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ebegkijvwu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebegkijvwu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ebegkijvwu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebegkijvwu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebegkijvwu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebegkijvwu .gt_left {\n  text-align: left;\n}\n\n#ebegkijvwu .gt_center {\n  text-align: center;\n}\n\n#ebegkijvwu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ebegkijvwu .gt_font_normal {\n  font-weight: normal;\n}\n\n#ebegkijvwu .gt_font_bold {\n  font-weight: bold;\n}\n\n#ebegkijvwu .gt_font_italic {\n  font-style: italic;\n}\n\n#ebegkijvwu .gt_super {\n  font-size: 65%;\n}\n\n#ebegkijvwu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ebegkijvwu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ebegkijvwu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ebegkijvwu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ebegkijvwu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ebegkijvwu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ebegkijvwu .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"interaction\">interaction</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.0630752</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.2310775</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.3196593</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.1771489</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.4523662</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n### Latino-White Interaction\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |> \n  mutate(interaction_bw = (HispanicE / co_HispanicE * WhiteE / PoptotE)) |>  \n  group_by(Borough) |>\n  summarise(interaction = sum(interaction_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xmkbzyuypp\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#xmkbzyuypp table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#xmkbzyuypp thead, #xmkbzyuypp tbody, #xmkbzyuypp tfoot, #xmkbzyuypp tr, #xmkbzyuypp td, #xmkbzyuypp th {\n  border-style: none;\n}\n\n#xmkbzyuypp p {\n  margin: 0;\n  padding: 0;\n}\n\n#xmkbzyuypp .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xmkbzyuypp .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xmkbzyuypp .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xmkbzyuypp .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xmkbzyuypp .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xmkbzyuypp .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xmkbzyuypp .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xmkbzyuypp .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xmkbzyuypp .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#xmkbzyuypp .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xmkbzyuypp .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xmkbzyuypp .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xmkbzyuypp .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xmkbzyuypp .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xmkbzyuypp .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xmkbzyuypp .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xmkbzyuypp .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xmkbzyuypp .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#xmkbzyuypp .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xmkbzyuypp .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xmkbzyuypp .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xmkbzyuypp .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xmkbzyuypp .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xmkbzyuypp .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xmkbzyuypp .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xmkbzyuypp .gt_left {\n  text-align: left;\n}\n\n#xmkbzyuypp .gt_center {\n  text-align: center;\n}\n\n#xmkbzyuypp .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xmkbzyuypp .gt_font_normal {\n  font-weight: normal;\n}\n\n#xmkbzyuypp .gt_font_bold {\n  font-weight: bold;\n}\n\n#xmkbzyuypp .gt_font_italic {\n  font-style: italic;\n}\n\n#xmkbzyuypp .gt_super {\n  font-size: 65%;\n}\n\n#xmkbzyuypp .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#xmkbzyuypp .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xmkbzyuypp .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xmkbzyuypp .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xmkbzyuypp .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xmkbzyuypp .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xmkbzyuypp .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"interaction\">interaction</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.06632347</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.26564666</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.27182625</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.20714070</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"interaction\" class=\"gt_row gt_right\">0.46687669</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nHow would you interpret Black-White, Non-White White, and Latino-White interaction jointly?\n\n# Isolation\n\nThe final measure of racial segregation we'll look at in this lab is *isolation* which is only measured for one group at a time. Isolation measures the likelihood of contact for a subgroup with other subgroup members. It is interpreted similarly to Interaction (as a probability ranging from 0 to 1):\n\nIsolation for Blacks\n\n$Isolation = \\sum_i\\frac{b_i}{B}*\\frac{b_i}{t_i}$\n\nWhere\n\n$b_i$ is the Black population of tract *i*\n\n$B$ is the Black population of the county\n\n$t_i$ is the total population of tract *i*\n\n### Black Isolation\n\nLet's calculate Black Isolation:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race  |>\n  mutate(isolation_bw = (BlackE / co_BlackE * BlackE / PoptotE)) |>  \n  group_by(Borough) |>  \n  summarise(isolation = sum(isolation_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"phsxiknnzp\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#phsxiknnzp table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#phsxiknnzp thead, #phsxiknnzp tbody, #phsxiknnzp tfoot, #phsxiknnzp tr, #phsxiknnzp td, #phsxiknnzp th {\n  border-style: none;\n}\n\n#phsxiknnzp p {\n  margin: 0;\n  padding: 0;\n}\n\n#phsxiknnzp .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#phsxiknnzp .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#phsxiknnzp .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#phsxiknnzp .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#phsxiknnzp .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#phsxiknnzp .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#phsxiknnzp .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#phsxiknnzp .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#phsxiknnzp .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#phsxiknnzp .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#phsxiknnzp .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#phsxiknnzp .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#phsxiknnzp .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#phsxiknnzp .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#phsxiknnzp .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#phsxiknnzp .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#phsxiknnzp .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#phsxiknnzp .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#phsxiknnzp .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#phsxiknnzp .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#phsxiknnzp .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#phsxiknnzp .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#phsxiknnzp .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#phsxiknnzp .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#phsxiknnzp .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#phsxiknnzp .gt_left {\n  text-align: left;\n}\n\n#phsxiknnzp .gt_center {\n  text-align: center;\n}\n\n#phsxiknnzp .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#phsxiknnzp .gt_font_normal {\n  font-weight: normal;\n}\n\n#phsxiknnzp .gt_font_bold {\n  font-weight: bold;\n}\n\n#phsxiknnzp .gt_font_italic {\n  font-style: italic;\n}\n\n#phsxiknnzp .gt_super {\n  font-size: 65%;\n}\n\n#phsxiknnzp .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#phsxiknnzp .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#phsxiknnzp .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#phsxiknnzp .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#phsxiknnzp .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#phsxiknnzp .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#phsxiknnzp .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"isolation\">isolation</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.4180943</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.6295217</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.3457500</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.5888139</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.3198306</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nYou know what comes next. Let's calculate Nonwhite Isolation and Latino Isolation and interpret what you see.\n\n## Nonwhite Isolation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |> \n  mutate(isolation_bw = ((PoptotE - WhiteE) / (co_PoptotE - co_WhiteE) * (PoptotE-WhiteE) / PoptotE)) |> \n  group_by(Borough) |> \n  summarise(isolation = sum(isolation_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"adxlnrygaz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#adxlnrygaz table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#adxlnrygaz thead, #adxlnrygaz tbody, #adxlnrygaz tfoot, #adxlnrygaz tr, #adxlnrygaz td, #adxlnrygaz th {\n  border-style: none;\n}\n\n#adxlnrygaz p {\n  margin: 0;\n  padding: 0;\n}\n\n#adxlnrygaz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#adxlnrygaz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#adxlnrygaz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#adxlnrygaz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#adxlnrygaz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#adxlnrygaz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#adxlnrygaz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#adxlnrygaz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#adxlnrygaz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#adxlnrygaz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#adxlnrygaz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#adxlnrygaz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#adxlnrygaz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#adxlnrygaz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#adxlnrygaz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#adxlnrygaz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#adxlnrygaz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#adxlnrygaz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#adxlnrygaz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#adxlnrygaz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#adxlnrygaz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#adxlnrygaz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#adxlnrygaz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#adxlnrygaz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#adxlnrygaz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#adxlnrygaz .gt_left {\n  text-align: left;\n}\n\n#adxlnrygaz .gt_center {\n  text-align: center;\n}\n\n#adxlnrygaz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#adxlnrygaz .gt_font_normal {\n  font-weight: normal;\n}\n\n#adxlnrygaz .gt_font_bold {\n  font-weight: bold;\n}\n\n#adxlnrygaz .gt_font_italic {\n  font-style: italic;\n}\n\n#adxlnrygaz .gt_super {\n  font-size: 65%;\n}\n\n#adxlnrygaz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#adxlnrygaz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#adxlnrygaz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#adxlnrygaz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#adxlnrygaz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#adxlnrygaz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#adxlnrygaz .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"isolation\">isolation</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.9369248</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.7689225</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.6803407</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.8228511</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.5476338</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n## Latino Isolation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_race |> \n  mutate(isolation_bw = (HispanicE / co_HispanicE * HispanicE / PoptotE)) |>  \n  group_by(Borough) |>\n  summarise(isolation = sum(isolation_bw, na.rm=TRUE)) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"neptopafxq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#neptopafxq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#neptopafxq thead, #neptopafxq tbody, #neptopafxq tfoot, #neptopafxq tr, #neptopafxq td, #neptopafxq th {\n  border-style: none;\n}\n\n#neptopafxq p {\n  margin: 0;\n  padding: 0;\n}\n\n#neptopafxq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#neptopafxq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#neptopafxq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#neptopafxq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#neptopafxq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#neptopafxq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#neptopafxq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#neptopafxq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#neptopafxq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#neptopafxq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#neptopafxq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#neptopafxq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#neptopafxq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#neptopafxq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#neptopafxq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#neptopafxq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#neptopafxq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#neptopafxq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#neptopafxq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#neptopafxq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#neptopafxq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#neptopafxq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#neptopafxq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#neptopafxq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#neptopafxq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#neptopafxq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#neptopafxq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#neptopafxq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#neptopafxq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#neptopafxq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#neptopafxq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#neptopafxq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#neptopafxq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#neptopafxq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#neptopafxq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#neptopafxq .gt_left {\n  text-align: left;\n}\n\n#neptopafxq .gt_center {\n  text-align: center;\n}\n\n#neptopafxq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#neptopafxq .gt_font_normal {\n  font-weight: normal;\n}\n\n#neptopafxq .gt_font_bold {\n  font-weight: bold;\n}\n\n#neptopafxq .gt_font_italic {\n  font-style: italic;\n}\n\n#neptopafxq .gt_super {\n  font-size: 65%;\n}\n\n#neptopafxq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#neptopafxq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#neptopafxq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#neptopafxq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#neptopafxq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#neptopafxq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#neptopafxq .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Borough\">Borough</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"isolation\">isolation</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Bronx</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.6313472</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Brooklyn</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.3350622</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Manhattan</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.4678842</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Queens</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.4283512</td></tr>\n    <tr><td headers=\"Borough\" class=\"gt_row gt_left\">Staten Island</td>\n<td headers=\"isolation\" class=\"gt_row gt_right\">0.2666154</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nProvide your interpretation of how isolation differs for these groups and for each borough.\n\n# Income Inequality\n\nWhile we're at it, let's also pay attention to segregation on the basis of income. A simple measure of income inequality and distribution is to calculate the difference in median income between the county and the census tracts that make up the county.\n\nWe have all of our census tract geographic data, but need to go back to census data to download tract and county median household income data (this is not a place to take the average or weighted average of the tract-level data). Let's download and prepare these as a new dataset. Median household income is contained in ACS table [B19013](https://data.census.gov/cedsci/table?q=B19013&tid=ACSDT1Y2019.B19013):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndl_vars <- c(\n  MHHI = \"B19013_001\")\n\n# Our tidycensus download call:\n\nnyc_income <- get_acs(\n  geography = \"tract\",\n  state = \"NY\",\n  county = c(\"Bronx\", \"Kings\", \"New York\", \"Queens\", \"Richmond\"),\n  variables = dl_vars,\n  year = 2020,\n  output = \"wide\"\n) \n\ndl_vars <- c(\n  co_MHHI = \"B19013_001\")\n\nnyc_income_co <- get_acs(\n  geography = \"county\",\n  state = \"NY\",\n  county = c(\"Bronx\", \"Kings\", \"New York\", \"Queens\", \"Richmond\"),\n  variables = dl_vars,\n  year = 2020,\n  output = \"wide\"\n) \n\nnyc_income |> \n  slice_head(n = 5) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"pcsnvpokif\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#pcsnvpokif table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#pcsnvpokif thead, #pcsnvpokif tbody, #pcsnvpokif tfoot, #pcsnvpokif tr, #pcsnvpokif td, #pcsnvpokif th {\n  border-style: none;\n}\n\n#pcsnvpokif p {\n  margin: 0;\n  padding: 0;\n}\n\n#pcsnvpokif .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#pcsnvpokif .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#pcsnvpokif .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#pcsnvpokif .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#pcsnvpokif .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#pcsnvpokif .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#pcsnvpokif .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#pcsnvpokif .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#pcsnvpokif .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#pcsnvpokif .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#pcsnvpokif .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#pcsnvpokif .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#pcsnvpokif .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#pcsnvpokif .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#pcsnvpokif .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pcsnvpokif .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#pcsnvpokif .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#pcsnvpokif .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#pcsnvpokif .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pcsnvpokif .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#pcsnvpokif .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pcsnvpokif .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#pcsnvpokif .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pcsnvpokif .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pcsnvpokif .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pcsnvpokif .gt_left {\n  text-align: left;\n}\n\n#pcsnvpokif .gt_center {\n  text-align: center;\n}\n\n#pcsnvpokif .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#pcsnvpokif .gt_font_normal {\n  font-weight: normal;\n}\n\n#pcsnvpokif .gt_font_bold {\n  font-weight: bold;\n}\n\n#pcsnvpokif .gt_font_italic {\n  font-style: italic;\n}\n\n#pcsnvpokif .gt_super {\n  font-size: 65%;\n}\n\n#pcsnvpokif .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#pcsnvpokif .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#pcsnvpokif .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#pcsnvpokif .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#pcsnvpokif .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#pcsnvpokif .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#pcsnvpokif .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GEOID\">GEOID</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"NAME\">NAME</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"MHHIE\">MHHIE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"MHHIM\">MHHIM</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009202</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 92.02, Kings County, New York</td>\n<td headers=\"MHHIE\" class=\"gt_row gt_right\">41563</td>\n<td headers=\"MHHIM\" class=\"gt_row gt_right\">18846</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009401</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 94.01, Kings County, New York</td>\n<td headers=\"MHHIE\" class=\"gt_row gt_right\">51346</td>\n<td headers=\"MHHIM\" class=\"gt_row gt_right\">13554</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009402</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 94.02, Kings County, New York</td>\n<td headers=\"MHHIE\" class=\"gt_row gt_right\">58750</td>\n<td headers=\"MHHIM\" class=\"gt_row gt_right\">10259</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009600</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 96, Kings County, New York</td>\n<td headers=\"MHHIE\" class=\"gt_row gt_right\">62614</td>\n<td headers=\"MHHIM\" class=\"gt_row gt_right\">13004</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047009800</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Census Tract 98, Kings County, New York</td>\n<td headers=\"MHHIE\" class=\"gt_row gt_right\">56229</td>\n<td headers=\"MHHIM\" class=\"gt_row gt_right\">7251</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nLet's also take a look at our county income table:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_income_co |> \n  slice_head(n=5) |> \n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ajzrlnyduq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ajzrlnyduq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ajzrlnyduq thead, #ajzrlnyduq tbody, #ajzrlnyduq tfoot, #ajzrlnyduq tr, #ajzrlnyduq td, #ajzrlnyduq th {\n  border-style: none;\n}\n\n#ajzrlnyduq p {\n  margin: 0;\n  padding: 0;\n}\n\n#ajzrlnyduq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ajzrlnyduq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ajzrlnyduq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ajzrlnyduq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ajzrlnyduq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ajzrlnyduq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ajzrlnyduq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ajzrlnyduq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ajzrlnyduq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ajzrlnyduq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ajzrlnyduq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ajzrlnyduq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ajzrlnyduq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ajzrlnyduq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ajzrlnyduq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajzrlnyduq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ajzrlnyduq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ajzrlnyduq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ajzrlnyduq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajzrlnyduq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ajzrlnyduq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajzrlnyduq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ajzrlnyduq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajzrlnyduq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ajzrlnyduq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajzrlnyduq .gt_left {\n  text-align: left;\n}\n\n#ajzrlnyduq .gt_center {\n  text-align: center;\n}\n\n#ajzrlnyduq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ajzrlnyduq .gt_font_normal {\n  font-weight: normal;\n}\n\n#ajzrlnyduq .gt_font_bold {\n  font-weight: bold;\n}\n\n#ajzrlnyduq .gt_font_italic {\n  font-style: italic;\n}\n\n#ajzrlnyduq .gt_super {\n  font-size: 65%;\n}\n\n#ajzrlnyduq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ajzrlnyduq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ajzrlnyduq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ajzrlnyduq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ajzrlnyduq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ajzrlnyduq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ajzrlnyduq .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GEOID\">GEOID</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"NAME\">NAME</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_MHHIE\">co_MHHIE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"co_MHHIM\">co_MHHIM</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36061</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">New York County, New York</td>\n<td headers=\"co_MHHIE\" class=\"gt_row gt_right\">89812</td>\n<td headers=\"co_MHHIM\" class=\"gt_row gt_right\">1681</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36085</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Richmond County, New York</td>\n<td headers=\"co_MHHIE\" class=\"gt_row gt_right\">85381</td>\n<td headers=\"co_MHHIM\" class=\"gt_row gt_right\">2396</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36005</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Bronx County, New York</td>\n<td headers=\"co_MHHIE\" class=\"gt_row gt_right\">41895</td>\n<td headers=\"co_MHHIM\" class=\"gt_row gt_right\">624</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36047</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Kings County, New York</td>\n<td headers=\"co_MHHIE\" class=\"gt_row gt_right\">63973</td>\n<td headers=\"co_MHHIM\" class=\"gt_row gt_right\">679</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">36081</td>\n<td headers=\"NAME\" class=\"gt_row gt_left\">Queens County, New York</td>\n<td headers=\"co_MHHIE\" class=\"gt_row gt_right\">72028</td>\n<td headers=\"co_MHHIM\" class=\"gt_row gt_right\">691</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nAnd now let's join the two together (again creating our state and county FIPS codes from our combined state, county, and tract FIPS codes):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_income <- left_join(nyc_income |> mutate(STCO = substr(GEOID, 0, 5)), nyc_income_co, by=c(\"STCO\" = \"GEOID\"))\n```\n:::\n\n\nNow we can calculate the ratio of income for our census tract to that of the county:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_income <-nyc_income |> \n  mutate(inc_ratio = MHHIE / co_MHHIE)\n```\n:::\n\n\nNow let's map out this income ratio statistic for New York City tracts:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_income <- left_join(nyc_income, nyc_trt, by=\"GEOID\") |> st_as_sf()\n\nggplot()+\n  geom_sf(data=nyc_income, aes(fill=inc_ratio), colour = NA)+\n    labs(title = \"New York City Borough Income Ratio\", fill = \"Income Ratio\")+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-50-1.png){width=672}\n:::\n:::\n\n\nWhat would a ratio of 1 indicate? What would a ratio of 3 indicate? Where do we see big differences?\n\nWhile we're at it, it might be interesting to create a scatter plot that illustrates the relationship between racial concentration and income. To do this, we'll need to join together our two datasets.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_dataset <- left_join(nyc_race, nyc_income |> st_set_geometry(NULL)|> select(GEOID, MHHIE, MHHIM, co_MHHIE, co_MHHIM, inc_ratio), by=\"GEOID\")\n```\n:::\n\n\nLet's plot the Percent White on the X axis and the income ratio on the y axis using geom_point):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_point(data=nyc_dataset, aes(x=(WhiteE/PoptotE), y=inc_ratio), cex = .5, alpha = .2) +\n  labs(title = \"My Cool Plot\", x = \"Percent White\", y = \"Income Ratio\") +\n  scale_x_continuous(labels = scales::percent)+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-52-1.png){width=672}\n:::\n:::\n\n\nHow would you describe this relationship?\n\nNow see if you can add a linear line of best fit to these data using geom_smooth (you'll need to set `method = lm` to get a fitted linear model):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_point(data=nyc_dataset, aes(x=(WhiteE/PoptotE), y=inc_ratio), cex = .5, alpha = .2) +\n  geom_smooth(data=nyc_dataset, method = \"lm\", aes(x=(WhiteE/PoptotE), y=inc_ratio), alpha = .5)+\n  labs(title = \"Tract Income Ratio by White Population\", x = \"Percent White\", y = \"Income Ratio\") +\n  scale_x_continuous(labels = scales::percent)+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-53-1.png){width=672}\n:::\n:::\n\n\nWhat's the relationship between the percent white population and the income ratio?\n\nWhat would it look like to split this out by boroughs using *facets*?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot()+\n  geom_point(data=nyc_dataset, aes(x=(WhiteE/PoptotE), y=inc_ratio), cex = .5, alpha = .2) +\n  geom_smooth(data=nyc_dataset, method = \"lm\", aes(x=(WhiteE/PoptotE), y=inc_ratio), alpha = .5)+\n  labs(title = \"Tract Income Ratio by White Population\", x = \"Percent White\", y = \"Income Ratio\") +\n  scale_x_continuous(labels = scales::percent)+\n  theme_minimal()+\n  facet_wrap(~Borough)\n```\n\n::: {.cell-output-display}\n![](06_segregation_files/figure-html/unnamed-chunk-54-1.png){width=672}\n:::\n:::\n\n\nHow would you describe the differences observed by boroughs?\n\nCongratulations, you have learned some ways to calculate common measures of segregation, and have applied these measures as part of a data pipeline.\n\nBy changing your download calls at the very beginning of this lab where you download ACS data, you could easily create segregation measures for other places (note that you would have to re-label some elements where we indicate boroughs which are counties within New York City).\n\n# Extending this Analysis\n\nNow that you have some new tools that you are familiar with, start exploring these data more. Make maps for other racial groups. Explore dimensions of segregation for other groups.\n\n1.  Can you produce the data which would populate a summary table of minority-majority dissimilarity? Which groups face the highest levels of segregation?\n\n2.  How does income relate to levels of segregation? Think about how you might use the median household income statistic to explore the relationship.\n\n3.  What are other forms of segregation that might be useful to explore (aside from racial and income segregation)?\n\n## Lab Evaluation\n\nIn evaluating your lab submission, we'll be paying attention to the following:\n\n1.  Proper use of tigris tidycensus to download tabular and spatial data from the census bureau.\n2.  Production of clearly-labelled and well-formatted tables.\n3.  Production of well-formatted maps of income inequality.\n4.  Detailed reflection and diagnosis using measure of segregation.\n\nAs you get into the lab, please feel welcome to ask us questions, and please share where you're struggling with us and with others in the class.\n\n## References\n",
    "supporting": [
      "06_segregation_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}